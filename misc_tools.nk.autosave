#! C:/Program Files/Nuke13.2v4/nuke-13.2.4.dll -nx
version 13.2 v4
define_window_layout_xml {<?xml version="1.0" encoding="UTF-8"?>
<layout version="1.0">
    <window x="0" y="0" w="1917" h="1008" screen="0">
        <splitter orientation="1">
            <split size="40"/>
            <dock id="" hideTitles="1" activePageId="Toolbar.1">
                <page id="Toolbar.1"/>
            </dock>
            <split size="1254" stretch="1"/>
            <splitter orientation="2">
                <split size="567"/>
                <dock id="" activePageId="Viewer.1">
                    <page id="Viewer.1"/>
                </dock>
                <split size="399"/>
                <dock id="" activePageId="DAG.5" focus="true">
                    <page id="DAG.1"/>
                    <page id="Curve Editor.1"/>
                    <page id="DopeSheet.1"/>
                    <page id="DAG.2"/>
                    <page id="DAG.3"/>
                    <page id="DAG.4"/>
                    <page id="DAG.5"/>
                </dock>
            </splitter>
            <split size="615"/>
            <dock id="" activePageId="Properties.1">
                <page id="Properties.1"/>
                <page id="uk.co.thefoundry.backgroundrenderview.1"/>
            </dock>
        </splitter>
    </window>
</layout>
}
Root {
inputs 0
name K:/python/nuke-tools/misc_tools.nk
frame 55
format "2048 1556 0 0 2048 1556 1 2K_Super_35(full-ap)"
proxy_type scale
proxy_format "1024 778 0 0 1024 778 1 1K_Super_35(full-ap)"
colorManagement Nuke
workingSpaceLUT linear
monitorLut sRGB
monitorOutLUT rec709
int8Lut sRGB
int16Lut sRGB
logLut Cineon
floatLut linear
}
BackdropNode {
inputs 0
name BackdropNode1
tile_color 0x5a505fff
label "Volume rays FG"
note_font_size 200
xpos 2177
ypos -5
bdwidth 1870
bdheight 2643
}
BackdropNode {
inputs 0
name BackdropNode2
tile_color 0x6e5564ff
label "Fallof setup"
note_font_size 50
xpos 3425
ypos 1465
bdwidth 445
bdheight 556
}
BackdropNode {
inputs 0
name BackdropNode3
tile_color 0x6e5564ff
label "Godrays shape setup"
note_font_size 50
xpos 3428
ypos 959
bdwidth 435
bdheight 446
}
BackdropNode {
inputs 0
name BackdropNode4
tile_color 0x5a7373ff
label position
note_font_size 50
xpos 2991
ypos 858
bdwidth 200
bdheight 280
}
StickyNote {
inputs 0
name StickyNote54
tile_color 0xff0000ff
label "Subtle edge breakup\nUse for full CG or ENVs"
note_font_size 20
xpos -251
ypos 666
}
StickyNote {
inputs 0
name StickyNote55
tile_color 0xff0000ff
label "Light Blur / Glow\nUsed to add glow to ENV lights"
note_font_size 20
xpos -252
ypos 855
}
StickyNote {
inputs 0
name StickyNote56
label "Spherical Edge lens soften"
note_font_size 20
xpos -252
ypos 1126
}
StickyNote {
inputs 0
name StickyNote58
tile_color 0xff00ff
label "Chromatic abberation\nTweak based on plate"
note_font_size 20
xpos -253
ypos 1311
}
StickyNote {
inputs 0
name StickyNote59
tile_color 0xff00ff
label "Vignette\nTweak based on plate"
note_font_size 20
xpos -257
ypos 1438
}
Group {
inputs 0
name Group10
label "chroma ab"
xpos -265
ypos 1255
addUserKnob {20 User}
addUserKnob {14 rchan l "red scale" R 0 100}
rchan 1.00075
addUserKnob {14 gchan l "green scale" R 0 100}
gchan 1.0005
addUserKnob {14 bchan l "blue scale" R 0 100}
bchan 1
addUserKnob {20 pan_group l "center / pan" n 1}
pan_group 0
addUserKnob {12 center}
center {{input0.width/2} {input0.height/2}}
addUserKnob {6 pad_black l "black outside" -STARTLINE}
pad_black true
addUserKnob {12 rchan_pan l "red pan"}
addUserKnob {12 gchan_pan l "green pan"}
addUserKnob {12 bchan_pan l "blue pan"}
addUserKnob {26 ""}
addUserKnob {20 endGroup n -1}
addUserKnob {4 outputAlpha l output M {"fake alpha over bg" "fake alpha only" white ""}}
addUserKnob {26 ""}
addUserKnob {7 mix}
mix 1
addUserKnob {20 version l Version}
addUserKnob {26 Help l Help: T "This 'chromaAb' gizmo is supposed to be similar to the chormaAb that is in Shake,\nand applies the effect on whatever is connected to the FG input.\n\nIt is meant to be used as a merge operation, but if you choose to only plug in the \nFG you can. This, however, can cause unwanted edges. Because this is ment to\nbe used as a merge, if you disable this node, it will return whatever is inputed in the BG.\nIf nothing is put into the BG and it is disabled, this will return nothing.\n\n\n"}
addUserKnob {26 ""}
addUserKnob {32 MoreHelp l "More Help" T "start http://lois4.lucasfilm.com/document/chromaab_v01gizmo-nuke/" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 VersionRelease l "Version Release" T 3.0}
addUserKnob {26 ReleaseNotes l "Release Notes" T "fixes proxy bugs"}
addUserKnob {26 Author l Author: T "Can Chang (cchang)"}
addUserKnob {26 LastEditBy l "Last Edit By:" T "Mark Nettleton (mnettleton)"}
addUserKnob {26 ReleaseDate l "Release Date:" T 11/18/11}
}
Input {
 inputs 0
 name bg
 xpos 523
 ypos -735
 number 1
}
Reformat {
 type "to box"
 box_width {{parent.Reformat2.box_width i}}
 box_height {{parent.Reformat2.box_height i}}
 box_fixed true
 box_pixel_aspect {{parent.Reformat2.box_pixel_aspect i}}
 pbb true
 name Reformat3
 xpos 523
 ypos -664
}
Dot {
 name Dot3
 xpos 557
 ypos -468
}
set Nf9866c00 [stack 0]
Dot {
 name Dot2
 xpos 557
 ypos -180
}
set Nf9867000 [stack 0]
Dot {
 name Dot1
 xpos 557
 ypos 204
}
Input {
 inputs 0
 name fg
 xpos 641
 ypos -733
}
Reformat {
 type "to box"
 box_width {{"\[value \[input this 0].format.r] - \[value \[input this 0].format.x]" i}}
 box_height {{"\[value \[input this 0].format.t]  - \[value \[input this 0].format.y] " i}}
 box_fixed true
 box_pixel_aspect {{"\[value \[input this 0].pixel_aspect]" i}}
 pbb true
 name Reformat2
 xpos 641
 ypos -661
}
Dot {
 name Dot7
 xpos 675
 ypos -588
}
set Nf987a400 [stack 0]
Transform {
 translate {{parent.bchan_pan} {parent.bchan_pan}}
 scale {{parent.bchan} {parent.bchan}}
 center {{parent.center.x} {parent.center.y}}
 black_outside {{parent.pad_black}}
 name blue_repo
 xpos 909
 ypos -490
}
set Nf987a800 [stack 0]
push $Nf987a400
Transform {
 translate {{parent.gchan_pan} {parent.gchan_pan}}
 scale {{parent.gchan} {parent.gchan}}
 center {{parent.center.x} {parent.center.y}}
 black_outside {{parent.pad_black}}
 name green_repo
 xpos 787
 ypos -492
}
set Nf987ac00 [stack 0]
push $Nf987a400
Transform {
 translate {{parent.rchan_pan} {parent.rchan_pan}}
 scale {{parent.rchan} {parent.rchan}}
 center {{parent.center.x} {parent.center.y}}
 black_outside {{parent.pad_black}}
 name red_repo
 xpos 641
 ypos -491
}
set Nf987b000 [stack 0]
Merge {
 inputs 2
 operation plus
 name Merge1
 xpos 1060
 ypos -323
}
Merge {
 inputs 2
 operation plus
 name Merge2
 xpos 1170
 ypos -323
}
Grade {
 channels alpha
 multiply 0.3333333333
 name Grade1
 label "one third A"
 xpos 1170
 ypos -264
}
set Nf987bc00 [stack 0]
push $Nf9867000
push $Nf987bc00
Merge2 {
 inputs 2
 operation under
 name Merge5
 label "fake A over bg"
 xpos 1170
 ypos -190
}
push $Nf9866c00
push $Nf987a800
Merge {
 inputs 2
 swap true
 name blueOver
 xpos 909
 ypos -323
}
push $Nf9866c00
push $Nf987ac00
Merge {
 inputs 2
 swap true
 name greenOver
 xpos 787
 ypos -323
}
push $Nf9866c00
push $Nf987b000
Merge {
 inputs 2
 swap true
 name redOver
 xpos 641
 ypos -324
}
Copy {
 inputs 2
 from0 rgba.green
 to0 rgba.green
 name Copy2
 xpos 787
 ypos -258
 disable {{"!\[exists parent.input0]&&!\[exists parent.input1]" i x2116 0}}
}
Copy {
 inputs 2
 from0 rgba.blue
 to0 rgba.blue
 name Copy3
 xpos 909
 ypos -258
 disable {{"!\[exists parent.input0]&&!\[exists parent.input1]" i x2116 0}}
}
Copy {
 inputs 2
 from0 rgba.alpha
 to0 rgba.alpha
 name Copy4
 xpos 1170
 ypos -113
}
CCrosstalk {
 name CCrosstalk1
 xpos 1170
 ypos -10
}
Clamp {
 channels alpha
 name Clamp1
 xpos 1170
 ypos 55
}
set Nf98f0000 [stack 0]
Switch {
 inputs 2
 which {{outputAlpha i}}
 name Switch1
 xpos 1396
 ypos 61
}
push $Nf98f0000
Copy {
 inputs 2
 from0 rgba.alpha
 to0 rgba.alpha
 name Copy1
 xpos 1396
 ypos 102
}
Shuffle {
 alpha white
 name Shuffle1
 xpos 1396
 ypos 144
 disable {{(outputAlpha==2)*-1+1 i}}
}
Dissolve {
 inputs 2
 which {{1-parent.mix}}
 name Dissolve1
 label mix
 xpos 1396
 ypos 188
}
Output {
 name Output1
 xpos 1396
 ypos 277
}
end_group
Roto {
inputs 0
output alpha
cliptype bbox
curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44838000 x440c8000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Bezier1 512 bezier
     {{cc
       {f 8192}
       {px x44eea000
        {xc3b845a0 xc0c90600}
        {x44846234 x44a48309}
        {x43b845a0 x40c90600}
        {xc2ff77d0 x4301d3f0}
        {x44f2d795 x446ce342}
        {x42ff77d0 xc301d3f0}
        {x40060800 x42a78518}
        {x4503c299 x43f5878c}
        {xc0060000 xc2a78520}
        {x4301d3f0 x4296c49a}
        {x44f1888c x41b00634}
        {xc301d3f8 xc296c49b}
        {x43c7fa1c x40060400}
        {x44820725 xc3a5f104}
        {xc3c7fa1c xc0060440}
        {x42d16668 xc2c4d602}
        {x42e559a6 x41f3084c}
        {xc2d16665 x42c4d604}
        {xc0c90624 xc33e8dd2}
        {xc2297fce x43e3bb00}
        {x40c90624 x433e8dd4}
        {xc3299d2e xc31f24d8}
        {x42f61a2a x446bd73a}
        {x43299d2e x431f24d8}}}     idem}
     {t x44813000 x440ff000}
     {a osw x41200000 osf 0 str 1 spx x44838000 spy x440c8000 sb 1 ltn x44840000 ltm x44840000 tt x40800000}}}}}}
toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
toolbar_brush_hardness 0.200000003
toolbar_source_transform_scale {1 1}
toolbar_source_transform_center {1052 562}
colorOverlay {0 0 0 0}
lifetime_type "all frames"
lifetime_start 1056
lifetime_end 1056
motionblur_shutter_offset_type centred
source_black_outside true
name Roto31
xpos -616
ypos 1004
}
Invert {
name Invert6
xpos -616
ypos 1069
}
Blur {
size 600
name Blur27
xpos -616
ypos 1125
}
Group {
inputs 0
name Group5
help "This tool eliminates all nan and inf value pixels and replaces them with averaged values from surrounding pixels."
label "nan inf kill"
xpos -396
ypos -20
addUserKnob {20 NAN_FIX}
addUserKnob {41 size T Blur1.size}
addUserKnob {20 Version}
addUserKnob {26 Help l Help: T "Eliminates NAN pixels and fills them out with neighboring pixels."}
addUserKnob {26 ""}
addUserKnob {32 MoreHelp l "More Help" T "start http://lois4/document/nuke-NAN_FIX-help/" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 VersionRelease l "Version Release" T 1.0}
addUserKnob {26 ReleaseNotes l "Release Notes:" T "Initial gizmo release"}
addUserKnob {26 Authors l Authors: T "Ivan Busquets"}
addUserKnob {26 LastEditBy l "Last Edit By:" T "Jose Fernandez de Castro"}
addUserKnob {26 Release l "Release Date:" T 07/29/14}
}
Input {
 inputs 0
 name Input1
 xpos 213
 ypos -455
}
Dot {
 name Dot5
 xpos 247
 ypos -343
}
set N8a7f1c00 [stack 0]
Expression {
 expr0 "isinf(r) || isnan(r) ?0:r"
 expr1 "isinf(g) || isnan(g) ?0:g"
 expr2 "isinf(b) || isnan(b) ?0:b"
 expr3 a==inf||a==-inf?0:a
 name Expression2
 xpos 213
 ypos -266
}
set Nd79cc000 [stack 0]
Dot {
 name Dot4
 xpos 522
 ypos -262
}
Dot {
 name Dot6
 xpos 522
 ypos 61
}
push $N8a7f1c00
Expression {
 expr3 "isinf(r) || isnan(r) || isinf(g) || isnan(g) || isinf(b) || isnan(b)"
 name Expression3
 xpos -67
 ypos -347
}
set Nd79ccc00 [stack 0]
Dot {
 name Dot1
 xpos -33
 ypos -10
}
push $Nd79ccc00
Invert {
 channels alpha
 name Invert1
 xpos 55
 ypos -266
}
Shuffle {
 red alpha
 green alpha
 blue alpha
 name Shuffle2
 xpos 55
 ypos -207
}
set Nd79cd800 [stack 0]
push $Nd79cc000
Merge2 {
 inputs 2
 operation multiply
 name Merge1
 xpos 213
 ypos -207
}
Blur {
 size {{parent.Blur1.size}}
 name Blur2
 xpos 213
 ypos -160
}
push $Nd79cd800
Blur {
 size 3
 name Blur1
 xpos 55
 ypos -151
}
Merge2 {
 inputs 2
 operation divide
 name Merge2
 xpos 213
 ypos -84
}
push $N8a7f1c00
Dot {
 name Dot3
 xpos 327
 ypos -273
}
Dot {
 name Dot2
 xpos 327
 ypos -39
}
Keymix {
 inputs 3
 name Keymix1
 xpos 213
 ypos -20
}
Switch {
 inputs 2
 name Switch1
 xpos 213
 ypos 57
}
Output {
 name Output1
 xpos 213
 ypos 130
}
end_group
Group {
name Group6
label "neg kil"
xpos -396
ypos 56
addUserKnob {20 Negkill}
addUserKnob {26 Clamp l "Clamp (below 0)"}
addUserKnob {41 channels T Clamp9.channels}
addUserKnob {26 Clamp1 l "Clamp (between 0-1)"}
addUserKnob {41 channels_1 l channels T Clamp10.channels}
addUserKnob {20 Version}
addUserKnob {26 "" l Help: T "Negkill clips the black levels to a value of zero in the color channels\nwhile clamping your alpha between zero and one"}
addUserKnob {26 ""}
addUserKnob {32 MoreHelp l "More Help" T "start https://confluence.lucasfilm.com/x/-suh" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 VersionRelease l "Version Release:" T 2.0}
addUserKnob {26 ReleaseNotes l "Release Notes:" T "Will not error when missing alpha channel."}
addUserKnob {26 Authors l Author(s): T "Matt Brumit (mbrumit)"}
addUserKnob {26 "" l "Last Edit By:" T "Matt Brumit (mbrumit)"}
addUserKnob {26 ReleaseDate l ReleaseDate: T 12/7/11}
}
Input {
 inputs 0
 name In
 xpos -446
 ypos 424
}
Clamp {
 maximum_enable false
 name Clamp9
 xpos -446
 ypos 535
}
Clamp {
 channels alpha
 name Clamp10
 xpos -446
 ypos 618
}
Output {
 name Output1
 xpos -446
 ypos 773
}
end_group
set N8a7f9080 [stack 0]
Dot {
name Dot74
xpos -550
ypos 72
}
Dot {
name Dot75
xpos -550
ypos 228
}
set Nd7a31400 [stack 0]
Dot {
name Dot76
xpos -550
ypos 365
}
push $Nd7a31400
Keyer {
invert true
operation "luminance key"
name Keyer1
xpos -493
ypos 218
}
push $N8a7f9080
Log2Lin {
operation lin2log
name Log2Lin1
xpos -396
ypos 167
}
Blur {
inputs 1+1
channels rgba
size 100
mix 0.05
name Blur28
label "size: \[value size]"
xpos -396
ypos 218
}
Log2Lin {
name Log2Lin2
xpos -396
ypos 279
}
Unpremult {
name Unpremult10
xpos -396
ypos 318
}
ShuffleCopy {
inputs 2
name ShuffleCopy1
xpos -396
ypos 361
}
Premult {
name Premult34
xpos -396
ypos 402
}
Dot {
name Dot77
xpos -362
ypos 601
}
set Nf993e400 [stack 0]
Group {
name Group7
help "randomizes the position of each pixel within a certain distance\nUse for adding noise. Works like Randomise in shake or Dither in CompTime.\nUse filter type presets for different types of noise. You will get large noise or finer noise.\nSet amplitude above 0 for this to work"
knobChanged "\nn = nuke.thisNode()\nk = nuke.thisKnob()\nif k.name() in \[\"showPanel\", \"JitterPattern\"]:\n    n\['size'].setVisible(n.knob(\"JitterPattern\").value() == \"Custom\")\n    n\['irregularity'].setVisible(n.knob(\"JitterPattern\").value() == \"Custom\")\n    n\['intensity'].setVisible(n.knob(\"JitterPattern\").value() == \"Custom\")\n    n\['endl'].setVisible(n.knob(\"JitterPattern\").value() == \"Custom\")\n"
label "\[value JitterPattern]"
xpos -514
ypos 588
mapsize {0.15 0.15}
addUserKnob {20 jittermizer}
addUserKnob {41 channels T IDistort.channels}
addUserKnob {4 JitterPattern l "Jitter Pattern" M {"Kodak 5248" "Kodak 5279" "Kodak FX214" "Kodak GTS274" "Kodak 5217" "Kodak 5218" Custom "" ""}}
JitterPattern "Kodak 5217"
addUserKnob {6 BBOX l "use BBox" -STARTLINE}
BBOX true
addUserKnob {26 ""}
addUserKnob {14 size +HIDDEN R 0 100}
size 0.5
addUserKnob {14 irregularity +HIDDEN R 0 100}
irregularity 0.6
addUserKnob {14 intensity +HIDDEN R 0 100}
intensity 0.38
addUserKnob {26 endl l "" +STARTLINE +HIDDEN}
addUserKnob {7 seed t "use the expression \"frame\" to put some running noise through the jittermizer. Otherwise it will be static." R 1 100}
seed 1
addUserKnob {41 uv_scale l amplitude T IDistort.uv_scale}
addUserKnob {7 offset}
offset 0.5
addUserKnob {7 dilate R -100 100}
addUserKnob {26 ""}
addUserKnob {6 Crop l "Crop to Format" t "Crops the output to the project settings width & height" +STARTLINE}
Crop true
addUserKnob {20 Transform}
addUserKnob {12 translate}
addUserKnob {7 rotate}
addUserKnob {14 scale R 0 100}
scale 1
addUserKnob {7 skew}
addUserKnob {12 center}
addUserKnob {20 Version}
addUserKnob {26 Help l Help: T "Jittermizer can be used to add a bit of noise to an edge by \nrandomly breaking up the matte. For example, a roto-ed hair\nmatte that looks too straight can be made to look more ragged\nand natural with Jittermizer."}
addUserKnob {26 ""}
addUserKnob {32 MoreHelp l "More Help" T "start http://lois4/document/nuke-jittermizer-help/" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 VRelease l "Version Release:" T 6.1}
addUserKnob {26 RNotes l ReleaseNotes: T "Added Transform controls to move noise pattern\nAdded a \"Custom\" option to Jitter Patern options\nFixed error with link sequences pointing to missing frames"}
addUserKnob {26 "" l Authors: T "Jason Billington (jbillington)"}
addUserKnob {26 last l "Last Edit By:" T "Ivan Busquets (ibusquets)"}
addUserKnob {26 Date l "Release Date:" T 11/11/11}
}
Input {
 inputs 0
 name Input
 xpos 63
 ypos -988
}
Dilate {
 size {{parent.dilate i}}
 name Dilate
 xpos 63
 ypos -406
}
set Nf993ec00 [stack 0]
AdjBBox {
 numpixels {{(parent.IDistort.uv_scale/5)+35 i}}
 name AdjBBox1
 xpos 208
 ypos -399
}
Constant {
 inputs 0
 color 0.5
 format {{{parent.input.format}}}
 name Constant1
 xpos 366
 ypos -1059
}
Dot {
 name Dot2
 xpos 400
 ypos -953
}
set Nf993f800 [stack 0]
push $Nf993f800
Dot {
 name Dot3
 xpos 626
 ypos -953
}
NoOp {
 name Noise_Parameters
 xpos 592
 ypos -886
 addUserKnob {20 User}
 addUserKnob {3 seed}
 seed 134
 addUserKnob {26 ""}
 addUserKnob {7 w_size}
 w_size {{"\[switch \[numvalue parent.JitterPattern] \{0 \{format 3.3\} 1 \{format 2.7\} 2 \{format 1.87\} 3 \{format 0.04\} 4 \{format 0.23\} 5 \{format 0.1\} default \{value parent.size.w\}\}]"}}
 addUserKnob {7 h_size}
 h_size {{"\[switch \[numvalue parent.JitterPattern] \{0 \{format 2.9\} 1 \{format 2.6\} 2 \{format 2.6\} 3 \{format 0.1\} 4 \{format 1.2\} 5 \{format 1.6\} default \{value parent.size.h\}\}]"}}
 addUserKnob {26 ""}
 addUserKnob {7 w_irr}
 w_irr {{"\[switch \[numvalue parent.JitterPattern] \{0 \{format 0.6\} 1 \{format 1\} 2 \{format 1\} 3 \{format 0.9\} 4 \{format 0.6\} 5 \{format 0.6\} default \{value parent.irregularity.w\}\}]"}}
 addUserKnob {7 h_irr}
 h_irr {{"\[switch \[numvalue parent.JitterPattern] \{0 \{format 0.6\} 1 \{format 0.76\} 2 \{format 0.76\} 3 \{format 0.76\} 4 \{format 0.86\} 5 \{format 0.86\} default \{value parent.irregularity.h\}\}]"}}
 addUserKnob {26 ""}
 addUserKnob {7 w_mag}
 w_mag {{"\[switch \[numvalue parent.JitterPattern] \{0 \{format 0.42\} 1 \{format 0.37\} 2 \{format 0.41\} 3 \{format 0.49\} 4 \{format 0.48\} 5 \{format 0.38\} default \{value parent.intensity.w\}\}]"}}
 addUserKnob {7 h_mag}
 h_mag {{"\[switch \[numvalue parent.JitterPattern] \{0 \{format 0.46\} 1 \{format 0.6\} 2 \{format 0.6\} 3 \{format 0.5\} 4 \{format 0.42\} 5 \{format 0.17\} default \{value parent.intensity.h\}\}]"}}
}
Noise {
 output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
 cliptype none
 replace true
 size {{parent.Noise_Parameters.w_size}}
 zoffset {{1+parent.Noise_Parameters.seed+parent.Noise_Parameters.w_irr/2}}
 octaves 2
 gamma 1
 translate {{parent.translate} {parent.translate}}
 rotate {{parent.rotate}}
 scale {{parent.scale}}
 skewX {{parent.skew}}
 center {{parent.center} {parent.center}}
 xrotate {{parent.Noise_Parameters.w_irr*45}}
 yrotate {{parent.Noise_Parameters.w_irr*45}}
 name red
 xpos 592
 ypos -812
}
Noise {
 output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
 cliptype none
 replace true
 size {{parent.Noise_Parameters.h_size}}
 zoffset {{1+2*parent.Noise_Parameters.seed+parent.Noise_Parameters.h_irr/2}}
 octaves 2
 gamma 1
 translate {{parent.translate} {parent.translate}}
 rotate {{parent.rotate}}
 scale {{parent.scale}}
 skewX {{parent.skew}}
 center {{parent.center} {parent.center}}
 xrotate {{parent.Noise_Parameters.h_irr*45}}
 yrotate {{parent.Noise_Parameters.h_irr*45}}
 name green
 xpos 592
 ypos -770
}
Multiply {
 channels {rgba.red rgba.green -rgba.blue none}
 value 2
 name Multiply2
 xpos 592
 ypos -728
}
Add {
 channels {rgba.red rgba.green -rgba.blue none}
 value -1
 name Add2
 xpos 592
 ypos -685
}
Multiply {
 channels {rgba.red rgba.green -rgba.blue none}
 value {{parent.Noise_Parameters.w_mag/2 i} {parent.Noise_Parameters.h_mag/2 i} 1 1}
 name Multiply3
 xpos 592
 ypos -643
}
Merge2 {
 inputs 2
 operation plus
 Achannels {rgba.red rgba.green rgba.blue -rgba.alpha}
 Bchannels {rgba.red rgba.green rgba.blue -rgba.alpha}
 output {rgba.red rgba.green rgba.blue -rgba.alpha}
 name Plus
 xpos 366
 ypos -636
}
Clamp {
 maximum_enable false
 name Clamp1
 xpos 366
 ypos -608
}
Add {
 channels {rgba.red rgba.green -rgba.blue none}
 value 0.5
 name Add3
 xpos 366
 ypos -566
}
Multiply {
 channels rgb
 value 0.5
 name Multiply4
 xpos 366
 ypos -524
}
CopyBBox {
 inputs 2
 name CopyBBox1
 xpos 366
 ypos -399
 disable {{!parent.BBOX i}}
}
push $Nf993ec00
Dot {
 name Dot1
 xpos 97
 ypos -294
}
Copy {
 inputs 2
 from0 rgba.red
 to0 backward.u
 from1 rgba.green
 to1 backward.v
 bbox A
 name Copy
 xpos 366
 ypos -313
}
IDistort {
 channels rgb
 uv backward
 uv_offset {{parent.offset}}
 uv_scale 15
 blur_scale 85
 name IDistort
 xpos 366
 ypos -241
}
Remove {
 channels backward
 name Remove
 xpos 366
 ypos -179
}
Crop {
 box {{0 i} {0 i} {width i} {height i}}
 reformat true
 crop false
 name Crop
 xpos 366
 ypos -113
 disable {{!parent.Crop i}}
}
Output {
 name Output1
 xpos 366
 ypos 70
}
Noise {
 inputs 0
 output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
 cliptype none
 replace true
 size {{parent.Noise_Parameters.h_size}}
 zoffset {{2*parent.Noise_Parameters.seed+parent.Noise_Parameters.h_irr/2}}
 octaves 2
 gamma 1
 translate {{parent.translate} {parent.translate}}
 rotate {{parent.rotate}}
 scale {{parent.scale}}
 skewX {{parent.skew}}
 center {{parent.center} {parent.center}}
 xrotate {{parent.Noise_Parameters.w_irr*45}}
 yrotate {{parent.Noise_Parameters.w_irr*45}}
 name green1
 xpos 742
 ypos -772
}
end_group
Blur {
size 1
name Blur29
xpos -514
ypos 673
}
push $Nf993e400
Dissolve {
inputs 2
which 0.1
name Dissolve3
xpos -393
ypos 673
}
Group {
name lightBlur_v04_1
help "Builds a stack of blurs from largest to smallest, halving the kernel each\ntime, then adds them together"
tile_color 0xff7e21ff
xpos -393
ypos 869
addUserKnob {20 LightBlur}
addUserKnob {41 channels T Dissolve_chans.channels}
addUserKnob {14 size l blur t "Blur amount" R 1 100}
size 2000
addUserKnob {7 bias t "Emphasise large or small blurs" R 0 10}
bias 0.8
addUserKnob {7 minBlur l "minimum blur" t "Minimum blur used for output" R 1 100}
minBlur 1
addUserKnob {6 do_normalize l normalize t "Divide by number of accumulated blurs" +STARTLINE}
do_normalize true
addUserKnob {6 clampAlpha l "clamp alpha" t "Clamp the alpha to 1" +STARTLINE}
addUserKnob {41 crop l "crop to format" T masterBlur.crop}
addUserKnob {41 which l mix t "mix between original and lightblurred image" T Dissolve_chans.which}
addUserKnob {20 blurTab l Blur}
addUserKnob {41 filter T masterBlur.filter}
addUserKnob {41 quality l "" -STARTLINE T masterBlur.quality}
addUserKnob {20 Version}
addUserKnob {26 "" l Help: T "Light Blur builds a stack of blurs from largest to smallest,\nhalves the kernel each time, and then adds them together."}
addUserKnob {26 ""}
addUserKnob {32 MoreHelp l "More Help" T "start http://lois4/document/nuke-light-blur-gizmo-help/" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 VersionRelease l "Version Release:" T 4.0}
addUserKnob {26 re l ReleaseNotes T "Removed mask. Crop on by default."}
addUserKnob {26 "" l Authors: T "Mark Nettleton (mnettleton) and Jason Billington (jbillington)"}
addUserKnob {26 le l "Last Edit by:" T "Mark Nettleton (mnettleton)"}
addUserKnob {26 ReleaseDate l "Release Date:" T 10/17/13}
}
Input {
 inputs 0
 name Input
 xpos 304
 ypos -899
}
Dot {
 name INPUT
 label INPUT
 note_font_size 16
 xpos 332
 ypos -723
}
set Nf99d7400 [stack 0]
add_layer {normalize normalize.red normalize.green normalize.blue normalize.alpha}
Shuffle {
 red white
 green white
 blue white
 alpha white
 out normalize
 name Shuffle1
 label "add Normalize"
 xpos 70
 ypos -727
}
set Nf99d7800 [stack 0]
Blur {
 size {{parent.Blur1.size*0.003906/2} {parent.Blur1.size*0.003906/2}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur10
 xpos -107
 ypos 924
}
Multiply {
 value {{Blur10.size>1?1:0}}
 name Multiply27
 label "BlurSize less than 0 = off"
 xpos -107
 ypos 962
}
Multiply {
 value {{Blur10.size>(parent.minBlur)?1:0}}
 name Multiply28
 label "Less than Parent.MinBlur = off"
 xpos -107
 ypos 1019
}
Multiply {
 value {{Plus8.mix>1?Plus8.mix:1}}
 name Multiply29
 label "bias fix"
 xpos -195
 ypos 1019
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.003906} {parent.Blur1.size*0.003906}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur9
 xpos -104
 ypos 696
}
Multiply {
 value {{Blur9.size>1?1:0}}
 name Multiply9
 label "BlurSize less than 0 = off"
 xpos -104
 ypos 734
}
Multiply {
 value {{Blur9.size>(parent.minBlur)?1:0}}
 name Multiply10
 label "Less than Parent.MinBlur = off"
 xpos -104
 ypos 791
}
Multiply {
 value {{Plus7.mix>1?Plus7.mix:1}}
 name Multiply26
 label "bias fix"
 xpos -195
 ypos 791
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.007812} {parent.Blur1.size*0.007812}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur8
 xpos -105
 ypos 464
}
Multiply {
 value {{Blur8.size>1?1:0}}
 name Multiply8
 label "BlurSize less than 0 = off"
 xpos -105
 ypos 509
}
Multiply {
 value {{Blur8.size>(parent.minBlur)?1:0 i}}
 name Multiply11
 label "Less than Parent.MinBlur = off"
 xpos -105
 ypos 566
}
Multiply {
 value {{Plus6.mix>1?Plus6.mix:1 i}}
 name Multiply25
 label "bias fix"
 xpos -201
 ypos 566
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.015625} {parent.Blur1.size*0.015625}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur7
 xpos -105
 ypos 288
}
Multiply {
 value {{Blur7.size>1?1:0 i}}
 name Multiply7
 label "BlurSize less than 0 = off"
 xpos -105
 ypos 326
}
Multiply {
 value {{Blur7.size>(parent.minBlur)?1:0 i}}
 name Multiply12
 label "Less than Parent.MinBlur = off"
 xpos -105
 ypos 383
}
Multiply {
 value {{Plus5.mix>1?Plus5.mix:1 i}}
 name Multiply24
 label "bias fix"
 xpos -206
 ypos 383
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.03125} {parent.Blur1.size*0.03125}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur6
 xpos -105
 ypos 96
}
Multiply {
 value {{Blur6.size>1?1:0 i}}
 name Multiply6
 label "BlurSize less than 0 = off"
 xpos -105
 ypos 134
}
Multiply {
 value {{Blur6.size>(parent.minBlur)?1:0 i}}
 name Multiply13
 label "Less than Parent.MinBlur = off"
 xpos -105
 ypos 191
}
Multiply {
 value {{Plus4.mix>1?Plus4.mix:1 i}}
 name Multiply23
 label "bias fix"
 xpos -200
 ypos 191
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.0625} {parent.Blur1.size*0.0625}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur5
 xpos -105
 ypos -103
}
Multiply {
 value {{Blur5.size>1?1:0 i}}
 name Multiply5
 label "BlurSize less than 0 = off"
 xpos -105
 ypos -65
}
Multiply {
 value {{Blur5.size>(parent.minBlur)?1:0 i}}
 name Multiply14
 label "Less than Parent.MinBlur = off"
 xpos -105
 ypos -8
}
Multiply {
 value {{Plus3.mix>1?Plus3.mix:1 i}}
 name Multiply22
 label "bias fix"
 xpos -203
 ypos -8
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.125} {parent.Blur1.size*0.125}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur4
 xpos -105
 ypos -304
}
Multiply {
 value {{Blur4.size>1?1:0 i}}
 name Multiply4
 label "BlurSize less than 0 = off"
 xpos -105
 ypos -258
}
Multiply {
 value {{Blur4.size>(parent.minBlur)?1:0 i}}
 name Multiply15
 label "Less than Parent.MinBlur = off"
 xpos -105
 ypos -201
}
Multiply {
 value {{Plus2.mix>1?Plus2.mix:1 i}}
 name Multiply21
 label "bias fix"
 xpos -205
 ypos -201
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.25} {parent.Blur1.size*0.25}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur3
 xpos -105
 ypos -493
}
Multiply {
 value {{Blur3.size>1?1:0 i}}
 name Multiply3
 label "BlurSize less than 0 = off"
 xpos -105
 ypos -455
}
Multiply {
 value {{Blur3.size>(parent.minBlur)?1:0 i}}
 name Multiply16
 label "Less than Parent.MinBlur = off"
 xpos -105
 ypos -398
}
Multiply {
 value {{Plus1.mix>1?Plus1.mix:1 i}}
 name Multiply20
 label "bias fix"
 xpos -210
 ypos -398
}
push $Nf99d7800
Blur {
 size {{parent.Blur1.size*0.5} {parent.Blur1.size*0.5}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur2
 xpos -101
 ypos -676
}
Multiply {
 value {{Blur2.size>1?1:0}}
 name Multiply2
 label "BlurSize less than 0 = off"
 xpos -101
 ypos -638
}
Multiply {
 value {{Blur2.size>(parent.minBlur)?1:0 i}}
 name Multiply17
 label "Less than Parent.MinBlur = off"
 xpos -101
 ypos -582
}
Multiply {
 value {{Plus.mix>1?Plus.mix:1 i}}
 name Multiply19
 label "bias fix"
 xpos -202
 ypos -582
}
push $Nf99d7800
Blur {
 size {{parent.size.w} {parent.size.h}}
 filter {{parent.masterBlur.filter}}
 quality {{parent.masterBlur.quality}}
 crop {{parent.masterBlur.crop}}
 name Blur1
 xpos -305
 ypos -727
}
set Nf9aeec00 [stack 0]
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{1/(parent.bias*1)}}
 name Plus
 xpos -305
 ypos -570
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus.mix/parent.bias i}}
 name Plus1
 xpos -305
 ypos -384
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus1.mix/(parent.bias) i}}
 name Plus2
 xpos -305
 ypos -187
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus2.mix/(parent.bias) i}}
 name Plus3
 xpos -305
 ypos 6
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus3.mix/(parent.bias) i}}
 name Plus4
 xpos -305
 ypos 205
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus4.mix/(parent.bias) i}}
 name Plus5
 xpos -305
 ypos 397
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus5.mix/(parent.bias) i}}
 name Plus6
 xpos -305
 ypos 580
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus6.mix/(parent.bias)}}
 name Plus7
 xpos -305
 ypos 803
}
Merge2 {
 inputs 2
 operation plus
 also_merge normalize
 mix {{Plus6.mix/(parent.bias)}}
 name Plus8
 xpos -305
 ypos 1031
}
set Nf9b2f000 [stack 0]
push $Nf9b2f000
Merge2 {
 inputs 2
 operation divide
 Bchannels normalize
 name Merge1
 label Normalize
 xpos -305
 ypos 1208
 disable {{!parent.do_normalize}}
}
Remove {
 channels normalize
 name Remove1
 xpos -305
 ypos 1269
}
Clamp {
 channels alpha
 name Clamp1
 xpos -305
 ypos 1337
 disable {{parent.clampAlpha-1 i x25 1}}
}
push $Nf99d7400
Dot {
 name Dot1
 xpos 324
 ypos 1395
}
Dissolve {
 inputs 2
 channels rgb
 which 0.02
 maskChannelMask none
 name Dissolve_chans
 label channels_todo
 xpos -305
 ypos 1391
}
Output {
 name Output
 xpos -305
 ypos 1511
}
push $Nf9aeec00
Multiply {
 value {{Blur1.size>1?1:0}}
 name Multiply1
 xpos -415
 ypos -727
}
Multiply {
 value {{Blur1.size>(parent.minBlur)?1:0}}
 name Multiply18
 label "Less than Parent.MinBlur = off"
 xpos -415
 ypos -670
}
Blur {
 inputs 0
 name masterBlur
 tile_color 0xff0000ff
 xpos -102
 ypos -832
}
end_group
Group {
inputs 2
name Group8
label "var defocus"
xpos -393
ypos 1125
mapsize {0.15 0.15}
addUserKnob {20 varDefocus}
addUserKnob {16 defocusamount l "Defocus Amount"}
defocusamount 1
addUserKnob {14 defocusScale l "Defocus Scale" R 0 100}
defocusScale 1
addUserKnob {4 aspectratio l "Aspect Format" M {Anamorphic Spherical}}
aspectratio Spherical
addUserKnob {6 cropformat l "Crop To Format" +STARTLINE}
cropformat true
addUserKnob {20 Version}
addUserKnob {26 "" l Help: T "This node defocuses an image based on a matte, and the defocus amount\nadjusts according to the matte value."}
addUserKnob {26 ""}
addUserKnob {32 MoreHelp l "More Help" T "start https://confluence.lucasfilm.com/x/EMyh" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 release l "Version Release:" T 1.2}
addUserKnob {26 notes l "Release Notes:" T "Fixed anamorphic issue. Blur not being double in Y"}
addUserKnob {26 "" l Authors: T "Jason Billington (jbillington)"}
addUserKnob {26 "" l "Last Edit By:" T "Jason Billington (jbillington)"}
addUserKnob {26 Date l "Release Date:" T 08/02/2011}
}
BackdropNode {
 inputs 0
 name BackdropNode1
 label "if step = 5 blur= root*20%"
 xpos -963
 ypos -548
 bdwidth 240
 bdheight 214
}
BackdropNode {
 inputs 0
 name BackdropNode2
 label "if step = 5 blur= root*40%"
 xpos -895
 ypos -230
 bdwidth 240
 bdheight 214
}
BackdropNode {
 inputs 0
 name BackdropNode3
 label "if step = 5 blur= root*60%"
 xpos -842
 ypos 118
 bdwidth 240
 bdheight 214
}
BackdropNode {
 inputs 0
 name BackdropNode4
 label "if step = 5 blur= root*80%"
 xpos -785
 ypos 438
 bdwidth 240
 bdheight 214
}
BackdropNode {
 inputs 0
 name BackdropNode5
 label "if step = 5 blur= root*100%"
 xpos -768
 ypos 760
 bdwidth 240
 bdheight 214
}
BackdropNode {
 inputs 0
 name DepthSlice1
 label "lo:0.0, hi:0.2 gradient\ncentre: 0.1"
 xpos -473
 ypos -661
 bdwidth 134
 bdheight 154
}
BackdropNode {
 inputs 0
 name DepthSlice10
 label "lo: 1, hi: 1.2\nCentre: 1.1"
 xpos -470
 ypos 808
 bdwidth 140
 bdheight 166
}
BackdropNode {
 inputs 0
 name DepthSlice2
 label "lo: 0.2, hi: 0.4\nCentre: 0.3"
 xpos -472
 ypos -503
 bdwidth 137
 bdheight 159
}
BackdropNode {
 inputs 0
 name DepthSlice3
 label "lo: 0.2, hi: 0.4 + Gradient\nCentre: 0.3"
 xpos -474
 ypos -337
 bdwidth 142
 bdheight 160
}
BackdropNode {
 inputs 0
 name DepthSlice4
 label "lo: 0.4, hi: 0.6\nCentre: 0.5"
 xpos -472
 ypos -170
 bdwidth 138
 bdheight 156
}
BackdropNode {
 inputs 0
 name DepthSlice5
 label "lo: 0.4, hi: 0.6 + Gradient\nCentre: 0.5"
 xpos -471
 ypos -8
 bdwidth 138
 bdheight 152
}
BackdropNode {
 inputs 0
 name DepthSlice6
 label "lo: 0.6, hi: 0.8\nCentre: 0.7"
 xpos -469
 ypos 152
 bdwidth 134
 bdheight 158
}
BackdropNode {
 inputs 0
 name DepthSlice7
 label "lo: 0.6, hi: 0.8 + Gradient\nCentre: 0.7"
 xpos -471
 ypos 315
 bdwidth 138
 bdheight 154
}
BackdropNode {
 inputs 0
 name DepthSlice8
 label "lo: 0.8, hi: 1.0\nCentre: 0.9"
 xpos -471
 ypos 476
 bdwidth 140
 bdheight 162
}
BackdropNode {
 inputs 0
 name DepthSlice9
 label "lo: 0.8, hi: 1.0 + Gradient\nCentre: 0.9"
 xpos -471
 ypos 648
 bdwidth 135
 bdheight 154
}
Input {
 inputs 0
 name Matte
 xpos -284
 ypos -794
 number 1
}
Dot {
 name Dot3
 xpos -246
 ypos -751
}
Shuffle {
 red black
 green black
 blue black
 alpha black
 black alpha
 out2 depth
 name Shuffle3
 xpos -280
 ypos -686
}
set Nf9bb7c00 [stack 0]
ZSlice {
 Zchan depth.Z
 center 1.1
 dof 0.2
 name ZSlice14
 xpos -449
 ypos 857
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle18
 xpos -449
 ypos 900
}
Grade {
 channels rgba
 blackpoint 0.9
 white_clamp true
 name Grade11
 xpos -449
 ypos 929
}
Input {
 inputs 0
 name Image
 xpos -627
 ypos -791
}
Dot {
 name Dot2
 xpos -593
 ypos -743
}
set Nf9bd3000 [stack 0]
Defocus {
 defocus {{parent.defocusamount i}}
 ratio {{(parent.aspectratio+1)/2 i}}
 scale {{parent.defocusScale i}}
 name DefocusMaster
 xpos -627
 ypos 849
}
set Nf9bd3400 [stack 0]
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 center 0.9
 dof 0.2
 name ZSlice13
 xpos -450
 ypos 700
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle17
 xpos -450
 ypos 743
}
Grade {
 channels rgba
 blackpoint 0.8
 white_clamp true
 name Grade10
 xpos -450
 ypos 772
}
push $Nf9bd3400
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 center 0.9
 dof 0.2
 name ZSlice12
 xpos -447
 ypos 526
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle16
 xpos -447
 ypos 569
}
Grade {
 channels rgba
 blackpoint 0.79
 whitepoint 0.8
 white_clamp true
 name Grade9
 xpos -447
 ypos 598
}
push $Nf9bd3000
Defocus {
 defocus {{parent.defocusamount*.8 i}}
 ratio {{(parent.aspectratio+1)/2 i}}
 scale {{parent.defocusScale i}}
 name Defocus
 xpos -648
 ypos 499
}
set Nf9c07000 [stack 0]
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 center 0.7
 dof 0.2
 name ZSlice11
 xpos -440
 ypos 365
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle15
 xpos -440
 ypos 408
}
Grade {
 channels rgba
 blackpoint 0.6
 whitepoint 0.8
 white_clamp true
 name Grade8
 xpos -440
 ypos 437
}
push $Nf9c07000
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 center 0.7
 dof 0.2
 name ZSlice10
 xpos -447
 ypos 199
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle12
 xpos -447
 ypos 242
}
Grade {
 channels rgba
 blackpoint 0.59
 whitepoint 0.6
 white_clamp true
 name Grade7
 xpos -447
 ypos 271
}
push $Nf9bd3000
Defocus {
 defocus {{parent.defocusamount*.6 i}}
 ratio {{(parent.aspectratio+1)/2 i}}
 scale {{parent.defocusScale i}}
 name Defocus1
 xpos -695
 ypos 192
}
set Nf9c48c00 [stack 0]
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 dof 0.2
 name ZSlice1
 xpos -444
 ypos 42
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle7
 xpos -444
 ypos 85
}
Grade {
 channels rgba
 blackpoint 0.4
 whitepoint 0.6
 white_clamp true
 name Grade2
 xpos -444
 ypos 114
}
push $Nf9c48c00
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 dof 0.2
 name ZSlice2
 xpos -454
 ypos -120
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle9
 xpos -454
 ypos -77
}
Grade {
 channels rgba
 blackpoint 0.39
 whitepoint 0.4
 white_clamp true
 name Grade5
 xpos -454
 ypos -48
}
push $Nf9bd3000
Defocus {
 defocus {{parent.defocusamount*.4 i}}
 ratio {{(parent.aspectratio+1)/2 i}}
 scale {{parent.defocusScale i}}
 name Defocus2
 xpos -759
 ypos -136
}
set Nf9c80800 [stack 0]
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 center 0.3
 dof 0.2
 name ZSlice9
 xpos -450
 ypos -285
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle14
 xpos -450
 ypos -242
}
Grade {
 channels rgba
 blackpoint 0.2
 whitepoint 0.4
 white_clamp true
 name Grade3
 xpos -450
 ypos -213
}
push $Nf9c80800
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 center 0.3
 dof 0.2
 name ZSlice8
 xpos -459
 ypos -452
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle13
 xpos -459
 ypos -409
}
Grade {
 channels rgba
 blackpoint 0.19
 whitepoint 0.2
 white_clamp true
 name Grade6
 xpos -459
 ypos -380
}
push $Nf9bd3000
Defocus {
 defocus {{parent.defocusamount*.2 i}}
 ratio {{(parent.aspectratio+1)/2 i}}
 scale {{parent.defocusScale i}}
 name Defocus3
 xpos -823
 ypos -445
}
set Nf9cba400 [stack 0]
push $Nf9bb7c00
ZSlice {
 Zchan depth.Z
 center 0.1
 dof 0.2
 name ZSlice7
 xpos -461
 ypos -612
}
Shuffle {
 in depth
 green red
 blue red
 alpha red
 name Shuffle11
 xpos -461
 ypos -569
}
Grade {
 channels rgba
 whitepoint 0.2
 white_clamp true
 name Grade4
 xpos -461
 ypos -540
}
push $Nf9cba400
push $Nf9bd3000
Keymix {
 inputs 3
 name Keymix1
 xpos -932
 ypos -445
}
Keymix {
 inputs 3
 name Keymix2
 xpos -867
 ypos -387
}
Keymix {
 inputs 3
 name Keymix3
 xpos -867
 ypos -136
}
Keymix {
 inputs 3
 name Keymix4
 xpos -805
 ypos -55
}
Keymix {
 inputs 3
 name Keymix5
 xpos -805
 ypos 192
}
Keymix {
 inputs 3
 name Keymix6
 xpos -765
 ypos 264
}
Keymix {
 inputs 3
 name Keymix7
 xpos -765
 ypos 499
}
Keymix {
 inputs 3
 name Keymix8
 xpos -736
 ypos 591
}
Keymix {
 inputs 3
 name Keymix9
 xpos -736
 ypos 849
}
Keymix {
 inputs 3
 name Keymix10
 xpos -723
 ypos 922
}
Crop {
 box {0 0 {input.width i} {input.height i}}
 name Crop1
 xpos -723
 ypos 1073
 disable {{!parent.cropformat i}}
}
Dot {
 name Dot4
 xpos -689
 ypos 1143
}
Output {
 name Output1
 xpos -723
 ypos 1301
}
end_group
Group {
name Group9
label "chroma ab"
xpos -390
ypos 1328
addUserKnob {20 User}
addUserKnob {14 rchan l "red scale" R 0 100}
rchan 1.00075
addUserKnob {14 gchan l "green scale" R 0 100}
gchan 1.0005
addUserKnob {14 bchan l "blue scale" R 0 100}
bchan 1
addUserKnob {20 pan_group l "center / pan" n 1}
addUserKnob {12 center}
center {{input0.width/2} {input0.height/2}}
addUserKnob {6 pad_black l "black outside" -STARTLINE}
pad_black true
addUserKnob {12 rchan_pan l "red pan"}
rchan_pan {-0.2 0.1}
addUserKnob {12 gchan_pan l "green pan"}
addUserKnob {12 bchan_pan l "blue pan"}
addUserKnob {26 ""}
addUserKnob {20 endGroup n -1}
addUserKnob {4 outputAlpha l output M {"fake alpha over bg" "fake alpha only" white ""}}
outputAlpha "fake alpha only"
addUserKnob {26 ""}
addUserKnob {7 mix}
mix 1
addUserKnob {20 version l Version}
addUserKnob {26 Help l Help: T "This 'chromaAb' gizmo is supposed to be similar to the chormaAb that is in Shake,\nand applies the effect on whatever is connected to the FG input.\n\nIt is meant to be used as a merge operation, but if you choose to only plug in the \nFG you can. This, however, can cause unwanted edges. Because this is ment to\nbe used as a merge, if you disable this node, it will return whatever is inputed in the BG.\nIf nothing is put into the BG and it is disabled, this will return nothing.\n\n\n"}
addUserKnob {26 ""}
addUserKnob {32 MoreHelp l "More Help" T "start http://lois4.lucasfilm.com/document/chromaab_v01gizmo-nuke/" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 VersionRelease l "Version Release" T 3.0}
addUserKnob {26 ReleaseNotes l "Release Notes" T "fixes proxy bugs"}
addUserKnob {26 Author l Author: T "Can Chang (cchang)"}
addUserKnob {26 LastEditBy l "Last Edit By:" T "Mark Nettleton (mnettleton)"}
addUserKnob {26 ReleaseDate l "Release Date:" T 11/18/11}
}
Input {
 inputs 0
 name bg
 xpos 523
 ypos -735
 number 1
}
Reformat {
 type "to box"
 box_width {{parent.Reformat2.box_width i}}
 box_height {{parent.Reformat2.box_height i}}
 box_fixed true
 box_pixel_aspect {{parent.Reformat2.box_pixel_aspect i}}
 pbb true
 name Reformat3
 xpos 523
 ypos -664
}
Dot {
 name Dot3
 xpos 557
 ypos -468
}
set Nf9d1d400 [stack 0]
Dot {
 name Dot2
 xpos 557
 ypos -180
}
set Nf9d1d800 [stack 0]
Dot {
 name Dot1
 xpos 557
 ypos 204
}
Input {
 inputs 0
 name fg
 xpos 641
 ypos -733
}
Reformat {
 type "to box"
 box_width {{"\[value \[input this 0].format.r] - \[value \[input this 0].format.x]" i}}
 box_height {{"\[value \[input this 0].format.t]  - \[value \[input this 0].format.y] " i}}
 box_fixed true
 box_pixel_aspect {{"\[value \[input this 0].pixel_aspect]" i}}
 pbb true
 name Reformat2
 xpos 641
 ypos -661
}
Dot {
 name Dot7
 xpos 675
 ypos -588
}
set Nf9d3cc00 [stack 0]
Transform {
 translate {{parent.bchan_pan} {parent.bchan_pan}}
 scale {{parent.bchan} {parent.bchan}}
 center {{parent.center.x} {parent.center.y}}
 black_outside {{parent.pad_black}}
 name blue_repo
 xpos 909
 ypos -490
}
set Nf9d3d000 [stack 0]
push $Nf9d3cc00
Transform {
 translate {{parent.gchan_pan} {parent.gchan_pan}}
 scale {{parent.gchan} {parent.gchan}}
 center {{parent.center.x} {parent.center.y}}
 black_outside {{parent.pad_black}}
 name green_repo
 xpos 787
 ypos -492
}
set Nf9d3d400 [stack 0]
push $Nf9d3cc00
Transform {
 translate {{parent.rchan_pan} {parent.rchan_pan}}
 scale {{parent.rchan} {parent.rchan}}
 center {{parent.center.x} {parent.center.y}}
 black_outside {{parent.pad_black}}
 name red_repo
 xpos 641
 ypos -491
}
set Nf9d3d800 [stack 0]
Merge {
 inputs 2
 operation plus
 name Merge1
 xpos 1060
 ypos -323
}
Merge {
 inputs 2
 operation plus
 name Merge2
 xpos 1170
 ypos -323
}
Grade {
 channels alpha
 multiply 0.3333333333
 name Grade1
 label "one third A"
 xpos 1170
 ypos -264
}
set Nf9d68400 [stack 0]
push $Nf9d1d800
push $Nf9d68400
Merge2 {
 inputs 2
 operation under
 name Merge5
 label "fake A over bg"
 xpos 1170
 ypos -190
}
push $Nf9d1d400
push $Nf9d3d000
Merge {
 inputs 2
 swap true
 name blueOver
 xpos 909
 ypos -323
}
push $Nf9d1d400
push $Nf9d3d400
Merge {
 inputs 2
 swap true
 name greenOver
 xpos 787
 ypos -323
}
push $Nf9d1d400
push $Nf9d3d800
Merge {
 inputs 2
 swap true
 name redOver
 xpos 641
 ypos -324
}
Copy {
 inputs 2
 from0 rgba.green
 to0 rgba.green
 name Copy2
 xpos 787
 ypos -258
 disable {{"!\[exists parent.input0]&&!\[exists parent.input1]" i x2116 0}}
}
Copy {
 inputs 2
 from0 rgba.blue
 to0 rgba.blue
 name Copy3
 xpos 909
 ypos -258
 disable {{"!\[exists parent.input0]&&!\[exists parent.input1]" i x2116 0}}
}
Copy {
 inputs 2
 from0 rgba.alpha
 to0 rgba.alpha
 name Copy4
 xpos 1170
 ypos -113
}
CCrosstalk {
 name CCrosstalk1
 xpos 1170
 ypos -10
}
Clamp {
 channels alpha
 name Clamp1
 xpos 1170
 ypos 55
}
set Nf9da6800 [stack 0]
Switch {
 inputs 2
 which {{outputAlpha i}}
 name Switch1
 xpos 1396
 ypos 61
}
push $Nf9da6800
Copy {
 inputs 2
 from0 rgba.alpha
 to0 rgba.alpha
 name Copy1
 xpos 1396
 ypos 102
}
Shuffle {
 alpha white
 name Shuffle1
 xpos 1396
 ypos 144
 disable {{(outputAlpha==2)*-1+1 i}}
}
Dissolve {
 inputs 2
 which {{1-parent.mix}}
 name Dissolve1
 label mix
 xpos 1396
 ypos 188
}
Output {
 name Output1
 xpos 1396
 ypos 277
}
end_group
Group {
name Vignette1
xpos -390
ypos 1456
addUserKnob {20 User l oVignette}
addUserKnob {26 "" l Shape}
addUserKnob {6 preview l "Preview Vignette Shape" t "Output just the vignette shape for preview purposes" -STARTLINE}
addUserKnob {41 area T Crop1.box}
addUserKnob {26 "" l Falloff}
addUserKnob {7 gamma R 0.1 5}
gamma 0.44
addUserKnob {7 inner}
inner 0.034
addUserKnob {7 outer}
outer 1
addUserKnob {26 ""}
addUserKnob {26 "" l Effects}
addUserKnob {6 darkenEnable l Darken t "Enable the Darken function" -STARTLINE}
darkenEnable true
addUserKnob {7 darken l Amount t "Gain the image down by this amount"}
darken 0.32
addUserKnob {26 ""}
addUserKnob {6 blurEnable l Blur t "Enable the Blur function" -STARTLINE}
addUserKnob {7 blur l Amount t "Compound Blur the image by a maximum of this amount" R 0 20}
blur 0.5
addUserKnob {26 ""}
addUserKnob {6 desatEnable l Desaturate t "Enable the Desaturate Function" -STARTLINE}
desatEnable true
addUserKnob {7 desat l Amount t "Desaturate the image by this amount"}
}
Input {
 inputs 0
 name Input1
 xpos 125
 ypos -22
}
Crop {
 box {-254 -282 2370 1286}
 name Crop1
 xpos 125
 ypos 2
 disable true
}
add_layer {oVignette oVignette.matte}
Radial {
 output oVignette
 replace true
 invert true
 area {{center.x-size.w/2*(r2/r1)} {center.y-size.h/2*(r2/r1)} {center.x+size.w/2*(r2/r1)} {center.y+size.h/2*(r2/r1)}}
 name Radial2
 xpos 125
 ypos 43
 addUserKnob {20 User}
 addUserKnob {12 center}
 center {{(parent.area.x+parent.area.r)/2} {(parent.area.y+parent.area.t)/2}}
 addUserKnob {14 size R 0 100}
 size {{abs(parent.area.r-parent.area.x)} {abs(parent.area.t-parent.area.y)}}
 addUserKnob {7 r1}
 r1 {{(size.h/2+size.w/2)/2}}
 addUserKnob {7 r2}
 r2 {{sqrt(pow(size.w/2,2)+pow(size.h/2,2))}}
}
Grade {
 channels oVignette
 blackpoint {{min(parent.inner,parent.outer)}}
 whitepoint {{parent.outer}}
 gamma {{parent.gamma}}
 name Grade2
 xpos 125
 ypos 79
}
Grade {
 white {{1-min(max(parent.darken,0),1)}}
 maskChannelInput oVignette.matte
 name Grade1
 xpos 125
 ypos 127
 disable {{!parent.darkenEnable}}
}
ZBlur {
 channels rgba
 Zchan oVignette.matte
 math linear
 size {{parent.blur}}
 max_size {{parent.blur}}
 name ZBlur1
 xpos 125
 ypos 170
 disable {{!parent.blurEnable}}
}
Saturation {
 saturation {{1-max(min(parent.desat,1),0)}}
 maskChannelInput oVignette.matte
 name Saturation1
 xpos 125
 ypos 199
 disable {{!parent.desatEnable}}
}
Shuffle {
 in oVignette
 name Shuffle1
 xpos 125
 ypos 254
 disable {{!parent.preview}}
}
Remove {
 channels oVignette
 name Remove1
 xpos 125
 ypos 283
}
Output {
 name Output1
 xpos 125
 ypos 326
}
end_group
M_Keyer {
inputs 0 name M_Keyer2
 selected true
 xpos 30873
 ypos 568
 input rgb
 output rgba.alpha
 invert true
 range {0 0.32 1 1}

xpos -1171
ypos 208
selected false
disable false
}
NoOp {
inputs 0
name CameraData
xpos -1296
ypos 104
addUserKnob {20 cameradata l CameraData}
addUserKnob {7 cameraFocusDistance l "Focus distance (inch)" R 0 1000}
cameraFocusDistance {{"\[metadata exr/focus]"}}
addUserKnob {7 FocusDM l "Focus distance (dm)" R 0 1000}
FocusDM {{"cameraFocusDistance * 0.254"}}
addUserKnob {26 ""}
addUserKnob {7 fStop l f/stop R 2 16}
fStop {{"\[metadata exr/aperture]"}}
addUserKnob {26 ""}
addUserKnob {7 focal l "Focal length" R 0 200}
focal {{"\[metadata exr/focalLength]"}}
addUserKnob {26 ""}
addUserKnob {7 ISO R 400 1200}
ISO {{"\[metadata exr/isoSpeed]"}}
addUserKnob {26 ""}
addUserKnob {26 space_newLine l "" +STARTLINE T "Create Camera or Link Camera : "}
addUserKnob {22 lecamera l "Link to selected camera" -STARTLINE T "# Link selected Camera.\nsl = nuke.selectedNode()\nif sl.Class() =='Camera2' or sl.Class() == 'HubCamera2':    \n    sl = nuke.selectedNode() # nuke.selectedNode()\n    sl\['focal_point'].setExpression('CameraData.FocusDM+ExpressionWaveGen_deep_live.expResult') #focal_point\n    sl\['fstop'].setExpression('CameraData.iris') #Fstop\n    sl\['focal'].setExpression('CameraData.focal') #Focal\n    nuke.thisNode()\['selCamera'].setValue(nuke.selectedNode().name())\nif sl.Class() =='NoOp':\n    nuke.message(\"<font color='red'><strong>ERROR</strong></font><br>Please select <font color='red'>Camera</font> node.\")"}
addUserKnob {22 cNCamera l "Shot HubCamera (Default)" -STARTLINE T "# Shot HubCamera\nsel = nuke.selectedNode()\nif sel.Class() =='Camera2' or sel.Class() == 'HubCamera2':\n    sel\['focal'].setExpression('HubCamera1.focal') #Focal\n    sel\['focal_point'].setExpression('HubCamera1.focal_point+ExpressionWaveGen_deep_live.expResult')\n    sel\['fstop'].setExpression('HubCamera1.fstop') #Fstop\n    nuke.thisNode()\['selCamera'].setValue('')\nif sel.Class() =='NoOp':\n    nuke.message(\"<font color='red'><strong>ERROR</strong></font><br>Please select <font color='red'>Camera</font> node.\")"}
addUserKnob {26 selCamera l "linked camera name :" T HubCamera4}
addUserKnob {20 Documentation}
addUserKnob {26 whatis l "" +STARTLINE T "Based on Metadate tool from Nuke.\nAnupam-b MPC 2021"}
addUserKnob {26 ""}
addUserKnob {26 message l "" +STARTLINE T " Please read this Documentation =>  "}
addUserKnob {22 documentation l Document t "Documentation for CameraData tool" -STARTLINE T "import webbrowser\ndef openWebpage():\n\twebbrowser.open(\"https://confluencecp.mpc.local/display/MPCSHO/STH2+%7C+Camera_from_plate+metadata\")\n\nopenWebpage()"}
addUserKnob {26 ""}
addUserKnob {26 author l "" +STARTLINE T "\n\n\n\n\n\nAnupam Biswas\nmon jul 5, 2021"}
}
Group {
inputs 0
name Zen_Defocus1
help "<b>OpticalZDefocus</b> is a physically accurate ZDefocus, which controls circle of confusion (coc) size based on lens geometry using the depth of field equation. \n\nSet your lens and film-back characteristics, your focus distance, and adjust the size of your bokeh with the aperture size, just like a real lens."
knobChanged "\nn = nuke.thisNode()\nk = nuke.thisKnob()\n\nif k.name() == \"showPanel\":\n    n.begin()\n    fp = nuke.toNode(\"ZDefocus2\")\n    fp\[\"focal_point\"].setEnabled(False)\n    fp\[\"center\"].setEnabled(False)\n    if n\[\"use_cameraInput\"].value() == True:\n        camInput = nuke.toNode(\"InputCamera\")        \n    if n\[\"depth_channel\"].value() == \"deep\": \n        deep = nuke.toNode(\"Deep\")      \n    n.end()\n\n    if n\[\"zbloom\"].value() == True:       \n        n\[\"bloom_threshold\"].setEnabled(True) \n        n\[\"bloom_gain\"].setEnabled(True)       \n    elif n\[\"zbloom\"].value() == False:\n        n\[\"bloom_threshold\"].setEnabled(False) \n        n\[\"bloom_gain\"].setEnabled(False)      \n\nif k.name() == \"defocustype\" and k.value() == \"ZDefocus\": \n    n.begin()\n    temp1 = nuke.toNode(\"pgBokeh1\")\n    temp1\[\"disable\"].setValue(True)\n    n.end()\n\n    if n\[\"depth_channel\"].value() == \"deep\": \n        n\[\"depth_channel\"].setValue(\"depth2.red\")      \n        inp2 = n.input(2)\n        inp3 = n.input(3)\n        n.begin()\n        fp = nuke.toNode(\"ZDefocus2\")\n        fp\[\"focal_point\"].setEnabled(False)\n        fp\[\"center\"].setEnabled(False)\n        temp = nuke.toNode(\"DeepReformat1\")\n        temp\[\"disable\"].setValue(True)\n        v = n\[\"use_cameraInput\"].value()\n        dot = nuke.toNode(\"deepDot\")\n        if v == True and n\[\"flag\"].value() == False:        \n            n.setInput(3,None)\n            nuke.delete(deep)\n            n.setInput(2,None)\n            n\[\"use_cameraInput\"].setValue(False)  \n            nuke.delete(nuke.toNode(\"InputCamera\")) \n            n\[\"use_cameraInput\"].setValue(True)   \n            camInput  = nuke.nodes.Input(name = \"InputCamera\")\n            n.setInput(2,inp2)  \n            n\[\"flag\"].setValue(False)\n       \n        elif v== True and n\[\"flag\"].value() == True:\n            n.setInput(2,None)\n            nuke.delete(deep)\n            n.setInput(3,None)        \n            nuke.delete(nuke.toNode(\"InputCamera\")) \n            n\[\"use_cameraInput\"].setValue(True)   \n            n\[\"f\"].setExpression(\"\[topnode input2].focal\")\n            n\[\"N\"].setExpression(\"\[topnode input2].fstop\")\n            n\[\"haperture\"].setExpression(\"\[topnode input2].haperture\")\n            n\[\"vaperture\"].setExpression(\"\[topnode input2].vaperture\")\n            n\[\"s\"].setExpression(\"\[topnode input2].focal_point\")\n            camInput  = nuke.nodes.Input(name = \"InputCamera\")\n            n.setInput(2,inp3)\n            n\[\"flag\"].setValue(False)\n        elif v == False:\n            n.setInput(2,None)\n            nuke.delete(deep)\n            n\[\"flag\"].setValue(False)\n        n.end()\n\n    n\[\"view\"].setValues(\[\"Final Result\",\"Depth\",\"Defocus map\"])\n    n\[\"depth_channel\"].setValues(\[\"depth2.red\",\"depth.Z\"])\n\n    try:\n        n\[\"Filter\"].setFlag(nuke.INVISIBLE)\n        n\[\"defocus_filter\"].clearFlag(nuke.INVISIBLE)\n        n\[\"Zen_Defocus\"].setFlag(nuke.INVISIBLE)\n        n\[\"Zen_Defocus\"].clearFlag(nuke.INVISIBLE)    \n        raise AttributeError ()\n    except Exception:\n        pass\n  \n\n    n\[\"corrective_slice_group\"].setValue(False) \n    n\[\"corrective_slice_group\"].setVisible(False)\n    link_knob = n.knobs()\[\"kernelType\"]\n    link_knob.setVisible(False)\n    link_knob1 = n.knobs()\[\"aspectRatioMult\"]\n    link_knob1.setVisible(False)\n    link_knob2 = n.knobs()\[\"sprite_frame\"]\n    link_knob2.setVisible(False)\n    link_knob3 = n.knobs()\[\"amount\"]\n    link_knob3.setVisible(False)\n    link_knob4 = n.knobs()\[\"gamma\"]\n    link_knob4.setVisible(False)\n    link_knob5 = n.knobs()\[\"gain\"]\n    link_knob5.setVisible(False)\n    link_knob6 = n.knobs()\[\"abb_size\"]\n    link_knob6.setVisible(False)\n    link_knob7 = n.knobs()\[\"abberation\"]\n    link_knob7.setVisible(False)\n    link_knob8 = n.knobs()\[\"view_sprite\"]\n    link_knob8.setVisible(False)\n    link_knob9 = n.knobs()\[\"kSoftness\"]\n    link_knob9.setVisible(False)\n    link_knob10 = n.knobs()\[\"kNumSides\"]\n    link_knob10.setVisible(False)  \n    link_knob11 = n.knobs()\[\"bloom\"]\n    link_knob11.setVisible(False)  \n    link_knob12 = n.knobs()\[\"sharpen_switch\"]\n    link_knob12.setVisible(False)  \n    link_knob13 = n.knobs()\[\"div_adj\"]\n    link_knob13.setVisible(False)  \n    link_knob14= n.knobs()\[\"overscan\"]\n    link_knob14.setVisible(False)  \n    link_knob15= n.knobs()\[\"correctiveSlices\"]\n    link_knob15.setVisible(False)  \n    link_knob16= n.knobs()\[\"slice_override\"]\n    link_knob16.setVisible(False)  \n    link_knob17= n.knobs()\[\"slice_near\"]\n    link_knob17.setVisible(False)  \n    link_knob18= n.knobs()\[\"slice_far\"]\n    link_knob18.setVisible(False)  \n\n\n    link_knob = n.knobs()\[\"zaspectRatioMult\"]\n    link_knob.setVisible(True)\n    link_knob1 = n.knobs()\[\"zsprite_frame\"]\n    link_knob1.setVisible(True) \n    link_knob2= n.knobs()\[\"zamount\"]\n    link_knob2.setVisible(True) \n    link_knob3 = n.knobs()\[\"zabb_size\"]\n    link_knob3.setVisible(True) \n    link_knob4= n.knobs()\[\"zabberation\"]\n    link_knob4.setVisible(True) \n    link_knob5 = n.knobs()\[\"zgamma\"]\n    link_knob5.setVisible(True) \n    link_knob6 = n.knobs()\[\"zgain\"]\n    link_knob6.setVisible(True) \n    link_knob7 = n.knobs()\[\"zview_sprite\"]\n    link_knob7.setVisible(True) \n    link_knob8 = n.knobs()\[\"zshape\"]\n    link_knob8.setVisible(True) \n    link_knob9 = n.knobs()\[\"zblades\"]\n    link_knob9.setVisible(True) \n    link_knob10 = n.knobs()\[\"zroundness\"]\n    link_knob10.setVisible(True) \n    link_knob11 = n.knobs()\[\"zrotation\"]\n    link_knob11.setVisible(True) \n    link_knob12 = n.knobs()\[\"zinner_size\"]\n    link_knob12.setVisible(True) \n    link_knob13 = n.knobs()\[\"zinner_feather\"]\n    link_knob13.setVisible(True) \n    link_knob14 = n.knobs()\[\"zinner_brightness\"]\n    link_knob14.setVisible(True) \n    link_knob15 = n.knobs()\[\"Z_kernelType\"]\n    link_knob15.setVisible(True) \n    link_knob16 = n.knobs()\[\"zbloom\"]\n    link_knob16.setVisible(True) \n    link_knob17 = n.knobs()\[\"zbloom_gamma\"]\n    link_knob17.setVisible(True) \n    link_knob18 = n.knobs()\[\"bloom_threshold\"]\n    link_knob18.setVisible(True) \n    link_knob19= n.knobs()\[\"bloom_gain\"]\n    link_knob19.setVisible(True) \n\n    if n.input(1) == None:\n        n\[\"Z_kernelType\"].setValue(\"Internal\")\n        link_knob = n.knobs()\[\"zaspectRatioMult\"]\n        link_knob.setVisible(True)\n        link_knob1 = n.knobs()\[\"zsprite_frame\"]\n        link_knob1.setVisible(True) \n        link_knob2= n.knobs()\[\"zamount\"]\n        link_knob2.setVisible(True) \n        link_knob3 = n.knobs()\[\"zabb_size\"]\n        link_knob3.setVisible(True) \n        link_knob4= n.knobs()\[\"zabberation\"]\n        link_knob4.setVisible(True) \n        link_knob5 = n.knobs()\[\"zgamma\"]\n        link_knob5.setVisible(True) \n        link_knob6 = n.knobs()\[\"zgain\"]\n        link_knob6.setVisible(True)    \n        link_knob7 = n.knobs()\[\"zview_sprite\"]\n        link_knob7.setVisible(True) \n        link_knob8 = n.knobs()\[\"zshape\"]\n        link_knob8.setVisible(False) \n        link_knob9 = n.knobs()\[\"zblades\"]\n        link_knob9.setVisible(False) \n        link_knob10 = n.knobs()\[\"zroundness\"]\n        link_knob10.setVisible(False) \n        link_knob11 = n.knobs()\[\"zrotation\"]\n        link_knob11.setVisible(False) \n        link_knob12 = n.knobs()\[\"zinner_size\"]\n        link_knob12.setVisible(False) \n        link_knob13 = n.knobs()\[\"zinner_feather\"]\n        link_knob13.setVisible(False) \n        link_knob14 = n.knobs()\[\"zinner_brightness\"]\n        link_knob14.setVisible(False) \n        n\[\"zaspectRatioMult\"].setEnabled(True)\n        n\[\"zsprite_frame\"].setEnabled(True)\n        n\[\"zamount\"].setEnabled(True)\n        n\[\"zabb_size\"].setEnabled(True)\n        n\[\"zabberation\"].setEnabled(True)\n        n\[\"zgamma\"].setEnabled(True)\n        n\[\"zgain\"].setEnabled(True)\n        n\[\"zview_sprite\"].setEnabled(True)\n    elif n.input(1) != None:\n        n\[\"Z_kernelType\"].setValue(\"Input\")\n        link_knob = n.knobs()\[\"zaspectRatioMult\"]\n        link_knob.setVisible(False)\n        link_knob1 = n.knobs()\[\"zsprite_frame\"]\n        link_knob1.setVisible(False) \n        link_knob2= n.knobs()\[\"zamount\"]\n        link_knob2.setVisible(False) \n        link_knob3 = n.knobs()\[\"zabb_size\"]\n        link_knob3.setVisible(False) \n        link_knob4= n.knobs()\[\"zabberation\"]\n        link_knob4.setVisible(False) \n        link_knob5 = n.knobs()\[\"zgamma\"]\n        link_knob5.setVisible(False) \n        link_knob6 = n.knobs()\[\"zgain\"]\n        link_knob6.setVisible(False) \n        link_knob7 = n.knobs()\[\"zview_sprite\"]\n        link_knob7.setVisible(False) \n        link_knob8 = n.knobs()\[\"zshape\"]\n        link_knob8.setVisible(False) \n        link_knob9 = n.knobs()\[\"zblades\"]\n        link_knob9.setVisible(False) \n        link_knob10 = n.knobs()\[\"zroundness\"]\n        link_knob10.setVisible(False) \n        link_knob11 = n.knobs()\[\"zrotation\"]\n        link_knob11.setVisible(False) \n        link_knob12 = n.knobs()\[\"zinner_size\"]\n        link_knob12.setVisible(False) \n        link_knob13 = n.knobs()\[\"zinner_feather\"]\n        link_knob13.setVisible(False) \n        link_knob14 = n.knobs()\[\"zinner_brightness\"]\n        link_knob14.setVisible(False) \n\n\n    n\[\"deep_warning\"].setVisible(False)\n \n    if n\[\"zbloom\"].value() == True:       \n        n\[\"bloom_threshold\"].setEnabled(True) \n        n\[\"bloom_gain\"].setEnabled(True)       \n    elif n\[\"zbloom\"].value() == False:\n        n\[\"bloom_threshold\"].setEnabled(False) \n        n\[\"bloom_gain\"].setEnabled(False)   \n\n\n   \nif k.name() == \"defocustype\" and k.value() == \"pgBokeh\":\n    n.begin()\n    fp = nuke.toNode(\"ZDefocus2\")\n    fp\[\"focal_point\"].setEnabled(False)\n    fp\[\"center\"].setEnabled(False)\n    temp1 = nuke.toNode(\"pgBokeh1\")\n    temp1\[\"disable\"].setValue(False)\n    n.end()\n\n    n\[\"depth_channel\"].setValues(\[\"depth2.red\",\"depth.Z\",\"deep\"]) \n    n\[\"view\"].setValues(\[\"Final Result\",\"Depth\",\"Defocus map\"])\n\n    try:\n        n\[\"defocus_filter\"].setFlag(nuke.INVISIBLE)\n        n\[\"Filter\"].clearFlag(nuke.INVISIBLE)\n        n\[\"Zen_Defocus\"].setFlag(nuke.INVISIBLE)\n        n\[\"Zen_Defocus\"].clearFlag(nuke.INVISIBLE)   \n        raise AttributeError ()\n    except Exception:\n        pass\n\n    n\[\"corrective_slice_group\"].setVisible(True)\n    link_knob = n.knobs()\[\"kernelType\"]\n    link_knob.setVisible(True)\n    link_knob1 = n.knobs()\[\"aspectRatioMult\"]\n    link_knob1.setVisible(True)\n    link_knob2 = n.knobs()\[\"sprite_frame\"]\n    link_knob2.setVisible(True)\n    link_knob3 = n.knobs()\[\"amount\"]\n    link_knob3.setVisible(True)\n    link_knob4 = n.knobs()\[\"gamma\"]\n    link_knob4.setVisible(True)\n    link_knob5 = n.knobs()\[\"gain\"]\n    link_knob5.setVisible(True)\n    link_knob6 = n.knobs()\[\"abb_size\"]\n    link_knob6.setVisible(True)\n    link_knob7 = n.knobs()\[\"abberation\"]\n    link_knob7.setVisible(True)\n    link_knob8 = n.knobs()\[\"view_sprite\"]\n    link_knob8.setVisible(True)\n    link_knob9 = n.knobs()\[\"kSoftness\"]\n    link_knob9.setVisible(True)\n    link_knob10 = n.knobs()\[\"kNumSides\"]\n    link_knob10.setVisible(True)  \n    link_knob11 = n.knobs()\[\"bloom\"]\n    link_knob11.setVisible(True)  \n    link_knob12 = n.knobs()\[\"sharpen_switch\"]\n    link_knob12.setVisible(True)  \n    link_knob13 = n.knobs()\[\"div_adj\"]\n    link_knob13.setVisible(True)  \n    link_knob14= n.knobs()\[\"overscan\"]\n    link_knob14.setVisible(True)  \n    link_knob15= n.knobs()\[\"correctiveSlices\"]\n    link_knob15.setVisible(True)  \n    link_knob16= n.knobs()\[\"slice_override\"]\n    link_knob16.setVisible(True)  \n    link_knob17= n.knobs()\[\"slice_near\"]\n    link_knob17.setVisible(True)  \n    link_knob18= n.knobs()\[\"slice_far\"]\n    link_knob18.setVisible(True)  \n\n\n    link_knob = n.knobs()\[\"zaspectRatioMult\"]\n    link_knob.setVisible(False)\n    link_knob1 = n.knobs()\[\"zsprite_frame\"]\n    link_knob1.setVisible(False) \n    link_knob2= n.knobs()\[\"zamount\"]\n    link_knob2.setVisible(False) \n    link_knob3 = n.knobs()\[\"zabb_size\"]\n    link_knob3.setVisible(False) \n    link_knob4= n.knobs()\[\"zabberation\"]\n    link_knob4.setVisible(False) \n    link_knob5 = n.knobs()\[\"zgamma\"]\n    link_knob5.setVisible(False) \n    link_knob6 = n.knobs()\[\"zgain\"]\n    link_knob6.setVisible(False) \n    link_knob7 = n.knobs()\[\"zview_sprite\"]\n    link_knob7.setVisible(False) \n    link_knob8 = n.knobs()\[\"zshape\"]\n    link_knob8.setVisible(False) \n    link_knob9 = n.knobs()\[\"zblades\"]\n    link_knob9.setVisible(False) \n    link_knob10 = n.knobs()\[\"zroundness\"]\n    link_knob10.setVisible(False) \n    link_knob11 = n.knobs()\[\"zrotation\"]\n    link_knob11.setVisible(False) \n    link_knob12 = n.knobs()\[\"zinner_size\"]\n    link_knob12.setVisible(False) \n    link_knob13 = n.knobs()\[\"zinner_feather\"]\n    link_knob13.setVisible(False) \n    link_knob14 = n.knobs()\[\"zinner_brightness\"]\n    link_knob14.setVisible(False) \n    link_knob15 = n.knobs()\[\"Z_kernelType\"]\n    link_knob15.setVisible(False) \n    link_knob16 = n.knobs()\[\"zbloom\"]\n    link_knob16.setVisible(False) \n    link_knob17 = n.knobs()\[\"zbloom_gamma\"]\n    link_knob17.setVisible(False) \n    link_knob17 = n.knobs()\[\"bloom_threshold\"]\n    link_knob17.setVisible(False) \n    link_knob17 = n.knobs()\[\"bloom_gain\"]\n    link_knob17.setVisible(False) \n\n    if n.input(1) == None:    \n        n\[\"kernelType\"].setValue(\"Internal\")\n        n\[\"aspectRatioMult\"].setEnabled(True)\n        n\[\"sprite_frame\"].setEnabled(True)\n        n\[\"amount\"].setEnabled(True)\n        n\[\"abb_size\"].setEnabled(True)\n        n\[\"abberation\"].setEnabled(True)\n        n\[\"gamma\"].setEnabled(True)\n        n\[\"gain\"].setEnabled(True)\n        n\[\"view_sprite\"].setEnabled(True)\n        n\[\"kSoftness\"].setEnabled(False)\n        n\[\"kNumSides\"].setEnabled(False)\n    elif n.input(1) != None:\n        n\[\"kernelType\"].setValue(\"Input\")\n        n\[\"aspectRatioMult\"].setEnabled(False)\n        n\[\"sprite_frame\"].setEnabled(False)\n        n\[\"amount\"].setEnabled(False)\n        n\[\"abb_size\"].setEnabled(False)\n        n\[\"abberation\"].setEnabled(False)\n        n\[\"gamma\"].setEnabled(False)\n        n\[\"gain\"].setEnabled(False)\n        n\[\"view_sprite\"].setEnabled(False)\n        n\[\"kSoftness\"].setEnabled(False)\n        n\[\"kNumSides\"].setEnabled(False)\n\n\nif k.name() == \"Z_kernelType\" and k.value() == \"Internal\":\n    link_knob = n.knobs()\[\"zaspectRatioMult\"]\n    link_knob.setVisible(True)\n    link_knob1 = n.knobs()\[\"zsprite_frame\"]\n    link_knob1.setVisible(True) \n    link_knob2 = n.knobs()\[\"zamount\"]\n    link_knob2.setVisible(True) \n    link_knob3 = n.knobs()\[\"zabb_size\"]\n    link_knob3.setVisible(True) \n    link_knob4= n.knobs()\[\"zabberation\"]\n    link_knob4.setVisible(True) \n    link_knob5 = n.knobs()\[\"zgamma\"]\n    link_knob5.setVisible(True) \n    link_knob6 = n.knobs()\[\"zgain\"]\n    link_knob6.setVisible(True) \n    link_knob7 = n.knobs()\[\"zview_sprite\"]\n    link_knob7.setVisible(True)\n    link_knob8 = n.knobs()\[\"zshape\"]\n    link_knob8.setVisible(False) \n    link_knob9 = n.knobs()\[\"zblades\"]\n    link_knob9.setVisible(False) \n    link_knob10 = n.knobs()\[\"zroundness\"]\n    link_knob10.setVisible(False) \n    link_knob11 = n.knobs()\[\"zrotation\"]\n    link_knob11.setVisible(False) \n    link_knob12 = n.knobs()\[\"zinner_size\"]\n    link_knob12.setVisible(False) \n    link_knob13 = n.knobs()\[\"zinner_feather\"]\n    link_knob13.setVisible(False) \n    link_knob14 = n.knobs()\[\"zinner_brightness\"]\n    link_knob14.setVisible(False) \n    n\[\"zaspectRatioMult\"].setEnabled(True)\n    n\[\"zsprite_frame\"].setEnabled(True)\n    n\[\"zamount\"].setEnabled(True)\n    n\[\"zabb_size\"].setEnabled(True)\n    n\[\"zabberation\"].setEnabled(True)\n    n\[\"zgamma\"].setEnabled(True)\n    n\[\"zgain\"].setEnabled(True)\n    n\[\"zview_sprite\"].setEnabled(True)\nelif k.name() == \"Z_kernelType\" and k.value() == \"Input\":\n    link_knob = n.knobs()\[\"zaspectRatioMult\"]\n    link_knob.setVisible(False)\n    link_knob1 = n.knobs()\[\"zsprite_frame\"]\n    link_knob1.setVisible(False) \n    link_knob2= n.knobs()\[\"zamount\"]\n    link_knob2.setVisible(False) \n    link_knob3 = n.knobs()\[\"zabb_size\"]\n    link_knob3.setVisible(False) \n    link_knob4= n.knobs()\[\"zabberation\"]\n    link_knob4.setVisible(False) \n    link_knob5 = n.knobs()\[\"zgamma\"]\n    link_knob5.setVisible(False) \n    link_knob6 = n.knobs()\[\"zgain\"]\n    link_knob6.setVisible(False) \n    link_knob7 = n.knobs()\[\"zview_sprite\"]\n    link_knob7.setVisible(False) \n    link_knob8 = n.knobs()\[\"zshape\"]\n    link_knob8.setVisible(False) \n    link_knob9 = n.knobs()\[\"zblades\"]\n    link_knob9.setVisible(False) \n    link_knob10 = n.knobs()\[\"zroundness\"]\n    link_knob10.setVisible(False) \n    link_knob11 = n.knobs()\[\"zrotation\"]\n    link_knob11.setVisible(False) \n    link_knob12 = n.knobs()\[\"zinner_size\"]\n    link_knob12.setVisible(False) \n    link_knob13 = n.knobs()\[\"zinner_feather\"]\n    link_knob13.setVisible(False) \n    link_knob14 = n.knobs()\[\"zinner_brightness\"]\n    link_knob14.setVisible(False) \n    n\[\"zview_sprite\"].setValue(False)\nelif k.name() == \"Z_kernelType\" and k.value() == \"Circular\":\n    link_knob = n.knobs()\[\"zaspectRatioMult\"]\n    link_knob.setVisible(True)\n    link_knob1 = n.knobs()\[\"zsprite_frame\"]\n    link_knob1.setVisible(False) \n    link_knob2= n.knobs()\[\"zamount\"]\n    link_knob2.setVisible(False) \n    link_knob3 = n.knobs()\[\"zabb_size\"]\n    link_knob3.setVisible(False) \n    link_knob4= n.knobs()\[\"zabberation\"]\n    link_knob4.setVisible(False) \n    link_knob5 = n.knobs()\[\"zgamma\"]\n    link_knob5.setVisible(False) \n    link_knob6 = n.knobs()\[\"zgain\"]\n    link_knob6.setVisible(False) \n    link_knob7 = n.knobs()\[\"zview_sprite\"]\n    link_knob7.setVisible(False) \n    link_knob8 = n.knobs()\[\"zshape\"]\n    link_knob8.setVisible(True) \n    link_knob9 = n.knobs()\[\"zblades\"]\n    link_knob9.setVisible(False) \n    link_knob10 = n.knobs()\[\"zroundness\"]\n    link_knob10.setVisible(False) \n    link_knob11 = n.knobs()\[\"zrotation\"]\n    link_knob11.setVisible(False) \n    link_knob12 = n.knobs()\[\"zinner_size\"]\n    link_knob12.setVisible(False) \n    link_knob13 = n.knobs()\[\"zinner_feather\"]\n    link_knob13.setVisible(False) \n    link_knob14 = n.knobs()\[\"zinner_brightness\"]\n    link_knob14.setVisible(False) \n    n\[\"zview_sprite\"].setValue(False)\n    n\[\"zaspectRatioMult\"].setEnabled(True)\nelif k.name() == \"Z_kernelType\" and k.value() == \"Aperture Blades\":\n    link_knob = n.knobs()\[\"zaspectRatioMult\"]\n    link_knob.setVisible(True)\n    link_knob1 = n.knobs()\[\"zsprite_frame\"]\n    link_knob1.setVisible(False) \n    link_knob2= n.knobs()\[\"zamount\"]\n    link_knob2.setVisible(False) \n    link_knob3 = n.knobs()\[\"zabb_size\"]\n    link_knob3.setVisible(False) \n    link_knob4= n.knobs()\[\"zabberation\"]\n    link_knob4.setVisible(False) \n    link_knob5 = n.knobs()\[\"zgamma\"]\n    link_knob5.setVisible(False) \n    link_knob6 = n.knobs()\[\"zgain\"]\n    link_knob6.setVisible(False) \n    link_knob7 = n.knobs()\[\"zview_sprite\"]\n    link_knob7.setVisible(False) \n    link_knob8 = n.knobs()\[\"zshape\"]\n    link_knob8.setVisible(False) \n    link_knob9 = n.knobs()\[\"zblades\"]\n    link_knob9.setVisible(True) \n    link_knob10 = n.knobs()\[\"zroundness\"]\n    link_knob10.setVisible(True) \n    link_knob11 = n.knobs()\[\"zrotation\"]\n    link_knob11.setVisible(True) \n    link_knob12 = n.knobs()\[\"zinner_size\"]\n    link_knob12.setVisible(True) \n    link_knob13 = n.knobs()\[\"zinner_feather\"]\n    link_knob13.setVisible(True) \n    link_knob14 = n.knobs()\[\"zinner_brightness\"]\n    link_knob14.setVisible(True) \n    n\[\"zview_sprite\"].setValue(False)\n    n\[\"zaspectRatioMult\"].setEnabled(True)\n\n\n\n\nif k.name() == \"depth_channel\" and k.value() == \"deep\": \n\n    n\[\"view\"].setValues(\[\"Final Result\",\"Deep\",\"Defocus map\"])\n    n.begin()\n    temp = nuke.toNode(\"DeepReformat1\")\n    temp\[\"disable\"].setValue(True)\n    dot = nuke.toNode(\"deepDot\")\n    deep = nuke.nodes.Input(name = \"Deep\")\n    deep.setXYpos(dot.xpos()-35,dot.ypos()-600)\n    dot.setInput(0,deep)\n    if n\[\"use_cameraInput\"].value()== False:\n        n\[\"flag\"].setValue(True)\n    n.end()\n    n\[\"deep_warning\"].setVisible(True)\n\n\nelif k.name() == \"depth_channel\" and k.value() ==\"depth2.red\": \n\n    n\[\"view\"].setValues(\[\"Final Result\",\"Depth\",\"Defocus map\"])\n    inpName =\[]\n    with n:\n        for inp in nuke.allNodes(\"Input\"):\n            inpName.append(inp.name())    \n    if \"Deep\" in inpName: \n        inp2 = n.input(2)\n        inp3 = n.input(3)\n        n.begin()\n        temp = nuke.toNode(\"DeepReformat1\")\n        temp\[\"disable\"].setValue(True)\n        v = n\[\"use_cameraInput\"].value()\n        dot = nuke.toNode(\"deepDot\")\n        if v == True and n\[\"flag\"].value() == False: \n            deep = nuke.toNode(\"Deep\")       \n            n.setInput(3,None)\n            nuke.delete(deep)\n            n.setInput(2,None)\n            n\[\"use_cameraInput\"].setValue(False)  \n            nuke.delete(nuke.toNode(\"InputCamera\")) \n            n\[\"use_cameraInput\"].setValue(True)   \n            camInput  = nuke.nodes.Input(name = \"InputCamera\")\n            n.setInput(2,inp2)  \n            n\[\"flag\"].setValue(False)\n       \n        elif v== True and n\[\"flag\"].value() == True:\n            deep = nuke.toNode(\"Deep\")\n            n.setInput(2,None)\n            nuke.delete(deep)\n            n.setInput(3,None)        \n            nuke.delete(nuke.toNode(\"InputCamera\")) \n            n\[\"use_cameraInput\"].setValue(True)   \n            n\[\"f\"].setExpression(\"\[topnode input2].focal\")\n            n\[\"N\"].setExpression(\"\[topnode input2].fstop\")\n            n\[\"haperture\"].setExpression(\"\[topnode input2].haperture\")\n            n\[\"vaperture\"].setExpression(\"\[topnode input2].vaperture\")\n            n\[\"s\"].setExpression(\"\[topnode input2].focal_point\")\n            camInput  = nuke.nodes.Input(name = \"InputCamera\")\n            n.setInput(2,inp3)\n            n\[\"flag\"].setValue(False)\n        elif v == False:\n            deep = nuke.toNode(\"Deep\")\n            n.setInput(2,None)\n            nuke.delete(deep)\n            n\[\"flag\"].setValue(False)\n        n.end()\n    n\[\"deep_warning\"].setVisible(False)\n\n\n    \nelif k.name() == \"depth_channel\" and k.value() == \"depth.Z\": \n\n    n\[\"view\"].setValues(\[\"Final Result\",\"Depth\",\"Defocus map\"])\n    inpName =\[]\n    with n:\n        for inp in nuke.allNodes(\"Input\"):\n            inpName.append(inp.name())    \n    if \"Deep\" in inpName: \n        inp2 = n.input(2)\n        inp3 = n.input(3)\n        n.begin()\n        temp = nuke.toNode(\"DeepReformat1\")\n        temp\[\"disable\"].setValue(True)\n        v = n\[\"use_cameraInput\"].value()\n        dot = nuke.toNode(\"deepDot\")\n        if v == True and n\[\"flag\"].value() == False: \n            deep = nuke.toNode(\"Deep\")       \n            n.setInput(3,None)\n            nuke.delete(deep)\n            n.setInput(2,None)\n            n\[\"use_cameraInput\"].setValue(False)  \n            nuke.delete(nuke.toNode(\"InputCamera\")) \n            n\[\"use_cameraInput\"].setValue(True)   \n            camInput  = nuke.nodes.Input(name = \"InputCamera\")\n            n.setInput(2,inp2)  \n            n\[\"flag\"].setValue(False)\n       \n        elif v== True and n\[\"flag\"].value() == True:\n            deep = nuke.toNode(\"Deep\")\n            n.setInput(2,None)\n            nuke.delete(deep)\n            n.setInput(3,None)        \n            nuke.delete(nuke.toNode(\"InputCamera\")) \n            n\[\"use_cameraInput\"].setValue(True)   \n            n\[\"f\"].setExpression(\"\[topnode input2].focal\")\n            n\[\"N\"].setExpression(\"\[topnode input2].fstop\")\n            n\[\"haperture\"].setExpression(\"\[topnode input2].haperture\")\n            n\[\"vaperture\"].setExpression(\"\[topnode input2].vaperture\")\n            n\[\"s\"].setExpression(\"\[topnode input2].focal_point\")\n            camInput  = nuke.nodes.Input(name = \"InputCamera\")\n            n.setInput(2,inp3)\n            n\[\"flag\"].setValue(False)\n        elif v == False:\n            deep = nuke.toNode(\"Deep\")\n            n.setInput(2,None)\n            nuke.delete(deep)\n            n\[\"flag\"].setValue(False)\n        n.end()\n    n\[\"deep_warning\"].setVisible(False)\n\n\nif k.name()==\"use_cameraInput\" and k.value() == True:   \n    if n\[\"flag\"].value()==True:\n        camInput = nuke.nodes.Input(name = \"InputCamera\")\n        n\[\"f\"].setExpression(\"\[topnode input3].focal\")\n        n\[\"N\"].setExpression(\"\[topnode input3].fstop\")\n        n\[\"haperture\"].setExpression(\"\[topnode input3].haperture\")\n        n\[\"vaperture\"].setExpression(\"\[topnode input3].vaperture\")\n        n\[\"s\"].setExpression(\"\[topnode input3].focal_point\")\n        n\[\"f\"].setEnabled(False)\n        n\[\"N\"].setEnabled(False)\n        n\[\"haperture\"].setEnabled(False)\n        n\[\"vaperture\"].setEnabled(False)\n        n\[\"s\"].setEnabled(False)\n\n    elif n\[\"flag\"].value()== False:\n        camInput = nuke.nodes.Input(name = \"InputCamera\")\n        n\[\"f\"].setExpression(\"\[topnode input2].focal\")\n        n\[\"N\"].setExpression(\"\[topnode input2].fstop\")\n        n\[\"haperture\"].setExpression(\"\[topnode input2].haperture\")\n        n\[\"vaperture\"].setExpression(\"\[topnode input2].vaperture\")\n        n\[\"s\"].setExpression(\"\[topnode input2].focal_point\")\n        n\[\"f\"].setEnabled(False)\n        n\[\"N\"].setEnabled(False)\n        n\[\"haperture\"].setEnabled(False)\n        n\[\"vaperture\"].setEnabled(False)\n        n\[\"s\"].setEnabled(False)\nelif k.name()==\"use_cameraInput\" and k.value() == False:\n    if n\[\"flag\"].value()==True:\n        f_val = n\[\"f\"].value()\n        N_val = n\[\"N\"].value()\n        h_val = n\[\"haperture\"].value()\n        v_val = n\[\"vaperture\"].value()\n        s_val = n\[\"s\"].value()\n        n.setInput(3,None)   \n        nuke.delete(camInput)\n        n\[\"f\"].clearAnimated()\n        n\[\"N\"].clearAnimated()\n        n\[\"haperture\"].clearAnimated()\n        n\[\"vaperture\"].clearAnimated()\n        n\[\"s\"].clearAnimated()\n        n\[\"f\"].setEnabled(True)\n        n\[\"N\"].setEnabled(True)\n        n\[\"haperture\"].setEnabled(True)\n        n\[\"vaperture\"].setEnabled(True)\n        n\[\"s\"].setEnabled(True)\n        n\[\"f\"].setValue(f_val)\n        n\[\"N\"].setValue(N_val)\n        n\[\"haperture\"].setValue(h_val)\n        n\[\"vaperture\"].setValue(v_val)\n        n\[\"s\"].setValue(s_val)\n\n    if n\[\"flag\"].value()==False:\n        if n\[\"depth_channel\"].value()==\"deep\":\n            f_val = n\[\"f\"].value()\n            N_val = n\[\"N\"].value()\n            h_val = n\[\"haperture\"].value()\n            v_val = n\[\"vaperture\"].value()\n            s_val = n\[\"s\"].value()\n            deepInfo = n.input(3)\n            n.setInput(3,None)   \n            nuke.delete(deep)\n            n.setInput(2,None)              \n            nuke.delete(camInput )\n            dot = nuke.toNode(\"deepDot\")\n            deep = nuke.nodes.Input(name = \"Deep\")\n            deep.setXYpos(dot.xpos()-35,dot.ypos()-600)\n            dot.setInput(0,deep)\n            n.setInput(2,deepInfo)\n            n\[\"f\"].clearAnimated()  \n            n\[\"N\"].clearAnimated()\n            n\[\"haperture\"].clearAnimated()\n            n\[\"vaperture\"].clearAnimated()\n            n\[\"s\"].clearAnimated() \n            n\[\"f\"].setEnabled(True)\n            n\[\"N\"].setEnabled(True)\n            n\[\"haperture\"].setEnabled(True)\n            n\[\"vaperture\"].setEnabled(True)\n            n\[\"s\"].setEnabled(True)         \n            n\[\"flag\"].setValue(True)\n            n\[\"f\"].setValue(f_val)\n            n\[\"N\"].setValue(N_val)\n            n\[\"haperture\"].setValue(h_val)\n            n\[\"vaperture\"].setValue(v_val)\n            n\[\"s\"].setValue(s_val)\n        if n\[\"depth_channel\"].value()==\"depth2.red\":\n            f_val = n\[\"f\"].value()\n            N_val = n\[\"N\"].value()\n            h_val = n\[\"haperture\"].value()\n            v_val = n\[\"vaperture\"].value()\n            s_val = n\[\"s\"].value()\n            n.setInput(2,None) \n            n\[\"f\"].clearAnimated()\n            n\[\"N\"].clearAnimated()\n            n\[\"haperture\"].clearAnimated()\n            n\[\"vaperture\"].clearAnimated()\n            n\[\"s\"].clearAnimated()    \n            n\[\"f\"].setEnabled(True)\n            n\[\"N\"].setEnabled(True)\n            n\[\"haperture\"].setEnabled(True)\n            n\[\"vaperture\"].setEnabled(True)\n            n\[\"s\"].setEnabled(True)\n            nuke.delete(camInput )\n            n\[\"f\"].setValue(f_val)\n            n\[\"N\"].setValue(N_val)\n            n\[\"haperture\"].setValue(h_val)\n            n\[\"vaperture\"].setValue(v_val)\n            n\[\"s\"].setValue(s_val)\n        if n\[\"depth_channel\"].value()==\"depth.Z\":\n            f_val = n\[\"f\"].value()\n            N_val = n\[\"N\"].value()\n            h_val = n\[\"haperture\"].value()\n            v_val = n\[\"vaperture\"].value()\n            s_val = n\[\"s\"].value()\n            n.setInput(2,None) \n            n\[\"f\"].clearAnimated()\n            n\[\"N\"].clearAnimated()\n            n\[\"haperture\"].clearAnimated()\n            n\[\"vaperture\"].clearAnimated()\n            n\[\"s\"].clearAnimated()    \n            n\[\"f\"].setEnabled(True)\n            n\[\"N\"].setEnabled(True)\n            n\[\"haperture\"].setEnabled(True)\n            n\[\"vaperture\"].setEnabled(True)\n            n\[\"s\"].setEnabled(True)\n            nuke.delete(camInput )\n            n\[\"f\"].setValue(f_val)\n            n\[\"N\"].setValue(N_val)\n            n\[\"haperture\"].setValue(h_val)\n            n\[\"vaperture\"].setValue(v_val)\n            n\[\"s\"].setValue(s_val)\n            \nif k.name() == \"inputChange\":\n  \n    topClass = \[\"DeepRead\",\"DeepRecolor\",\"Dot\"]\n\n    if n\[\"depth_channel\"].value()== \"deep\" and n\[\"flag\"].value()==False:\n        if n.input(3)!=None and n.input(3).Class() in topClass:  \n            n.begin()\n            temp = nuke.toNode(\"DeepReformat1\")\n            temp\[\"disable\"].setValue(False)\n            n.end()                 \n            n\[\"deep_warning\"].setVisible(False)   \n        elif n.input(3)!=None and n.input(3).Class() not in topClass:  \n            n.begin()\n            temp = nuke.toNode(\"DeepReformat1\")\n            temp\[\"disable\"].setValue(True)\n            n.end()                 \n            n\[\"deep_warning\"].setVisible(True)       \n        elif n.input(3)==None:\n            n.begin()\n            temp = nuke.toNode(\"DeepReformat1\")\n            temp\[\"disable\"].setValue(True)\n            n.end()         \n            n\[\"deep_warning\"].setVisible(True)     \n\n\n    if n\[\"depth_channel\"].value()== \"deep\" and n\[\"flag\"].value()==True:\n        if n.input(2)!=None and n.input(2).Class() in topClass:\n            n.begin()\n            temp = nuke.toNode(\"DeepReformat1\")\n            temp\[\"disable\"].setValue(False)\n            n.end()          \n            n\[\"deep_warning\"].setVisible(False) \n        elif n.input(2)!=None and n.input(2).Class() not in topClass:\n            n.begin()\n            temp = nuke.toNode(\"DeepReformat1\")\n            temp\[\"disable\"].setValue(True)\n            n.end()      \n            n\[\"deep_warning\"].setVisible(True) \n        elif n.input(2)==None:\n            n.begin()\n            temp = nuke.toNode(\"DeepReformat1\")\n            temp\[\"disable\"].setValue(True)\n            n.end()      \n            n\[\"deep_warning\"].setVisible(True)       \n\n\n\n"
tile_color 0xcc804eef
label v0.9
xpos 1367
ypos 256
disable {{parent.Defocus.Disable_Defocus==1 x1738 0}}
addUserKnob {20 Zen_Defocus l ZenDefocus}
addUserKnob {26 space2 l "" -STARTLINE T "           \n     \n                                  "}
addUserKnob {6 useGPUifavailable l "Use GPU if available" -STARTLINE}
addUserKnob {4 view l View M {"Final Result" Depth "Defocus map"}}
addUserKnob {26 ""}
addUserKnob {4 defocustype l "Defocus Type" M {ZDefocus pgBokeh "" ""}}
addUserKnob {68 depth_channel l "Depth Channel" M {depth2.red depth.Z}}
addUserKnob {26 deep_space l "" -STARTLINE T "     "}
addUserKnob {26 deep_warning l "" -STARTLINE +HIDDEN T "<h4 style=\"color:Tomato;\">Connect Deep Input </h4>"}
addUserKnob {6 flag l INVISIBLE -STARTLINE +INVISIBLE}
addUserKnob {26 ""}
addUserKnob {22 get_selected_camera l "Get From Selected Cam" t "Set the parameters using the selected camera." T "from __future__ import with_statement\n\ndef get_camera():\n    ozdef = nuke.thisNode()\n    with nuke.root():\n        root_par = nuke.root().format().pixelAspect()\n        cam = nuke.selectedNodes()\n        if len(cam) != 1:\n            nuke.message('Please select a single camera node.')\n            return\n        elif len(cam) == 0:\n            nuke.message('Please select a single camera node.')\n            return\n        else:\n            cam = cam\[0]\n        if 'Camera2' not in cam.Class():\n            nuke.message('Please select a camera node.')\n            return\n        if cam\['focal'].animations():\n            ozdef\['f'].copyAnimations(cam\['focal'].animations())\n        else:\n            ozdef\['f'].setValue(cam\['focal'].getValue())\n        if cam\['fstop'].animations():\n            ozdef\['N'].copyAnimations(cam\['fstop'].animations())\n        else:\n            ozdef\['N'].setValue(cam\['fstop'].getValue())\n        if cam\['focal_point'].animations():\n            ozdef\['s'].copyAnimations(cam\['focal_point'].animations())\n        else:\n            ozdef\['s'].setValue(cam\['focal_point'].getValue())\n\n        # Assuming anamorphic shows have physical haperture*2        \n        if cam\['haperture'].animations():        \n            ozdef\['haperture'].copyAnimations(cam\['haperture'].animations())\n        else:\n            ozdef\['haperture'].setValue(cam\['haperture'].getValue())\n        \n        if cam\['vaperture'].animations():\n            ozdef\['vaperture'].copyAnimations(cam\['vaperture'].animations())\n        else:\n            ozdef\['vaperture'].setValue(cam\['vaperture'].getValue())\n\nif __name__ == \"__main__\":\n    get_camera()" +STARTLINE}
addUserKnob {6 use_cameraInput l "use camera input" -STARTLINE}
use_cameraInput true
addUserKnob {41 N l f-stop T _ghost_whisper_.N}
addUserKnob {7 f l "focal length" t "Set the focal length of the camera" +DISABLED R 0 500}
f {{"\[topnode input2].focal"}}
addUserKnob {7 haperture l "horiz aperture" t "Horizontal aperture of the film-back / sensor" +DISABLED R 0 50}
haperture {{"\[topnode input2].haperture"}}
addUserKnob {7 vaperture l "vert aperture" t "Vertical aperture of the film-back / sensor" +DISABLED R 0 50}
vaperture {{"\[topnode input2].vaperture"}}
addUserKnob {26 ""}
addUserKnob {7 s l "Focus Distance" t "Set the focal distance" +DISABLED R 10 1000}
s {{"\[topnode input2].focal_point"}}
addUserKnob {41 sample_Z l "sample Z position" T _ghost_whisper_.sample_Z}
addUserKnob {7 unitScale l INVISIBLE +INVISIBLE R 0 10}
unitScale 10
addUserKnob {7 nearDistance l INVISIBLE +INVISIBLE R 0 10}
nearDistance 0.1
addUserKnob {7 maxSizeClamp l INVISIBLE +INVISIBLE R 50 200}
maxSizeClamp 100
addUserKnob {7 formatWidth l INVISIBLE +INVISIBLE R 1000 4000}
formatWidth {{format.w}}
addUserKnob {7 radius l INVISIBLE +INVISIBLE R 0 10}
radius {{(f/N)/2}}
addUserKnob {7 invertF l INVISIBLE +INVISIBLE}
invertF {{"1/(s*10*10) + 1/f"}}
addUserKnob {7 offset l INVISIBLE +INVISIBLE}
addUserKnob {7 defocusSizeInfinite l INVISIBLE +INVISIBLE}
defocusSizeInfinite {{"( radius*( f-( 1/(invertF-1/(inf*unitScale*10)) ) )/( 1/(invertF-1/(inf*unitScale*10)) ) )*formatWidth/haperture"}}
addUserKnob {7 nearDefocusSize l INVISIBLE +INVISIBLE}
nearDefocusSize {{"(radius*( -f+( 1/(invertF-1/(nearDistance*unitScale*10)) ) )/( 1/(invertF-1/(nearDistance*unitScale*10)) ) )*formatWidth/haperture"}}
addUserKnob {3 min_zdepth l INVISIBLE +INVISIBLE}
min_zdepth 1
addUserKnob {26 spacer2 l "" t " " -STARTLINE T "  "}
addUserKnob {26 ""}
addUserKnob {20 optimize l "Creative  Adjustments" n 1}
addUserKnob {7 multiplier l INVISIBLE +INVISIBLE R 0 10}
multiplier 1
addUserKnob {41 frontmultiplier l "Front Multiplier" T pgBokeh1.frontmultiplier}
addUserKnob {41 backmultiplier l "Back Multiplier" T pgBokeh1.backmultiplier}
addUserKnob {7 ALTER_DOF_dof_alter l DOF_Alter R 0.8 1.2}
ALTER_DOF_dof_alter 1
addUserKnob {6 anamorphic +STARTLINE}
anamorphic true
addUserKnob {20 endGroup n -1}
addUserKnob {26 ""}
addUserKnob {41 size l "edge correct" T Blur1.size}
addUserKnob {26 div_adj l "" +STARTLINE +HIDDEN}
addUserKnob {20 corrective_slice_group l "pgBokeh Adjustment" +HIDDEN n 1}
corrective_slice_group 0
addUserKnob {7 overscan +HIDDEN R 1 2}
overscan 1.1
addUserKnob {41 correctiveSlices l "Number of Corrective Slices" +HIDDEN T pgBokeh1.correctiveSlices}
addUserKnob {41 slice_override l "Override Near/Far" +HIDDEN T _ghost_whisper_.slice_override}
addUserKnob {3 slice_near l Near/Far +HIDDEN}
slice_near 10
addUserKnob {3 slice_far l "" -STARTLINE +HIDDEN}
slice_far 500
addUserKnob {20 endGroup_4 l endGroup n -1}
addUserKnob {20 Filter l Bokeh +INVISIBLE}
addUserKnob {26 space_1 l "" +STARTLINE T " "}
addUserKnob {41 kernelType l "kernel type" +HIDDEN T _ghost_whisper_.kernelType}
addUserKnob {7 aspectRatioMult l "aspect ratio multiply" +DISABLED +HIDDEN R 0 4}
aspectRatioMult 1
addUserKnob {8 bloom +HIDDEN}
bloom 0.7
addUserKnob {41 kSoftness l softness +HIDDEN T pgBokeh1.kSoftness}
addUserKnob {41 kNumSides l "blade count" +HIDDEN T pgBokeh1.kNumSides}
addUserKnob {26 ""}
addUserKnob {6 view_sprite l "view sprite" -STARTLINE +DISABLED +HIDDEN}
addUserKnob {3 sprite_frame l "sprite frame" +DISABLED +HIDDEN}
sprite_frame 7
addUserKnob {41 amount l sharpen +HIDDEN T sharpen.amount}
addUserKnob {6 sharpen_switch l on/off -STARTLINE +DISABLED +HIDDEN}
sharpen_switch true
addUserKnob {12 abb_size l abberation +DISABLED +HIDDEN}
abb_size {1 2}
addUserKnob {6 abberation l on/off -STARTLINE +DISABLED +HIDDEN}
addUserKnob {41 gamma +HIDDEN T contrast_control.gamma}
addUserKnob {41 gain +HIDDEN T contrast_control.gain}
addUserKnob {20 defocus_filter l Bokeh}
addUserKnob {26 space_2_1 l "" +STARTLINE T " "}
addUserKnob {4 Z_kernelType l "kernel type" M {Circular "Aperture Blades" Input Internal "" "" "" "" "" "" "" "" "" "" ""}}
Z_kernelType Input
addUserKnob {41 zbloom_gamma l "gamma correction" T ZDefocus2.bloom_gamma}
addUserKnob {41 zbloom l bloom -STARTLINE T ZDefocus2.bloom}
addUserKnob {41 bloom_threshold l "bloom threshold" T ZDefocus2.bloom_threshold}
addUserKnob {41 bloom_gain l "bloom gain" T ZDefocus2.bloom_gain}
addUserKnob {26 ""}
addUserKnob {6 zview_sprite l "view sprite" +HIDDEN +STARTLINE}
addUserKnob {7 zaspectRatioMult l "aspect ratio multiply" +HIDDEN R 0 4}
zaspectRatioMult 1
addUserKnob {3 zsprite_frame l "sprite frame" +HIDDEN}
zsprite_frame 1
addUserKnob {41 zamount l sharpen +HIDDEN T sharpen.amount}
addUserKnob {12 zabb_size l abberation +HIDDEN}
zabb_size {1 2}
addUserKnob {6 zabberation l on/off -STARTLINE +HIDDEN}
addUserKnob {41 zgamma l gamma +HIDDEN T contrast_control.gamma}
addUserKnob {41 zgain l gain +HIDDEN T contrast_control.gain}
addUserKnob {41 zshape l "filter shape" +HIDDEN T ZDefocus2.shape}
addUserKnob {41 zblades l "blade count" +HIDDEN T ZDefocus2.blades}
addUserKnob {41 zroundness l roundness +HIDDEN T ZDefocus2.roundness}
addUserKnob {41 zrotation l rotation +HIDDEN T ZDefocus2.rotation}
addUserKnob {41 zinner_size l "inner size" +HIDDEN T ZDefocus2.inner_size}
addUserKnob {41 zinner_feather l "inner feather" +HIDDEN T ZDefocus2.inner_feather}
addUserKnob {41 zinner_brightness l "inner brightness" +HIDDEN T ZDefocus2.inner_brightness}
addUserKnob {20 metric l Metric t "convert feet and inches to dm"}
addUserKnob {26 space_2 l "" +STARTLINE T " "}
addUserKnob {41 feet T _ghost_whisper_.feet}
addUserKnob {41 inches -STARTLINE T _ghost_whisper_.inches}
addUserKnob {41 dm T _ghost_whisper_.dm}
addUserKnob {26 spacer l "" +STARTLINE T " "}
addUserKnob {26 info l "" +STARTLINE T "convert feet and inches from camera sheet data into dm (focal distance)"}
}
StickyNote {
 inputs 0
 name Def_Map
 label Def_Map
 xpos -527
 ypos 1744
}
Input {
 inputs 0
 name InputInput
 label "\[value number]"
 xpos -363
 ypos -404
}
Dot {
 name _ghost_whisper_
 knobChanged "\nthisknob = nuke.thisKnob()\n\nnode = nuke.thisNode()\nparent_node = nuke.thisParent()\n\ndef enable_knobs(enabled=True, caminput=False):\n    knobs = \['get_selected_camera', 'f', 's', 'N', 'haperture','vaperture','sample_Z']\n    for knob in knobs:\n        parent_node\[knob].setEnabled(enabled)\n\ndef enable_knobs_kernel(enabled = True, type = 'Input' ):\n    all_knobs = \['aspectRatioMult','kSoftness','kNumSides','view_sprite','sprite_frame','amount','abb_size','gamma','gain','sharpen_switch','abberation']\n    knobs = \{'Circular':\['aspectRatioMult','kSoftness'],'Aperture Blades': \['aspectRatioMult','kSoftness','kNumSides'],'Internal':\['aspectRatioMult','view_sprite','sprite_frame','amount','abb_size','gamma','gain','sharpen_switch','abberation'],'Input': \[]\}\n    for knb in all_knobs:\n        if knb in knobs\[type]:\n            parent_node\[knb].setEnabled(enabled)\n        else:\n            parent_node\[knb].setEnabled(not enabled)\n\n\nif thisknob.name() == 'kernelType':\n    enable_knobs_kernel(type = thisknob.value())\nif thisknob.name() == 'use_camera_input':\n    if thisknob.getValue():\n        enable_knobs(False, True)\n        cam_input = nuke.nodes.Input(name='InputCamera', xpos=228, ypos=-16)\n        parent_node\['f'].setExpression('\[topnode input2].focal')\n        parent_node\['haperture'].setExpression('\[topnode input2].haperture')\n        parent_node\['vaperture'].setExpression('\[topnode input2].vaperture')\n        parent_node\['N'].setExpression('\[topnode input2].fstop')\n        parent_node\['s'].setExpression('\[topnode input2].focal_point')\n    if not thisknob.getValue():\n        enable_knobs()\n        parent_node\['f'].clearAnimated()\n        parent_node\['haperture'].clearAnimated()\n        parent_node\['vaperture'].clearAnimated()\n        parent_node\['N'].clearAnimated()\n        parent_node\['s'].clearAnimated()        \n        parent_node.setInput(2, None)\n        nuke.delete(nuke.toNode('InputCamera'))\nif thisknob.name() =='slice_override':\n    if thisknob.value():\n        parent_node\['slice_near'].setEnabled(True)\n        parent_node\['slice_far'].setEnabled(True)\n    else:\n        parent_node\['slice_near'].setEnabled(False)\n        parent_node\['slice_far'].setEnabled(False)\n        \nif thisknob.name() in  \['feet','inches']:\n    feet = node\['feet'].value()\n    inches = node\['inches'].value()\n    node\['dm'].setValue(feet*3.048+inches*0.254)\nif thisknob.name() == 'dm':\n    dm = thisknob.value()\n    feet,inches = divmod(dm/3.048, 1)\n    inches = inches *12\n    node\['feet'].setValue(feet)\n    node\['inches'].setValue(inches)\nif thisknob.name() == 'N':\n    l = \[1,1.1,1.2,1.4,1.6,1.8,2,2.2,2.5,2.8,3.2,3.5,4,4.5,5,5.6,6.3,7.1,8.0,9.0,10.0,11.0,13.0,14.0,16.0,18.0,20.0,22.0]\n    print thisknob.value()    \n    if not str(thisknob.value()) in l:\n        i= int(thisknob.value())\n        print int(thisknob.value())\n        v = min(l, key=lambda x:abs(x-thisknob.value())) #l\[i] or 0\n        print v\n        thisknob.setValue(float(v))\nif thisknob.name() == 'sample_Z':        \n    s = parent_node\['s']\n    ds=parent_node.node('DepthSampler')\n    zsample = ds.sample('red', thisknob.getValue(0), thisknob.getValue(1))\n    if thisknob.isAnimated():\n        s.setAnimated()        \n        s.setValueAt(zsample, nuke.frame())\n    else:\n        s.setValue(zsample)\n"
 note_font_size 42
 note_font_color 0x7f7f7f01
 xpos -329
 ypos -147
 addUserKnob {20 User}
 addUserKnob {6 constant_defocus t "Disables depth-varying defocus. \nBokeh size is directly controlled by max defocus." +STARTLINE}
 addUserKnob {6 use_camera_input l "use camera input" t "Creates a camera input pipe instead so that no user action is required." +STARTLINE}
 addUserKnob {7 N l f-stop +DISABLED R 1 22}
 N {{"\[topnode input2].fstop"}}
 addUserKnob {4 kernelType l "kernel type" +HIDDEN M {Input Circular "Aperture Blades" Internal "" "" "" "" ""}}
 addUserKnob {12 sample_Z l "sample Z position"}
 sample_Z {1175 255}
 addUserKnob {3 feet}
 addUserKnob {3 inches -STARTLINE}
 addUserKnob {7 dm}
 addUserKnob {26 ""}
 addUserKnob {6 slice_override +STARTLINE}
 slice_override true
}
set Nfec93800 [stack 0]
Dot {
 name Dot5
 xpos -8
 ypos -147
}
set Nfec93c00 [stack 0]
Dot {
 name Dot8
 xpos -8
 ypos 58
}
set Nfece0000 [stack 0]
Shuffle {
 in depth
 in2 alpha
 out2 alpha
 name Shuffle2
 label "\[value in]"
 xpos 82
 ypos 48
}
set Nfece0400 [stack 0]
Expression {
 expr0 "r == 0 ? 0 : 1/r"
 channel1 none
 channel2 none
 name Invert_Z2
 xpos 82
 ypos 327
}
push $Nfece0000
Dot {
 name Dot10
 xpos -8
 ypos 329
}
push $Nfece0000
add_layer {depth2 depth2.red depth2.green depth2.blue depth2.alpha depth2.rgba depth2.r depth2.g depth2.b depth2.rgba depth2.Z depth2.z}
Shuffle {
 in {depth2.red depth2.green depth2.blue depth2.alpha}
 green red
 blue red
 name Shuffle3
 label "\[value in].red"
 xpos -157
 ypos 49
 disable {{depth_channel==1?1:0}}
}
Dot {
 name Dot7
 xpos -123
 ypos 205
}
set Nfece1400 [stack 0]
Copy {
 inputs 2
 from0 rgba.alpha
 to0 rgba.alpha
 name Copy2
 xpos -157
 ypos 319
}
Switch {
 inputs 2
 which {{depth_channel==1}}
 name Switch2
 xpos -41
 ypos 395
}
set Nfece1c00 [stack 0]
Dot {
 name Dot24
 xpos -7
 ypos 446
}
set Nfed08000 [stack 0]
Dot {
 name Dot25
 xpos -126
 ypos 446
}
Premult {
 name Premult2
 xpos -160
 ypos 504
}
push $Nfed08000
Switch {
 inputs 2
 which {{parent.depth_channel==0?0:1}}
 name Switch9
 xpos -41
 ypos 504
}
push $Nfece1c00
Dot {
 name Dot17
 xpos 138
 ypos 399
}
Blur {
 channels rgba
 name Blur1
 xpos 104
 ypos 504
}
Unpremult {
 name Unpremult1
 xpos 104
 ypos 606
}
Merge2 {
 inputs 2
 Bchannels {rgba.red rgba.green rgba.blue -rgba.alpha}
 name Merge1
 label "Bbox: \[value bbox]"
 xpos -41
 ypos 600
}
set Nfed09c00 [stack 0]
Dot {
 name Dot11
 xpos -95
 ypos 609
}
Premult {
 name Premult1
 xpos -129
 ypos 757
}
Multiply {
 channels rgb
 value 10
 name _UNIT_MULTIPLIER_
 xpos -129
 ypos 817
 addUserKnob {20 User}
 addUserKnob {7 depth_unit_divider R 0 500}
}
Expression {
 temp_name0 zdepth
 temp_expr0 "r < parent.min_zdepth* _UNIT_MULTIPLIER_.value ? parent.min_zdepth* _UNIT_MULTIPLIER_.value : r"
 temp_name1 focus_dist
 temp_expr1 "s * _UNIT_MULTIPLIER_.value"
 temp_name2 coc
 temp_expr2 "(fabs(focus_dist - zdepth) * pow(f,2) / (N * zdepth * (focus_dist - f)))"
 temp_name3 coc_px
 temp_expr3 "fabs(coc / haperture * input.width / 2)"
 channel0 rgba
 expr0 coc_px
 channel1 none
 name Generate_Direct_Z
 xpos -129
 ypos 889
 addUserKnob {20 Optical l "Optical Characteristics"}
 addUserKnob {7 f l "focal length" R 0 500}
 f {{parent.f}}
 addUserKnob {7 N l f-stop R 0 44}
 N {{parent.N}}
 addUserKnob {7 haperture R 0 50}
 haperture {{parent.haperture}}
 addUserKnob {7 s l "focus distance" R 0 1000}
 s {{parent.s}}
}
set N807c0c00 [stack 0]
Dot {
 name Dot19
 xpos -489
 ypos 892
}
Dot {
 name Dot2
 xpos -489
 ypos 1771
}
Dot {
 inputs 0
 name deepDot
 xpos -683
 ypos 1285
}
DeepReformat {
 type scale
 scale {{parent.overscan}}
 resize none
 pbb true
 name DeepReformat1
 xpos -607
 ypos 1282
 disable true
}
DeepToImage {
 name DeepToImage1
 xpos -607
 ypos 1402
}
Shuffle {
 in deep
 blue black
 alpha black
 name Shuffle4
 label "\[value in]"
 xpos -607
 ypos 1481
}
Reformat {
 type scale
 scale {{1/overscan}}
 resize none
 pbb true
 name Reformat3
 xpos -607
 ypos 1571
}
Dot {
 name Dot20
 xpos -573
 ypos 1656
}
push $Nfece0400
Dot {
 name Dot3
 xpos 262
 ypos 58
}
push $Nfece1400
Switch {
 inputs 2
 which {{depth_channel==1}}
 name Switch1
 xpos 227
 ypos 201
}
Dot {
 name Dot23
 xpos 261
 ypos 1563
}
Switch {
 inputs 2
 which {{parent.depth_channel==2?1:0}}
 name Switch8
 xpos 227
 ypos 1653
}
Dot {
 name Dot9
 xpos 261
 ypos 1770
}
Read {
 inputs 0
 file_type exr
 file /jobs/Library_elements/nuke_gizmo_elements/sprites/elements/E_sprites_bokeh_v1/256x256/E_sprites_bokeh_v1.%04d.exr
 format "256 256 0 0 256 256 1 square_256"
 proxy /jobs/Library_elements/nuke_gizmo_elements/sprites/elements/E_sprites_bokeh_v1/256x256/E_sprites_bokeh_v1.%04d.exr
 proxy_format "256 256 0 0 256 256 1 square_256"
 first 1001
 last 1025
 origfirst 1001
 origlast 1025
 origset true
 name HubRead5
 label N/A
 xpos 1199
 ypos 160
 addUserKnob {20 Hub}
 addUserKnob {6 approvedVersionsOnly l "Show Approved Only" -STARTLINE}
 addUserKnob {6 sortLayersByDate l "Sort Layers by Date" +STARTLINE}
 sortLayersByDate true
 addUserKnob {4 user_filter l "Filter by user:" M {"Show all"}}
 addUserKnob {26 ""}
 addUserKnob {4 scene M {nuke_gizmo_elements}}
 addUserKnob {4 shot M {sprites}}
 addUserKnob {4 layerFilter M {"NO FILTER"}}
 addUserKnob {4 layer M {E_sprites_bokeh}}
 addUserKnob {4 layerVersion l version M {1}}
 addUserKnob {4 pass M {N/A}}
 addUserKnob {6 lockPass l "Lock Pass" -STARTLINE}
 addUserKnob {4 elementClip l Resolution M {base}}
 addUserKnob {26 views l "views " T (mono)}
 addUserKnob {26 ""}
 addUserKnob {32 updt l " Check for Updates " -STARTLINE T "python -exec \"import mpc.nuke.hubNuke.hubNukeReadNode as hubNukeReadNode; hubNukeReadNode.refreshNode(nuke.thisNode())\""}
 addUserKnob {32 daily l " Release Daily " -STARTLINE T "python -exec \"import mpc.nuke.hubNuke.hubNukeTools as hubNukeTools; hubNukeTools.createDaily(nuke.thisNode())\""}
}
FrameHold {
 firstFrame {{"parent.defocustype ==0?1000+zsprite_frame:1000+sprite_frame"}}
 name FrameHold554
 selected true
 xpos 1199
 ypos 268
}
Dot {
 name Dot32
 xpos 1233
 ypos 329
}
set N80805000 [stack 0]
Transform {
 scale 0.5
 center {{"\[value \[topnode].width]/2"} {"\[value \[topnode].height]/2"}}
 shutter 0
 shutteroffset centred
 name Transform4
 xpos 1324
 ypos 326
 disable {{parent.anamorphic?1:0}}
}
Crop {
 box {0 0 {"\[value \[topnode].width]"} {"\[value \[topnode].height]"}}
 reformat true
 crop false
 name Crop4
 xpos 1324
 ypos 398
 disable {{parent.anamorphic?1:0}}
}
push $N80805000
Switch {
 inputs 2
 which {{defocustype==0?1:0}}
 name Switch13
 xpos 1199
 ypos 398
}
Transform {
 translate {0.5 0.5}
 center {{"\[value \[topnode].width]/2"} {"\[value \[topnode].height]/2"}}
 name Transform5
 xpos 1199
 ypos 479
 disable {{parent.anamorphic?1:0 x737 1}}
}
Crop {
 box {0 0 256 256}
 softness 5
 name Crop2
 xpos 1199
 ypos 531
}
Log2Lin {
 operation lin2log
 black 4e-05
 white 665
 name Log2Lin3
 xpos 1199
 ypos 592
}
Sharpen {
 channels rgba
 amount 5
 name sharpen
 xpos 1199
 ypos 647
 disable {{!parent.sharpen_switch}}
}
Log2Lin {
 black 4e-05
 white 665
 name Log2Lin1
 xpos 1199
 ypos 699
}
Dot {
 name Dot4
 xpos 1233
 ypos 748
}
set N8082f400 [stack 0]
TransformMasked {
 channels {rgba.red -rgba.green -rgba.blue none}
 translate {{"parent.defocustype ==0?parent.zabb_size:abb_size"} {"parent.defocustype ==0?parent.zabb_size:abb_size"}}
 center {128 128}
 shutteroffset centred
 name right_Abb
 xpos 1199
 ypos 774
}
TransformMasked {
 channels {-rgba.red -rgba.green rgba.blue none}
 translate {{"parent.defocustype ==0?-(parent.zabb_size):-(abb_size)"} {"parent.defocustype ==0?-(parent.zabb_size):-(abb_size)"}}
 center {128 128}
 shutteroffset centred
 name left_Abb
 xpos 1199
 ypos 798
}
push $N8082f400
Dot {
 name Dot12
 xpos 1123
 ypos 748
}
Dot {
 name Dot13
 xpos 1123
 ypos 892
}
Switch {
 inputs 2
 which {{"parent.defocustype ==0?parent.zabberation:parent.abberation"}}
 name abberation
 xpos 1199
 ypos 888
}
ColorCorrect {
 channels rgba
 gamma 0.264
 gain 0.022
 name contrast_control
 xpos 1199
 ypos 947
}
Dot {
 name Dot14
 xpos 1233
 ypos 988
}
set N8086f000 [stack 0]
Transform {
 scale {{"parent.defocustype ==0?(zaspectRatioMult?1/(zaspectRatioMult*(1+anamorphic)):1):(aspectRatioMult?1/(aspectRatioMult*(1+anamorphic)):1)"} {"parent.defocustype ==0?(zaspectRatioMult?1*zaspectRatioMult*(1+anamorphic):1):(aspectRatioMult?1*aspectRatioMult*(1+anamorphic):1)"}}
 center {128 128}
 filter impulse
 name Transform3
 xpos 1199
 ypos 1011
}
Reformat {
 type scale
 scale {{"parent.defocustype ==0?(zaspectRatioMult>0?(\[input this 0].scale.h>\[input this 0].scale.w?\[input this 0].scale.h:\[input this 0].scale.w):1):(aspectRatioMult>0?(\[input this 0].scale.h>\[input this 0].scale.w?\[input this 0].scale.h:\[input this 0].scale.w):1)"}}
 resize none
 name Reformat2
 xpos 1199
 ypos 1042
}
Crop {
 box {0 0 {width} {height}}
 name Crop1
 xpos 1199
 ypos 1073
}
push $N8086f000
Dot {
 name Dot15
 xpos 1123
 ypos 988
}
Dot {
 name Dot16
 xpos 1123
 ypos 1142
}
Switch {
 inputs 2
 which {{anamorphic||aspectRatioMult}}
 name Switch5
 xpos 1199
 ypos 1139
}
Expression {
 temp_name0 c
 temp_expr0 0.00001
 temp_name1 m
 temp_expr1 55
 expr0 r<c?0:r>m?m:r
 expr1 g<c?0:g>m?m:g
 expr2 b<c?0:b>m?m:g
 expr3 a<c?0:a>m?m:g
 name Clamp
 xpos 1199
 ypos 1177
}
Dot {
 name Dot1209
 xpos 1233
 ypos 1228
}
set N80897400 [stack 0]
Dot {
 name Dot1
 xpos 1233
 ypos 1485
}
push $N80897400
Input {
 inputs 0
 name InputFilter
 label "\[value number]"
 xpos 868
 ypos -401
 number 1
}
Dot {
 name Dot28
 xpos 902
 ypos -313
}
set N808fc000 [stack 0]
Dot {
 name Dot29
 xpos 809
 ypos -313
}
Transform {
 scale {{"\[python 1/nuke.root()\\\[\\\"format\\\"\\].value().pixelAspect()]"} 1}
 center {{"\[value \[topnode].width]/2"} {"\[value \[topnode].width]/2"}}
 name Transform6
 xpos 775
 ypos -283
}
Crop {
 box {0 0 {"\[value \[topnode].width]"} {"\[value \[topnode].height]"}}
 reformat true
 crop false
 name Crop7
 xpos 775
 ypos -247
}
Dot {
 name Dot30
 xpos 809
 ypos -204
}
push $N808fc000
Switch {
 inputs 2
 which {{"parent.anamorphic && defocustype ==1?1:0"}}
 name Switch11
 xpos 868
 ypos -207
}
Dot {
 name Dot31
 xpos 902
 ypos -102
}
set N808fd800 [stack 0]
Transform {
 scale 0.5
 center {{"\[value \[topnode].width]/2"} {"\[value \[topnode].height]/2"}}
 shutter 0
 shutteroffset centred
 name Transform1
 xpos 993
 ypos -105
 disable {{parent.anamorphic?1:0 x737 0}}
}
Crop {
 box {0 0 {"\[value \[topnode].width]"} {"\[value \[topnode].height]"}}
 reformat true
 crop false
 name Crop3
 xpos 993
 ypos -33
 disable {{parent.anamorphic?1:0 x737 0}}
}
push $N808fd800
Switch {
 inputs 2
 which {{defocustype==0?1:0}}
 name Switch12
 xpos 868
 ypos -33
}
Transform {
 translate {0.5 0.5}
 center {{"\[value \[topnode].width]/2"} {"\[value \[topnode].height]/2"}}
 name Transform2
 xpos 868
 ypos 48
 disable {{parent.anamorphic?1:0 x737 0}}
}
Switch {
 inputs 2
 which {{"parent.defocustype ==0?(parent.Z_kernelType==3?1:(\[exists parent.input1]?0:1) ):parent.kernelType==3?1:(\[exists parent.input1]?0:1) " x1001 0}}
 name Switch3
 xpos 868
 ypos 1224
}
Dot {
 name Dot6
 label " "
 note_font_size 24
 note_font_color 0xff000000
 xpos 902
 ypos 1285
}
set N80923000 [stack 0]
push $N807c0c00
Multiply {
 value {{1/_UNIT_MULTIPLIER_.value}}
 name Multiply1
 xpos -129
 ypos 982
}
set N80923400 [stack 0]
push $Nfed09c00
NoOp {
 name DepthSampler
 label "Do not delete"
 xpos -41
 ypos 685
 addUserKnob {20 User}
 addUserKnob {7 sval R 0 1000}
}
set N80923800 [stack 0]
push $Nfec93800
Copy {
 inputs 2
 from0 rgba.red
 to0 depth2.red
 name Copy1
 xpos -363
 ypos 685
}
Expression {
 inputs 1+1
 temp_name0 s
 temp_expr0 parent.s
 temp_name1 da
 temp_expr1 dof_alter<0.8?0.8:dof_alter>1.2?1.2:dof_alter
 channel0 {depth2.red -depth2.green -depth2.blue -depth2.alpha}
 expr0 depth2.red<=s?(depth2.red*da):depth2.red*(1/da)
 channel1 {-rgba.red -rgba.green -rgba.blue none}
 maskChannelMask rgba.red
 name ALTER_DOF
 xpos -363
 ypos 988
 addUserKnob {20 User}
 addUserKnob {7 dof_alter}
 dof_alter {{parent.ALTER_DOF_dof_alter}}
}
Remove {
 operation keep
 channels rgba
 channels2 {depth2.red depth2.green depth2.blue depth2.alpha}
 name Remove1
 xpos -363
 ypos 1068
}
set N80948400 [stack 0]
Remove {
 operation keep
 channels rgba
 name Remove2
 xpos -228
 ypos 1068
}
Dot {
 name Dot22
 xpos -194
 ypos 1141
}
push $N80948400
Switch {
 inputs 2
 which {{depth_channel==2?1:0 i}}
 name Switch7
 xpos -363
 ypos 1138
}
Reformat {
 type scale
 scale {{overscan}}
 resize none
 pbb true
 name Reformat1
 xpos -363
 ypos 1193
}
pgBokeh {
 inputs 1+1inputs 4
depthChannel depth2.red
focalPlane {{s}}
realWorldLens true
focalLength {{f}}
fStop {{N}}
worldScaleMultiplier {{10*overscan}}
filmFormat Custom
apertureWidth {{haperture}}
apertureHeight {{vaperture}}
bloomThreshold {{parent.bloom}}
kChrAbbOff {0.6 1 1}
kernelType {{parent.kernelType<=2?parent.kernelType:0}}
kAspectRatio {{anamorphic&&aspectRatioMult?aspectRatioMult*4:anamorphic?4:aspectRatioMult?1*aspectRatioMult:1}}
kNumSides 5
correctiveSlices 256
overrideNearAndFarForSlices {{slice_override}}
depthSlicesNearAndFar {{slice_near} {slice_far}}
name pgBokeh1
xpos -363
ypos 1282
disable true

 xpos -363
 ypos 1282
 selected false
 disable true
}
Reformat {
 type scale
 scale {{1/overscan}}
 resize none
 pbb true
 name Reformat4
 xpos -363
 ypos 1388
}
push $N80923400
push $N80923800
push $Nfec93c00
Dot {
 name Dot18
 xpos 410
 ypos -147
}
Copy {
 inputs 2
 from0 rgba.red
 to0 depth2.red
 name Copy3
 xpos 376
 ypos 685
}
set N80972800 [stack 0]
Dot {
 name Dot26
 xpos 530
 ypos 694
}
Expression {
 channel0 depth
 expr0 "depth2.red == 0 ?inf: depth2.red/a"
 channel1 none
 channel2 none
 name Expression1
 xpos 496
 ypos 765
}
Dot {
 name Dot27
 xpos 530
 ypos 844
}
push $N80972800
Expression {
 channel0 depth
 expr0 "depth2.red == 0 ?inf: depth2.red"
 channel1 none
 channel2 none
 name Expression7
 xpos 376
 ypos 763
}
Switch {
 inputs 2
 which {{"parent.size >0?0:1"}}
 name Switch10
 xpos 376
 ypos 841
}
Expression {
 inputs 1+1
 temp_name0 s
 temp_expr0 parent.s
 temp_name1 da
 temp_expr1 dof_alter<0.6?0.6:dof_alter>1.15?1.15:dof_alter
 temp_name2 falloff
 temp_expr2 parent.N<2.9?1:1.21
 channel0 depth
 expr0 depth.Z<=s?(depth.Z*da):depth.Z*(1/da)
 channel1 {-rgba.red -rgba.green -rgba.blue none}
 name ALTER_DOF1
 xpos 376
 ypos 988
 addUserKnob {20 User}
 addUserKnob {7 dof_alter}
 dof_alter {{ALTER_DOF_dof_alter}}
}
add_layer {defocus defocus.size}
Expression {
 temp_name0 depthToUse
 temp_expr0 depth.Z
 temp_name1 cocMultiplier
 temp_expr1 1.724
 channel0 defocus
 expr0 "( radius*cocMultiplier*( f-( 1/(invertF-1/(depthToUse*unitScale*10)) ) )/( 1/(invertF-1/(depthToUse*unitScale*10)) ) )*formatWidth/haperture"
 channel1 none
 channel2 none
 name Expression3
 xpos 376
 ypos 1065
}
Expression {
 temp_name1 tweak
 temp_expr1 parent.anamorphic?0.67:1.21
 channel0 defocus
 expr0 "defocus.size < 0 ? clamp(defocus.size*multiplier*1.2*frontmultiplier-offset,-inf,0) : clamp(defocus.size*multiplier*backmultiplier*tweak+offset,0,inf)"
 channel1 none
 channel2 none
 name Expression4
 xpos 376
 ypos 1134
}
set N809a0800 [stack 0]
push $N80923000
push $N809a0800
Dot {
 name Dot21
 xpos 671
 ypos 1137
}
set N809a0c00 [stack 0]
ZDefocus2 {
 inputs 2
 useGPUIfAvailable {{parent.useGPUifavailable}}
 z_channel defocus.size
 math direct
 center 0.02
 focal_point {0 0}
 size 1
 max_size {{"min(maxSizeClamp, max((defocusSizeInfinite*multiplier*backmultiplier+offset), (nearDefocusSize*multiplier*frontmultiplier+offset)))"}}
 filter_type {{parent.Z_kernelType==0?0:parent.Z_kernelType==1?1:2}}
 legacy_resize_mode false
 show_legacy_resize_mode false
 aspect {{"parent.defocustype ==0?(anamorphic&&zaspectRatioMult?zaspectRatioMult*4:anamorphic?4:zaspectRatioMult?1*zaspectRatioMult:0.5):(anamorphic&&aspectRatioMult?aspectRatioMult*4:anamorphic?4:aspectRatioMult?1*aspectRatioMult:0.5)"}}
 bloom_threshold 0.805
 bloom_gain 1.105
 name ZDefocus2
 xpos 637
 ypos 1311
}
push $N80923000
push $N809a0c00
ZDefocus2 {
 inputs 2
 useGPUIfAvailable {{parent.useGPUifavailable}}
 z_channel defocus.size
 math direct
 center 0.02
 focal_point {0 0}
 size 1
 max_size {{"min(maxSizeClamp, max((defocusSizeInfinite*multiplier*backmultiplier+offset), (nearDefocusSize*multiplier*frontmultiplier+offset)))"}}
 filter_type {{parent.Z_kernelType==0?0:parent.Z_kernelType==1?1:2}}
 legacy_resize_mode false
 show_legacy_resize_mode false
 aspect {{"parent.defocustype ==0?(anamorphic&&zaspectRatioMult?zaspectRatioMult*4:anamorphic?4:zaspectRatioMult?1*zaspectRatioMult:0.5):(anamorphic&&aspectRatioMult?aspectRatioMult*4:anamorphic?4:aspectRatioMult?1*aspectRatioMult:0.5)"}}
 bloom_threshold 0.805
 bloom_gain 1.105
 name ZDefocus1
 label "\nNode_Locked"
 xpos 747
 ypos 1115
}
ShuffleCopy {
 inputs 2
 red red
 green green
 blue blue
 name ShuffleCopy1
 xpos 637
 ypos 1406
}
Switch {
 inputs 2
 which {{"parent.f==0 || parent.N==0 || parent.vaperture==0 || parent.haperture==0 || parent.s==0?1:0"}}
 name Switch6
 xpos 376
 ypos 1282
}
Expression {
 expr0 "clamp(r , 0, inf)"
 expr1 "clamp(g, 0, inf)"
 expr2 "clamp(b, 0, inf)"
 channel3 alpha
 expr3 "clamp(a, 0, 1)"
 name Expression5
 xpos 376
 ypos 1388
}
Switch {
 inputs 2
 which {{defocustype}}
 name Toggle
 xpos -62
 ypos 1388
}
Switch {
 inputs 2
 which {{"parent.defocustype ==0?zview_sprite:view_sprite "}}
 name Switch4
 xpos -62
 ypos 1483
}
Switch {
 inputs 3
 which {{parent.view}}
 name ViewSwitch
 xpos -62
 ypos 1768
}
Output {
 name Output2
 xpos -62
 ypos 1894
}
Input {
 inputs 0
 name InputCamera
 xpos 1720
 ypos -10
 number 2
}
end_group
Noise {
inputs 0
size 340
zoffset {{frame*0.0025}}
lacunarity 2.46
gain 0.555
gamma 0.58
center {1077 568}
name Noise13
xpos 3337
ypos 2276
}
Grade {
white 1.75
name Grade18
xpos 3337
ypos 2330
}
Radial {
inputs 0
area {1226 -54 2726 2038}
name Radial3
xpos 3342
ypos 2132
}
Radial {
inputs 0
area {1116 574 1830 1408}
name Radial5
xpos 3330
ypos 2045
}
Radial {
inputs 0
area {829 327.5 1324 808.5}
color {3.636901617 3.24471426 2.691307306 1}
name Radial6
xpos 3756
ypos 1564
}
Transform {
translate {-1077 -568}
scale 7.3
center {1077 568}
name Transform5
xpos 3754
ypos 1614
}
Transform {
translate {{parent.Position1.translate} {parent.Position1.translate}}
name Transform6
xpos 3754
ypos 1652
}
ExponentialGlow_v3v { name ExponentialGlow_v3v3
 selected true
 xpos 30650
 ypos -187
 falloff 0.83
 intensity 6.8
 blur_amount 0.78
 add_source false

xpos 3842
ypos 1735
selected false
disable false
}
Dot {
name Dot10
xpos 3787
ypos 1833
}
set N80b87c00 [stack 0]
Saturation {
saturation 0
mode Maximum
name Saturation1
xpos 3756
ypos 1892
}
Grade {
white 0.22
gamma 0.57
name Grade14
xpos 3756
ypos 1946
}
push $N80b87c00
Roto {
inputs 0
output alpha
cliptype none
curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x4486a000 x440e0000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Bezier2 512 bezier
     {{cc
       {f 8192}
       {px x447c0000
        {x41840000 x3f000000}
        {x449cd000 x43c84000}
        {xc1840000 xbf000000}
        {x41280000 x40c00000}
        {x44920000 x43b94000}
        {xc1280000 xc0c00000}
        {xbf000000 x40200000}
        {x448d4000 x43a30000}
        {x3f000000 xc0200000}
        {xc1880000 x40e00000}
        {x4493b000 x4393c000}
        {x41880000 xc0e00000}
        {xbf800000 xbf000000}
        {x449d7000 x4389c000}
        {1 x3f000000}
        {x41f00000 x40900000}
        {x44935000 x43884000}
        {xc1f00000 xc0900000}
        {xc0000000 x40c00000}
        {x448af000 x43834000}
        {x40000000 xc0c00000}
        {xc0600000 x41000000}
        {x44900000 x43720000}
        {x40600000 xc1000000}
        {x424e0000 0}
        {x448bb000 x436c0000}
        {xc24e0000 0}
        {x40600000 0}
        {x447ee000 x43698000}
        {xc0600000 0}
        {xc0400000 x40200000}
        {x4473a000 x435e0000}
        {x40400000 xc0200000}
        {xc1680000 xc1380000}
        {x44690000 x43540000}
        {x41680000 x41380000}
        {xc1a00000 xc0c00000}
        {x447c2000 x43804000}
        {x41a00000 x40c00000}
        {xc1580000 xc1180000}
        {x4485d000 x43910000}
        {x41580000 x41180000}
        {x40200000 xc1a80000}
        {x448b0000 x43a8c000}
        {xc0200000 x41a80000}
        {x41a40000 xc0800000}
        {x448ac000 x43ba0000}
        {xc1a40000 x40800000}
        {x41a00000 x40600000}
        {x44844000 x43b5c000}
        {xc1a00000 xc0600000}
        {xc22c0000 xc0b00000}
        {x44821000 x43c00000}
        {x422c0000 x40b00000}
        {xbfc00000 x40800000}
        {x448dc000 x43c00000}
        {x3fc00000 xc0800000}
        {x40e00000 x40e00000}
        {x448d1000 x43ae4000}
        {xc0e00000 xc0e00000}
        {xc1880000 xc1380000}
        {x44907000 x43bc0000}
        {x41880000 x41380000}
        {xc1b00000 xc0f00000}
        {x4495d000 x43c34000}
        {x41b00000 x40f00000}
        {xc1300000 xc0200000}
        {x449bd000 x43cec000}
        {x41300000 x40200000}}}     idem}
     {tx x447c0000 x448be643 x439dec86}
     {a r xbf800000 g xbf800000 b xbf800000 a xbf800000 osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c0000 ltm x447c0000 tt x40800000}}
    {curvegroup Bezier1 512 bezier
     {{cc
       {f 8192}
       {px
        {x447c0000 x447c4000}
        {{0}
      {0}}
        {{{x44ac0b95 0 1 xc23f4de0 1}
       {x44a634b4 xc23f4de0 1 0 1}}
      {{x43cebb04 0 1 xbf5e9c00 1}
       {x43cc12d3 xbf5e9c00 1 0 1}}}
        {{0}
      {0}}
        {{0}
      {0}}
        {{x44b11c3c}
      {x43d98f0f}}
        {{0}
      {0}}
        {{xc1bc0000}
      {x41200000}}
        {{{x44a24556 -}
       {x44a35000 -}}
      {{x43cece39 -}
       {x43c94000 -}}}
        {{x41bc0000}
      {xc1200000}}
        {{xc0d00000}
      {xc0400000}}
        {{x44b32e1e}
      {x43c170f1}}
        {{x40d00000}
      {x40400000}}}}     idem}
     {tx x447c4000 x44af0000 x43dca000}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000}}}}}}
toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
toolbar_brush_hardness 0.200000003
toolbar_source_transform_scale {1 1}
toolbar_source_transform_center {1077 568}
color -1
colorOverlay {0 0 0 0}
lifetime_type "all frames"
lifetime_start 1008
lifetime_end 1008
motionblur_shutter_offset_type centred
source_black_outside true
name Roto14
xpos 3753
ypos 590
}
Transform {
scale 0.3
center {{parent.Position1.translate} {parent.Position1.translate}}
name Transform4
xpos 3753
ypos 679
}
Shuffle {
red alpha
green alpha
blue alpha
name Shuffle1
label "\[value in]"
xpos 3753
ypos 729
}
GodRays {
channels rgba
scale 3.333333333
center {{parent.Position1.translate} {parent.Position1.translate}}
steps 8
name GodRays2
xpos 3753
ypos 1027
}
Dot {
name Dot18
xpos 3784
ypos 1282
}
Roto {
inputs 0
output alpha
cliptype none
curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x4486a000 x440e0000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Bezier3 512 bezier
     {{cc
       {f 8192}
       {px x44842000
        {xc2340000 x41680000}
        {x4417e000 x43650000}
        {x42340000 xc1680000}
        {xc0c00000 x41e00000}
        {x44322000 x430f8000}
        {x40c00000 xc1e00000}
        {x41d80000 0}
        {x44106000 x42500000}
        {xc1d80000 0}}}     idem}
     {tx x44842000 x4408e000 x430d8000}
     {a opc x3e91eb85 osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x44842000 ltm x44842000 tt x40800000}}
    {curvegroup Bezier2 512 bezier
     {{cc
       {f 8192}
       {px x44850000
        {x429d0000 xc0800000}
        {x44f0c000 x43bfc000}
        {xc29d0000 x40800000}
        {xbfc00000 0}
        {x44c9a557 x43ac2aac}
        {x3fc00000 0}
        {xbfc00000 x3f000000}
        {x44dc3556 x4389aab8}
        {x3fc00000 xbf000000}}}     idem}
     {tx x44850000 x44e7daab x43ad9555}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x44850000 ltm x44850000 tt x40800000}}
    {curvegroup Bezier1 512 bezier
     {{cc
       {f 8192}
       {px x44850000
        {x42e00000 0}
        {x449fc000 x43800000}
        {xc2e00000 0}
        {xc2380000 x42580000}
        {x44820000 x434a0000}
        {x42380000 xc2580000}
        {xc2860000 xc1c00000}
        {x449e6000 x42da0000}
        {x42860000 x41c00000}}}     idem}
     {tx x44850000 x44956000 x433d0000}
     {a opc 0 osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x44850000 ltm x44850000 tt x40800000}}}}}}
toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
toolbar_brush_hardness 0.200000003
toolbar_source_transform_scale {1 1}
toolbar_source_transform_center {1077 568}
colorOverlay {0 0 0 0}
opacity 0
lifetime_type "all frames"
lifetime_start 1064
lifetime_end 1064
motionblur_shutter_offset_type centred
source_black_outside true
name Roto19
xpos 3648
ypos 494
}
Blur {
channels rgba
size 58
name Blur10
xpos 3648
ypos 556
}
Roto {
inputs 0
output alpha
cliptype none
curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x4486a000 x440e0000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Bezier1 512 bezier
     {{cc
       {f 8192}
       {px x4480a000
        {x42a20000 x41700000}
        {x44738000 x43ba0000}
        {xc2a20000 xc1700000}
        {x42960000 x42a60000}
        {x44174000 x43928000}
        {xc2960000 xc2a60000}
        {xc2580000 xc1000000}
        {x44130000 x43010000}
        {x42580000 x41000000}
        {xc2400000 xc2180000}
        {x44654000 x43490000}
        {x42400000 x42180000}}}     idem}
     {tx x4480a000 x4440c000 x4378c000}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x4480a000 ltm x4480a000 tt x40800000}}}}}}
toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
toolbar_brush_hardness 0.200000003
toolbar_source_transform_scale {1 1}
toolbar_source_transform_center {1077 568}
colorOverlay {0 0 0 0}
lifetime_type "all frames"
lifetime_start 1029
lifetime_end 1029
motionblur_shutter_offset_type centred
source_black_outside true
name Roto12
xpos 3381
ypos 368
}
Noise {
inputs 0
size 125
zoffset {{frame*0.015}}
gain 0.84
gamma 0.18
center {1077 568}
name Noise12
xpos 3232
ypos 342
}
Card3D {
rotate {-90 0 0}
scaling {1 2 1}
uniform_scale 2
pivot_translate {0 -0.264 0}
name Card3D1
xpos 3232
ypos 427
}
Blur {
channels rgba
size 5
name Blur11
xpos 3232
ypos 477
}
Merge2 {
inputs 2
operation stencil
name Merge23
xpos 3374
ypos 477
}
Roto {
inputs 0
output alpha
cliptype none
curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x4486a000 x440e0000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Bezier10 512 bezier
     {{cc
       {f 8192}
       {px x4484c000
        {xc0400000 x41100000}
        {x44118000 x44a00000}
        {x40400000 xc1100000}
        {0 1}
        {x43f78000 x4488e001}
        {0 xbf800000}
        {0 x40000000}
        {x4422bffc x44108001}
        {0 xc0000000}}}     idem}
     {tx x4484c000 x44140000 x448a6000}
     {a opc x3ec00000 osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x4484c000 ltm x4484c000 tt x40800000}}
    {curvegroup Bezier9 512 bezier
     {{cc
       {f 8192}
       {px x4480a000
        {x40000000 x41880000}
        {x43d86668 x446da667}
        {xc0000000 xc1880000}
        {xc2180000 x41600000}
        {x44120000 x441a0000}
        {x42180000 xc1600000}
        {xc1000000 xc2740000}
        {x442d4000 x44298000}
        {x41000000 x42740000}
        {x42080000 xc1e00000}
        {x443e6666 x44850000}
        {xc2080000 x41e00000}}}     idem}
     {tx x4480a000 x441b4000 x444d2000}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x4480a000 ltm x4480a000 tt x40800000 opc x3de147ae}}
    {curvegroup Bezier8 512 bezier
     {{cc
       {f 8192}
       {px x4480a000
        {{{x42cf0000 -}}
 {{x42100000 -}}}
        {{{x44261366 x40155566 1 0 1}}
 {{x43c81d16 x3e800000 1 0 1}}}
        {{{xc2cf0000 -}}
 {{xc2100000 -}}}
        {{{x421e0000 -}}
 {{x40400000 -}}}
        {{{x43400000 -}}
 {{x43a20000 -}}}
        {{{xc21e0000 -}}
 {{xc0400000 -}}}
        {{{xc1e00000 -}}
 {{xc1680000 -}}}
        {{{x42ce0000 -}}
 {{x43a90000 -}}}
        {{{x41e00000 -}}
 {{x41680000 -}}}
        {{{xc28f0000 -}}
 {{xc1180000 -}}}
        {{{x4335f782 xbfa5555a 1 0 1}}
 {{x43ffdddc x4042aaad 1 0 1}}}
        {{{x428f0000 -}}
 {{x41180000 -}}}
        {{{xc1c40000 -}}
 {{xbf000000 -}}}
        {{{x442528ba x3f900000 1 0 1}}
 {{x4403f936 x408eaaad 1 0 1}}}
        {{{x41c40000 -}}
 {{x3f000000 -}}}}}     idem}
     {tx x447c4000 x438f2666 x43b7b333}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000 opc x3e75c28f}}
    {curvegroup Bezier7 512 bezier
     {{cc
       {f 8192}
       {px x447c4000
        {x420d99a0 x420bfff8}
        {x44881a95 x43e77e08}
        {xc20d99a0 xc20c0000}
        {x42026660 0}
        {x44762666 x43cc999a}
        {xc2026660 0}
        {xc1766680 xc18e6670}
        {x446b6666 x43d13333}
        {x41766680 x418e6670}
        {xc1b00000 xc16cccc0}
        {x4476e666 x43e74ccd}
        {x41b00000 x416cccc0}
        {xc1633300 xbf4cce00}
        {x4486799a x43fa6666}
        {x41633300 x3f4cce00}}}     idem}
     {tx x447c4000 x447ef5c3 x43e3dc2a}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000}}
    {curvegroup Bezier6 512 bezier
     {{cc
       {f 8192}
       {px x447c4000
        {x42890000 xc1600000}
        {x44a56000 x43f74000}
        {xc2890000 x41600000}
        {x41200000 x41280000}
        {x44955000 x43f14000}
        {xc1200000 xc1280000}
        {xc1080000 x41480000}
        {x4492b000 x43dc4000}
        {x41080000 xc1480000}
        {xc1c00000 xc0c00000}
        {x4497a000 x43d74000}
        {x41c00000 x40c00000}
        {xc1940000 xc0b00000}
        {x44a3a000 x43e68000}
        {x41940000 x40b00000}}}     idem}
     {tx x447c4000 x449b5333 x43e6e666}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000}}
    {curvegroup Bezier5 512 bezier
     {{cc
       {f 8192}
       {px x447c4000
        {x420e0000 xc19c0000}
        {x44f37000 x43a43333}
        {xc20e0000 x419c0000}
        {x42260000 xc1200000}
        {x44f04000 x43c84000}
        {xc2260000 x41200000}
        {x421c0000 xc0900000}
        {x44ddd000 x43d2c000}
        {xc21c0000 x40900000}
        {x41600000 xc0f00000}
        {x44d43000 x43e14000}
        {xc1600000 x40f00000}
        {x40400000 x41ac0000}
        {x44cf7000 x43e60000}
        {xc0400000 xc1ac0000}
        {x41c00000 xc0000000}
        {x44c7d000 x43cf0000}
        {xc1c00000 x40000000}
        {x41500000 x41cc0000}
        {x44c0d000 x43c50000}
        {xc1500000 xc1cc0000}
        {xc1000000 x419c0000}
        {x44bd4000 x43970000}
        {x41000000 xc19c0000}
        {xc1f40000 xc0200000}
        {x44c1b000 x43798000}
        {x41f40000 x40200000}
        {x3fc00000 x41d40000}
        {x44bc2000 x431c8000}
        {xbfc00000 xc1d40000}
        {xc26a0000 x425c0000}
        {x44c88000 x421a0000}
        {x426a0000 xc25c0000}
        {xc2b70000 xc2440000}
        {x44db1000 xc2080000}
        {x42b70000 x42440000}
        {xc1700000 xc2060000}
        {x44ee4000 x42120000}
        {x41700000 x42060000}
        {xc2200000 xc1380000}
        {x44fac000 x42b40000}
        {x42200000 x41380000}
        {xc1480000 xc21a0000}
        {x44d32666 x436be665}
        {x41480000 x421a0000}
        {x41180000 xc1700000}
        {x44d1ecce x43948001}
        {xc1180000 x41700000}}}     idem}
     {tx x447c4000 x44dd5c00 x43819000}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000 opc x3e0a3d71}}
    {curvegroup Bezier4 512 bezier
     {{cc
       {f 8192}
       {px x44846000
        {{{xc2520000 -}}
 {{xc1f40000 -}}}
        {{{x44848fff -}}
 {{x43847334 -}}}
        {{{x42520000 -}}
 {{x41f40000 -}}}
        {{{xc1b40000 -}}
 {{x40200000 -}}}
        {{{x449fd000 -}}
 {{x438b4000 -}}}
        {{{x41b40000 -}}
 {{xc0200000 -}}}
        {{{xbfc00000 -}}
 {{x422a0000 -}}}
        {{{x44b36ffe -}}
 {{x4377999a -}}}
        {{{x3fc00000 -}}
 {{xc22a0000 -}}}
        {{{x41680000 -}}
 {{x41cc0000 -}}}
        {{{x44b67000 -}}
 {{x43099998 -}}}
        {{{xc1680000 -}}
 {{xc1cc0000 -}}}
        {{{x40000000 -}}
 {{x40c00000 -}}}
        {{{x44a58777 xc008888f 1 0 1}}
 {{x422221e8 xbe08899a 1 0 1}}}
        {{{xc0000000 -}}
 {{xc0c00000 -}}}
        {{{x40800000 -}}
 {{x41780000 -}}}
        {{{x44912ff3 xc0847b29 1 0 1}}
 {{x4348aad0 x409bf271 1 0 1}}}
        {{{xc0800000 -}}
 {{xc1780000 -}}}
        {{{xc2140000 -}}
 {{xc1d80000 -}}}
        {{{x442b4000 -}}
 {{xc1c80000 -}}}
        {{{x42140000 -}}
 {{x41d80000 -}}}}}     idem}
     {tx x447c4000 x4496d249 x43074925}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000 a x40000000 b x40000000 g x40000000 r x40000000}}
    {curvegroup Bezier3 512 bezier
     {{cc
       {f 8192}
       {px x447c4000
        {x42500000 x41680000}
        {x4450be51 x4399686c}
        {xc2500000 xc1680000}
        {x42100000 x41c80000}
        {x44332000 x43844000}
        {xc2100000 xc1c80000}
        {x41080000 x41940000}
        {x441d8000 x43420000}
        {xc1080000 xc1940000}
        {xc0b00000 x41200000}
        {x43f50000 x42c80000}
        {x40b00000 xc1200000}
        {xc2080000 x41780000}
        {x43fbc000 x418c0000}
        {x42080000 xc1780000}
        {xc2420000 xc1480000}
        {x44310000 x42900000}
        {x42420000 x41480000}
        {xc21a0000 xc1f80000}
        {x445e0000 x431f0000}
        {x421a0000 x41f80000}
        {xc2140000 xc1c40000}
        {x4476a000 x43790000}
        {x42140000 x41c40000}
        {xc1380000 xc2160000}
        {x44891000 x43a1c000}
        {x41380000 x42160000}}}     idem}
     {tx x447c4000 x44526800 x43786000}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000}}
    {curvegroup Bezier2 512 bezier
     {{cc
       {f 8192}
       {px x447c4000
        {xc2380000 x400ccc80}
        {x449ea7d3 x43b61203}
        {x42380000 xc00ccc80}
        {xc1880000 x414999a0}
        {x44a6e666 x43ad4ccd}
        {x41880000 xc14999a0}
        {xbfcccc00 x40e00000}
        {x44ab3333 x439d0000}
        {x3fcccc00 xc0e00000}
        {x41880000 xc0400000}
        {x449fd99a x43956666}
        {xc1880000 x40400000}
        {x412ccd00 xc1800000}
        {x449c4ccd x43a5b333}
        {xc12ccd00 x41800000}}}     idem}
     {tx x447c4000 x44a2b852 x43a56b86}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000}}
    {curvegroup Bezier1 512 bezier
     {{cc
       {f 8192}
       {px x447c4000
        {x40800000 xc0199980}
        {x44c2accd x43f98000}
        {xc0800000 x40199980}
        {x41e33340 xc0000000}
        {x44bd2000 x43ff8000}
        {xc1e33340 x40000000}
        {x41f99980 x3fe66800}
        {x44b6b333 x4400999a}
        {xc1f99980 xbfe66800}
        {x419b3340 x413999a0}
        {x44b10000 x43fccccd}
        {xc19b3340 xc13999a0}
        {x40933300 x41233340}
        {x44ab4000 x43e94ccd}
        {xc0933300 xc1233340}
        {x41c00000 x40800000}
        {x44a76000 x43e0b333}
        {xc1c00000 xc0800000}
        {x41066680 x3fcccd00}
        {x44a20000 x43dd0000}
        {xc1066680 xbfcccd00}
        {x40a00000 x413999a0}
        {x449e8000 x43d58000}
        {xc0a00000 xc13999a0}
        {xc1d00000 x400ccd00}
        {x449e4000 x43c84ccd}
        {x41d00000 xc00ccd00}
        {xc16ccd00 x41100000}
        {x44ab9333 x43c4b333}
        {x416ccd00 xc1100000}
        {xc1819980 x41133340}
        {x44b26ccd x43b8cccd}
        {x41819980 xc1133340}
        {xc1980000 xc1acccd0}
        {x44b80ccd x43b20000}
        {x41980000 x41acccd0}
        {xc0666600 xc14cccc0}
        {x44bb0ccd x43cccccd}
        {x40666600 x414cccc0}
        {xc1b00000 xc11999a0}
        {x44bdd333 x43d73333}
        {x41b00000 x411999a0}
        {xc1300000 xc0c00000}
        {x44c639f0 x43ded0d7}
        {x41300000 x40c00000}}}     idem}
     {tx x447c4000 x44b1cccd x43dc9630}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000}}}}}}
toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
toolbar_brush_hardness 0.200000003
toolbar_source_transform_scale {1 1}
toolbar_source_transform_center {1077 568}
colorOverlay {0 0 0 0}
opacity 0.375
lifetime_type "all frames"
lifetime_start 1062
lifetime_end 1062
motionblur_shutter_offset_type centred
source_black_outside true
name Roto11
xpos 3495
ypos 350
}
Group {
name Expon_Blur3
tile_color 0xa5682eff
label "crop \[value crop]"
xpos 3495
ypos 414
addUserKnob {20 Settings}
addUserKnob {7 Size t "Heading (Blur) filter size \n " R -50 50}
Size 10
addUserKnob {26 ""}
addUserKnob {7 Multiplyer R 1 10}
Multiplyer 2
addUserKnob {6 crop l "Crop to format" +STARTLINE}
crop true
}
Input {
 inputs 0
 name Input1
 xpos 290
 ypos -347
}
Dot {
 name Dot2
 xpos 324
 ypos -265
}
set N87ab0000 [stack 0]
Dot {
 name Dot1
 xpos 941
 ypos -265
}
Dot {
 name Dot3
 xpos 941
 ypos 447
}
push $N87ab0000
Invert {
 name Invert1
 xpos 290
 ypos -184
 disable {{"Size >= 0"}}
}
set N87ab0c00 [stack 0]
Blur {
 channels rgba
 size {{"Blur3.size * Multiplyer"}}
 crop {{parent.crop}}
 name Blur4
 xpos 821
 ypos -84
}
push $N87ab0c00
Blur {
 channels rgba
 size {{"Blur2.size * Multiplyer"}}
 crop {{parent.crop}}
 name Blur3
 xpos 610
 ypos -83
}
push $N87ab0c00
Blur {
 channels rgba
 size {{"Blur1.size * Multiplyer"}}
 crop {{parent.crop}}
 name Blur2
 xpos 446
 ypos -85
}
push $N87ab0c00
Blur {
 channels rgba
 size {{Size}}
 crop {{parent.crop}}
 name Blur1
 xpos 290
 ypos -85
}
Merge2 {
 inputs 2
 name Merge1
 xpos 290
 ypos 9
}
Merge2 {
 inputs 2
 name Merge2
 xpos 290
 ypos 95
}
Merge2 {
 inputs 2
 name Merge3
 xpos 290
 ypos 202
}
Invert {
 name Invert3
 xpos 290
 ypos 296
 disable {{"Size >= 0"}}
}
Switch {
 inputs 2
 which {{"Size == 0"}}
 name Switch1
 xpos 290
 ypos 443
}
Output {
 name Output1
 xpos 290
 ypos 604
}
end_group
Merge2 {
inputs 2
operation stencil
mix 0.3
name Merge27
xpos 3495
ypos 476
}
Grade {
inputs 1+1
channels rgba
white 1.8
name Grade41
xpos 3495
ypos 548
}
Transform {
scale 0.3
center {{parent.Position1.translate} {parent.Position1.translate}}
name Transform7
xpos 3495
ypos 676
}
Shuffle {
red alpha
green alpha
blue alpha
name Shuffle3
label "\[value in]"
xpos 3495
ypos 734
}
GodRays {
channels rgba
scale 3.333333333
center {{parent.Position1.translate} {parent.Position1.translate}}
steps 10
name GodRays4
xpos 3495
ypos 1007
}
Dot {
name Dot3
xpos 3526
ypos 1068
}
set N87b12c00 [stack 0]
Dot {
name Dot15
xpos 3655
ypos 1068
}
Grade {
channels rgba
white 2.25
multiply 1.06
gamma 0.41
name Grade9
xpos 3624
ypos 1136
}
set N87b13400 [stack 0]
Grade {
channels rgba
white 2.25
multiply 1.06
gamma 0.41
name Grade19
xpos 3624
ypos 1186
}
push $N87b13400
push $N87b12c00
Grade {
inputs 1+1
white 2.35
name Grade10
xpos 3495
ypos 1136
}
Grade {
inputs 1+1
white 6
name Grade20
xpos 3495
ypos 1186
}
Merge2 {
inputs 2
operation plus
name Merge18
xpos 3495
ypos 1281
}
Crop {
box {{input.format.x-overscan} {input.format.y-overscan} {input.format.r+overscan} {input.format.t+overscan}}
softness 50
crop false
name Crop4
label "to format +\[knob overscan]p "
xpos 3495
ypos 1358
addUserKnob {20 User}
addUserKnob {7 overscan R 0 400}
overscan 50
}
Merge2 {
inputs 2
operation multiply
name Merge26
xpos 3495
ypos 1832
}
Grade {
inputs 1+1
white 3
multiply 1.18
maskChannelMask rgba.red
name Grade30
xpos 3495
ypos 1946
}
Grade {
inputs 1+1
white 0.37
name Grade15
xpos 3495
ypos 2045
}
Grade {
inputs 1+1
white 0.31
name Grade13
xpos 3495
ypos 2132
}
Grade {
white 0.76
name Grade17
xpos 3495
ypos 2204
}
Merge2 {
inputs 2
operation soft-light
mix 0.65
name Merge17
xpos 3495
ypos 2330
}
Dot {
name Dot17
xpos 3526
ypos 2434
}
set N87ba0400 [stack 0]
Dot {
name Dot16
xpos 3284
ypos 2434
}
Position {
inputs 0
translate {1778 2502}
name Position1
xpos 3016
ypos 1002
}
Roto {
inputs 0
output alpha
cliptype none
curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x4486a000 x440e0000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Bezier1 512 bezier
     {{cc
       {f 8192}
       {px x447c4000
        {xc218e780 x4193ad80}
        {x449c0a88 x44726cdc}
        {x4218e7a0 xc193ad80}
        {xc1e46fc0 xc141bf00}
        {x44ad2f57 x44649b90}
        {x41e47000 x4141bf80}
        {xc0f2ce00 xc15a7600}
        {x44b41869 x446f4f70}
        {x40f2ce00 x415a7600}
        {xc06f5000 xc1908080}
        {x44b6d801 x447cd378}
        {x406f5200 x41908100}
        {xc1961cc0 x41742e80}
        {x44c1d14f x4479c8c8}
        {x41961d00 xc1742e00}
        {x41ee9900 x41cbb900}
        {x44ca24b0 x445c92b8}
        {xc1ee9940 xc1cbb900}
        {x41ebfdc0 x40b02d00}
        {x44af719f x44420958}
        {xc1ebfe00 xc0b02e00}
        {x4191a100 xc1bc2680}
        {x449e72a6 x4445619c}
        {xc191a0c0 x41bc2680}
        {x3faf1000 xc009b600}
        {x44979597 x4458998c}
        {xbfaf1000 x4009b200}}}     idem}
     {tx x447c4000 x44afdaab x4458271c}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x447c4000 ltm x447c4000 tt x40800000}}}}}}
toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
toolbar_brush_hardness 0.200000003
toolbar_source_transform_scale {1 1}
toolbar_source_transform_center {1077 568}
colorOverlay {0 0 0 0}
lifetime_type "all frames"
lifetime_start 1009
lifetime_end 1009
motionblur_shutter_offset_type centred
source_black_outside true
name Roto7
xpos 2820
ypos 2180
}
Read {
inputs 0
file_type exr
file /jobs/flag/PRP/PRP_1600/elements/E_PRP_1600_hanging_tree_v1/2154x1136/E_PRP_1600_hanging_tree_v1.%04d.exr
format "2154 1136 0 0 2154 1136 1 FLAG_working_format"
first 1009
last 1070
origfirst 1009
origlast 1070
origset true
raw true
name Read17
xpos 2311
ypos 2010
addUserKnob {20 Hub}
addUserKnob {52 aovBundleWidget l "" -STARTLINE T mpc.nuke.hubNuke._core.aovBundle.knob.AovBundleWidget()}
}
Expression {
expr0 max(r,g,b,a)
expr1 max(r,g,b,a)
expr2 max(r,g,b,a)
expr3 max(r,g,b,a)
name Expression6
xpos 2311
ypos 2165
}
Group {
name Expon_Blur1
tile_color 0xa5682eff
label "crop \[value crop]"
xpos 2311
ypos 2266
addUserKnob {20 Settings}
addUserKnob {7 Size t "Heading (Blur) filter size \n " R -50 50}
Size -0.8
addUserKnob {26 ""}
addUserKnob {7 Multiplyer R 1 10}
Multiplyer 2
addUserKnob {6 crop l "Crop to format" +STARTLINE}
crop true
}
Input {
 inputs 0
 name Input1
 xpos 290
 ypos -347
}
Dot {
 name Dot2
 xpos 324
 ypos -265
}
set N87bf6400 [stack 0]
Dot {
 name Dot1
 xpos 941
 ypos -265
}
Dot {
 name Dot3
 xpos 941
 ypos 447
}
push $N87bf6400
Invert {
 name Invert1
 xpos 290
 ypos -184
 disable {{"Size >= 0"}}
}
set N87bf7000 [stack 0]
Blur {
 channels rgba
 size {{"Blur3.size * Multiplyer"}}
 crop {{parent.crop}}
 name Blur4
 xpos 821
 ypos -84
}
push $N87bf7000
Blur {
 channels rgba
 size {{"Blur2.size * Multiplyer"}}
 crop {{parent.crop}}
 name Blur3
 xpos 610
 ypos -83
}
push $N87bf7000
Blur {
 channels rgba
 size {{"Blur1.size * Multiplyer"}}
 crop {{parent.crop}}
 name Blur2
 xpos 446
 ypos -85
}
push $N87bf7000
Blur {
 channels rgba
 size {{Size}}
 crop {{parent.crop}}
 name Blur1
 xpos 290
 ypos -85
}
Merge2 {
 inputs 2
 name Merge1
 xpos 290
 ypos 9
}
Merge2 {
 inputs 2
 name Merge2
 xpos 290
 ypos 95
}
Merge2 {
 inputs 2
 name Merge3
 xpos 290
 ypos 202
}
Invert {
 name Invert3
 xpos 290
 ypos 296
 disable {{"Size >= 0"}}
}
Switch {
 inputs 2
 which {{"Size == 0"}}
 name Switch1
 xpos 290
 ypos 443
}
Output {
 name Output1
 selected true
 xpos 290
 ypos 604
}
end_group
set Nf936ec00 [stack 0]
Merge2 {
inputs 2
operation mask
name Merge13
xpos 2820
ypos 2272
}
GodRays {
channels rgba
scale 3.333333333
center {{parent.Position1.translate} {parent.Position1.translate}}
steps 9
name GodRays1
xpos 3005
ypos 2259
}
Grade {
channels rgba
white 4
multiply 1.1
gamma 1.12
white_clamp true
name Grade11
xpos 3005
ypos 2320
}
Roto {
inputs 0
output alpha
cliptype none
curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x4486a000 x440e0000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup Bezier1 512 bezier
     {{cc
       {f 8192}
       {px x44820000
        {xc26c0000 x42aa0000}
        {x449f6000 x4496c000}
        {x426c0000 xc2aa0000}
        {x41f00000 x42300000}
        {x44a78000 x445bc000}
        {xc1f00000 xc2300000}
        {x428e0000 xc2b80000}
        {x4492a000 x445b0000}
        {xc28e0000 x42b80000}
        {xc2300000 xc2800000}
        {x4486e000 x448d0000}
        {x42300000 x42800000}}}     idem}
     {tx x44820000 x44981800 x447f9000}
     {a osw x41200000 osf 0 str 1 spx x4486a000 spy x440e0000 sb 1 ltn x44820000 ltm x44820000 tt x40800000}}}}}}
toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
toolbar_brush_hardness 0.200000003
toolbar_source_transform_scale {1 1}
toolbar_source_transform_center {1077 568}
colorOverlay {0 0 0 0}
lifetime_type "all frames"
lifetime_start 1040
lifetime_end 1040
motionblur_shutter_offset_type centred
source_black_outside true
name Roto13
xpos 2490
ypos 2160
}
Blur {
channels rgba
size 100
name Blur12
xpos 2490
ypos 2222
}
push $Nf936ec00
Merge2 {
inputs 2
operation stencil
name Merge29
xpos 2490
ypos 2272
}
Dot {
name Dot12
xpos 2521
ypos 2514
}
Merge2 {
inputs 2
bbox B
name Merge14
xpos 3005
ypos 2513
}
push $N87ba0400
Merge2 {
inputs 2
operation stencil
bbox B
name Merge31
xpos 3495
ypos 2513
}
Viewer {
frame 55
frame_range 1-100
monitorOutOutputTransform rec709
name Viewer1
xpos -1265
ypos -121
}
Group {
inputs 0
name ScreenEdgeFlare_1
tile_color 0x9fffff
xpos -1597
ypos 615
addUserKnob {20 User}
addUserKnob {3 offset l TimingOffset}
offset -1
addUserKnob {7 edgeR l "Screen Right" R 0 5}
edgeR 1
addUserKnob {7 edgeL l "Screen Left" R 0 5}
edgeL 1
addUserKnob {26 ""}
addUserKnob {14 coresize l CoreSize R 0 100}
coresize {1000 50}
addUserKnob {7 coreweight l CoreWeight R 1 20}
coreweight 2.3
addUserKnob {14 contaminationsize l ContaminationSize R 0 100}
contaminationsize {1200 438}
addUserKnob {7 contaminationweight l ContaminationWeight R 1 20}
contaminationweight 4.9
addUserKnob {26 ""}
addUserKnob {41 range T Keyer3.range}
}
Input {
 inputs 0
 name Input1
 xpos -729
 ypos 280
}
set Nda823800 [stack 0]
Crop {
 box {{Input1.width-edgeR} 0 {Input1.width} {Input1.height}}
 name Crop1
 label "SCREEN RIGHT"
 xpos -624
 ypos 338
}
set Nf944f800 [stack 0]
push $Nda823800
Crop {
 box {0 0 {edgeL} {Input1.height}}
 name Crop2
 label "SCREEN LEFT"
 xpos -820
 ypos 332
}
push $Nf944f800
Merge2 {
 inputs 2
 operation max
 mix {{edgeL>0?1:0}}
 name Max
 xpos -730
 ypos 398
}
Keyer {
 operation "luminance key"
 range {0 0.1462385111 4 4}
 name Keyer3
 xpos -730
 ypos 461
}
Premult {
 name Premult3
 xpos -730
 ypos 522
}
Grade {
 white 56
 black_clamp false
 unpremult -rgba.alpha
 name Grade3
 xpos -730
 ypos 548
}
set Nda75f000 [stack 0]
Group {
 name WeightedBlur_v07_1
 tile_color 0xb6733400
 label CoreBlur
 xpos -649
 ypos 584
 addUserKnob {20 WeightedBlur l "Weighted Blur"}
 addUserKnob {41 channels T this.Copy1.channels}
 addUserKnob {26 ""}
 addUserKnob {14 blurSize l "Blur size" t "Size of the largest blur kernel. All others are smaller." R 0 100}
 blurSize {{this.parent.coresize.w} {this.parent.coresize.h}}
 addUserKnob {7 scale l INVISIBLE t "Size of the smaller blur kernels. i.e. if Blur size = 100, \nand the Recursive scale = 0.5:\nBlur1 = 100,\nBlur2 = 100 * .5 (50)\nBlur3 = 100 * .5 * .5 (25)\netc." +INVISIBLE}
 scale 0.5
 addUserKnob {7 cw l "Center weighting" t "Number of blur kernels to use. Higher number equals greater center weighting.\n" R 1 20}
 cw {{this.parent.coreweight}}
 addUserKnob {6 crop l "crop to format" +STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {41 maskChannel l mask T this.Keymix1.maskChannel}
 addUserKnob {41 invertMask l invert -STARTLINE T this.Keymix1.invertMask}
 addUserKnob {7 mix}
 mix 1
}
 BackdropNode {
  inputs 0
  name BackdropNode2
  tile_color 0x35363a00
  label "Weighted blur"
  note_font_size 20
  xpos 392
  ypos -172
  bdwidth 2425
  bdheight 466
 }
 Input {
  inputs 0
  name Input1
  xpos 909
  ypos -723
 }
 Dot {
  name Dot1
  xpos 943
  ypos -421
 }
set Nda79a000 [stack 0]
 Dot {
  name Dot2
  xpos 3197
  ypos -421
 }
 Dot {
  name Dot3
  xpos 3197
  ypos 356
 }
set Nda79a800 [stack 0]
 Dot {
  name Dot4
  xpos 3197
  ypos 442
 }
set Nda79ac00 [stack 0]
 Dot {
  name Dot5
  xpos 1047
  ypos 442
 }
set Nda79b000 [stack 0]
 Invert {
  name Invert1
  xpos 1013
  ypos 515
 }
push $Nda79b000
 Dot {
  name Dot6
  xpos 953
  ypos 442
 }
push $Nda79a000
 Dot {
  name Dot7
  xpos 943
  ypos -158
 }
set Nda79bc00 [stack 0]
 Blur {
  size {{parent.blurSize.w i} {parent.blurSize.h i}}
  crop {{parent.crop i}}
  name Blur1
  xpos 430
  ypos -101
 }
set Nd79a4000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur1.size.w*parent.scale} {Blur1.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur2
  xpos 538
  ypos -100
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus10
  xpos 538
  ypos -49
 }
set Nd79a4800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur2.size.w*parent.scale} {Blur2.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur3
  xpos 654
  ypos -101
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus11
  xpos 648
  ypos -49
 }
set Nd79a5000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur3.size.w*parent.scale} {Blur3.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur4
  xpos 758
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus12
  xpos 758
  ypos -49
 }
set Nd79a5800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur4.size.w*parent.scale} {Blur4.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur5
  xpos 868
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus13
  xpos 868
  ypos -49
 }
set Nf9486000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur5.size.w*parent.scale} {Blur5.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur6
  xpos 978
  ypos -95
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus14
  xpos 978
  ypos -49
 }
set Nf9486800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur6.size.w*parent.scale} {Blur6.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur7
  xpos 1084
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus1
  xpos 1084
  ypos -49
 }
set Nf9487000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur7.size.w*parent.scale} {Blur7.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur8
  xpos 1201
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus2
  xpos 1201
  ypos -49
 }
set Nf9487800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur8.size.w*parent.scale} {Blur8.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur9
  xpos 1322
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus3
  xpos 1322
  ypos -50
 }
set Nf94c2000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur9.size.w*parent.scale} {Blur9.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur10
  xpos 1445
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus4
  xpos 1445
  ypos -50
 }
set Nf94c2800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur10.size.w*parent.scale i} {Blur10.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur11
  xpos 1559
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus5
  xpos 1559
  ypos -50
 }
set Nf94c3000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur11.size.w*parent.scale i} {Blur11.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur12
  xpos 1667
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus6
  xpos 1667
  ypos -49
 }
set Nf94c3800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur12.size.w*parent.scale i} {Blur12.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur13
  xpos 1782
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus7
  xpos 1782
  ypos -49
 }
set Nf94f8000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur13.size.w*parent.scale i} {Blur13.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur14
  xpos 1890
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus8
  xpos 1890
  ypos -49
 }
set Nf94f8800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur14.size.w*parent.scale i} {Blur14.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur15
  xpos 1998
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus9
  xpos 1998
  ypos -49
 }
set Nf94f9000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur15.size.w*parent.scale i} {Blur15.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur16
  xpos 2101
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus15
  xpos 2101
  ypos -43
 }
set Nf94f9800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur16.size.w*parent.scale i} {Blur16.size.h*parent.scale i}}
  name Blur17
  xpos 2215
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus16
  xpos 2215
  ypos -43
 }
set Nf9536000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur17.size.w*parent.scale i} {Blur17.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur18
  xpos 2326
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus17
  xpos 2326
  ypos -43
 }
set Nf9536800 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur18.size.w*parent.scale i} {Blur18.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur19
  xpos 2436
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus18
  xpos 2436
  ypos -43
 }
set Nf9537000 [stack 0]
push $Nda79bc00
 Blur {
  size {{Blur19.size.w*parent.scale i} {Blur19.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur20
  xpos 2546
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus19
  xpos 2546
  ypos -43
 }
 Multiply {
  value 0.05
  name Multiply14
  xpos 2546
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9537000
 Multiply {
  value 0.0526316
  name Multiply13
  xpos 2436
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9536800
 Multiply {
  value 0.0555556
  name Multiply12
  xpos 2326
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9536000
 Multiply {
  value 0.0588235
  name Multiply11
  xpos 2215
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94f9800
 Multiply {
  value 0.0625
  name Multiply10
  xpos 2101
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94f9000
 Multiply {
  value 0.0666667
  name Multiply9
  xpos 1998
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94f8800
 Multiply {
  value 0.0714286
  name Multiply8
  xpos 1890
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94f8000
 Multiply {
  value 0.0769231
  name Multiply7
  xpos 1782
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94c3800
 Multiply {
  value 0.0833333
  name Multiply6
  xpos 1667
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94c3000
 Multiply {
  value 0.0909091
  name Multiply5
  xpos 1559
  ypos -24
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94c2800
 Multiply {
  value 0.1
  name Multiply4
  xpos 1445
  ypos -24
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf94c2000
 Multiply {
  value 0.111111
  name Multiply3
  xpos 1322
  ypos -24
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9487800
 Multiply {
  value 0.125
  name Multiply2
  xpos 1201
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9487000
 Multiply {
  value 0.142857
  name Multiply1
  xpos 1084
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9486800
 Multiply {
  value 0.166667
  name Multiply18
  xpos 978
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9486000
 Multiply {
  value 0.2
  name Multiply21
  xpos 868
  ypos -18
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 5
 }
push $Nd79a5800
 Multiply {
  value 0.25
  name Multiply20
  xpos 758
  ypos -18
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 4
 }
push $Nd79a5000
 Multiply {
  value 0.333333
  name Multiply19
  xpos 648
  ypos -19
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 3
 }
push 0
push $Nd79a4800
 Multiply {
  value 0.5
  name Multiply22
  xpos 538
  ypos -18
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 2
 }
push $Nd79a4000
 Multiply {
  name Multiply23
  xpos 430
  ypos -19
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 1
 }
 Dissolve {
  inputs 20+1
  which {{parent.cw-1 i}}
  name Dissolve1
  xpos 873
  ypos 178
 }
push $Nda79a800
 Copy {
  inputs 2
  channels rgba
  name Copy1
  xpos 873
  ypos 338
 }
 Keymix {
  inputs 3
  maskChannel none
  name Keymix1
  xpos 873
  ypos 515
 }
push $Nda79ac00
 Dot {
  name Dot8
  xpos 3197
  ypos 610
 }
 Dissolve {
  inputs 2
  which {{parent.mix}}
  name Dissolve2
  xpos 873
  ypos 599
 }
 Output {
  name Output1
  xpos 873
  ypos 704
 }
end_group
push $Nda75f000
Group {
 name WeightedBlur_v07_4
 tile_color 0xb6733400
 label ContaminationBlur
 xpos -851
 ypos 589
 addUserKnob {20 WeightedBlur l "Weighted Blur"}
 addUserKnob {41 channels T this.Copy1.channels}
 addUserKnob {26 ""}
 addUserKnob {14 blurSize l "Blur size" t "Size of the largest blur kernel. All others are smaller." R 0 100}
 blurSize {{this.parent.contaminationsize.w} {this.parent.contaminationsize.h}}
 addUserKnob {7 scale l INVISIBLE t "Size of the smaller blur kernels. i.e. if Blur size = 100, \nand the Recursive scale = 0.5:\nBlur1 = 100,\nBlur2 = 100 * .5 (50)\nBlur3 = 100 * .5 * .5 (25)\netc." +INVISIBLE}
 scale 0.5
 addUserKnob {7 cw l "Center weighting" t "Number of blur kernels to use. Higher number equals greater center weighting.\n" R 1 20}
 cw {{this.parent.contaminationweight}}
 addUserKnob {6 crop l "crop to format" +STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {41 maskChannel l mask T this.Keymix1.maskChannel}
 addUserKnob {41 invertMask l invert -STARTLINE T this.Keymix1.invertMask}
 addUserKnob {7 mix}
 mix 1
}
 BackdropNode {
  inputs 0
  name BackdropNode2
  tile_color 0x35363a00
  label "Weighted blur"
  note_font_size 20
  xpos 392
  ypos -172
  bdwidth 2425
  bdheight 466
 }
 Input {
  inputs 0
  name Input1
  xpos 909
  ypos -723
 }
 Dot {
  name Dot1
  xpos 943
  ypos -421
 }
set Nf960ec00 [stack 0]
 Dot {
  name Dot2
  xpos 3197
  ypos -421
 }
 Dot {
  name Dot3
  xpos 3197
  ypos 356
 }
set Nf960f400 [stack 0]
 Dot {
  name Dot4
  xpos 3197
  ypos 442
 }
set Nf960f800 [stack 0]
 Dot {
  name Dot5
  xpos 1047
  ypos 442
 }
set Nf960fc00 [stack 0]
 Invert {
  name Invert1
  xpos 1013
  ypos 515
 }
push $Nf960fc00
 Dot {
  name Dot6
  xpos 953
  ypos 442
 }
push $Nf960ec00
 Dot {
  name Dot7
  xpos 943
  ypos -158
 }
set Nf962e800 [stack 0]
 Blur {
  size {{parent.blurSize.w i} {parent.blurSize.h i}}
  crop {{parent.crop i}}
  name Blur1
  xpos 430
  ypos -101
 }
set Nf962ec00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur1.size.w*parent.scale} {Blur1.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur2
  xpos 538
  ypos -100
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus10
  xpos 538
  ypos -49
 }
set Nf962f400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur2.size.w*parent.scale} {Blur2.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur3
  xpos 654
  ypos -101
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus11
  xpos 648
  ypos -49
 }
set Nf962fc00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur3.size.w*parent.scale} {Blur3.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur4
  xpos 758
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus12
  xpos 758
  ypos -49
 }
set Nf9660400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur4.size.w*parent.scale} {Blur4.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur5
  xpos 868
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus13
  xpos 868
  ypos -49
 }
set Nf9660c00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur5.size.w*parent.scale} {Blur5.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur6
  xpos 978
  ypos -95
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus14
  xpos 978
  ypos -49
 }
set Nf9661400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur6.size.w*parent.scale} {Blur6.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur7
  xpos 1084
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus1
  xpos 1084
  ypos -49
 }
set Nf9661c00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur7.size.w*parent.scale} {Blur7.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur8
  xpos 1201
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus2
  xpos 1201
  ypos -49
 }
set Nf969a400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur8.size.w*parent.scale} {Blur8.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur9
  xpos 1322
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus3
  xpos 1322
  ypos -50
 }
set Nf969ac00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur9.size.w*parent.scale} {Blur9.size.h*parent.scale}}
  crop {{parent.crop}}
  name Blur10
  xpos 1445
  ypos -97
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus4
  xpos 1445
  ypos -50
 }
set Nf969b400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur10.size.w*parent.scale i} {Blur10.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur11
  xpos 1559
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus5
  xpos 1559
  ypos -50
 }
set Nf969bc00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur11.size.w*parent.scale i} {Blur11.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur12
  xpos 1667
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus6
  xpos 1667
  ypos -49
 }
set Nf96d8400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur12.size.w*parent.scale i} {Blur12.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur13
  xpos 1782
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus7
  xpos 1782
  ypos -49
 }
set Nf96d8c00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur13.size.w*parent.scale i} {Blur13.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur14
  xpos 1890
  ypos -94
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus8
  xpos 1890
  ypos -49
 }
set Nf96d9400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur14.size.w*parent.scale i} {Blur14.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur15
  xpos 1998
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus9
  xpos 1998
  ypos -49
 }
set Nf96d9c00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur15.size.w*parent.scale i} {Blur15.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur16
  xpos 2101
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus15
  xpos 2101
  ypos -43
 }
set Nf9712400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur16.size.w*parent.scale i} {Blur16.size.h*parent.scale i}}
  name Blur17
  xpos 2215
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus16
  xpos 2215
  ypos -43
 }
set Nf9712c00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur17.size.w*parent.scale i} {Blur17.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur18
  xpos 2326
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus17
  xpos 2326
  ypos -43
 }
set Nf9713400 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur18.size.w*parent.scale i} {Blur18.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur19
  xpos 2436
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus18
  xpos 2436
  ypos -43
 }
set Nf9713c00 [stack 0]
push $Nf962e800
 Blur {
  size {{Blur19.size.w*parent.scale i} {Blur19.size.h*parent.scale i}}
  crop {{parent.crop i}}
  name Blur20
  xpos 2546
  ypos -96
 }
 Merge {
  inputs 2
  operation plus
  also_merge all
  name Plus19
  xpos 2546
  ypos -43
 }
 Multiply {
  value 0.05
  name Multiply14
  xpos 2546
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9713c00
 Multiply {
  value 0.0526316
  name Multiply13
  xpos 2436
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9713400
 Multiply {
  value 0.0555556
  name Multiply12
  xpos 2326
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9712c00
 Multiply {
  value 0.0588235
  name Multiply11
  xpos 2215
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9712400
 Multiply {
  value 0.0625
  name Multiply10
  xpos 2101
  ypos -17
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf96d9c00
 Multiply {
  value 0.0666667
  name Multiply9
  xpos 1998
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf96d9400
 Multiply {
  value 0.0714286
  name Multiply8
  xpos 1890
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf96d8c00
 Multiply {
  value 0.0769231
  name Multiply7
  xpos 1782
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf96d8400
 Multiply {
  value 0.0833333
  name Multiply6
  xpos 1667
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf969bc00
 Multiply {
  value 0.0909091
  name Multiply5
  xpos 1559
  ypos -24
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf969b400
 Multiply {
  value 0.1
  name Multiply4
  xpos 1445
  ypos -24
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf969ac00
 Multiply {
  value 0.111111
  name Multiply3
  xpos 1322
  ypos -24
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf969a400
 Multiply {
  value 0.125
  name Multiply2
  xpos 1201
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9661c00
 Multiply {
  value 0.142857
  name Multiply1
  xpos 1084
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9661400
 Multiply {
  value 0.166667
  name Multiply18
  xpos 978
  ypos -23
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 6
 }
push $Nf9660c00
 Multiply {
  value 0.2
  name Multiply21
  xpos 868
  ypos -18
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 5
 }
push $Nf9660400
 Multiply {
  value 0.25
  name Multiply20
  xpos 758
  ypos -18
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 4
 }
push $Nf962fc00
 Multiply {
  value 0.333333
  name Multiply19
  xpos 648
  ypos -19
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 3
 }
push 0
push $Nf962f400
 Multiply {
  value 0.5
  name Multiply22
  xpos 538
  ypos -18
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 2
 }
push $Nf962ec00
 Multiply {
  name Multiply23
  xpos 430
  ypos -19
  addUserKnob {20 User}
  addUserKnob {7 numInputs}
  numInputs 1
 }
 Dissolve {
  inputs 20+1
  which {{parent.cw-1 i}}
  name Dissolve1
  xpos 873
  ypos 178
 }
push $Nf960f400
 Copy {
  inputs 2
  channels rgba
  name Copy1
  xpos 873
  ypos 338
 }
 Keymix {
  inputs 3
  maskChannel none
  name Keymix1
  xpos 873
  ypos 515
 }
push $Nf960f800
 Dot {
  name Dot8
  xpos 3197
  ypos 610
 }
 Dissolve {
  inputs 2
  which {{parent.mix}}
  name Dissolve2
  xpos 873
  ypos 599
 }
 Output {
  name Output1
  xpos 873
  ypos 704
 }
end_group
Merge2 {
 inputs 2
 operation plus
 name Plus1
 xpos -730
 ypos 636
}
TimeOffset {
 time_offset {{offset}}
 time ""
 name TimeOffset6
 label "\[value time_offset] frames\norig: \[expression \[value frame]-\[value time_offset]]"
 xpos -730
 ypos 675
}
set Nf936e680 [stack 0]
Output {
 name Output1
 xpos -730
 ypos 770
}
Viewer {
 inputs 2
 center_fstop 0
 input_process false
 name Viewer1
 xpos -406
 ypos 460
}
push $Nf936e680
Transform {
 center {1024 576}
 shutteroffset centred
 name Transform1
 xpos -620
 ypos 677
}
end_group
NoOp {
inputs 0
name MissingPathChecker
tile_color 0xff3a00ff
label PATHCHECKER
note_font_size 50
xpos -1761
ypos 275
hide_input true
addUserKnob {20 User}
addUserKnob {22 beauty_path l "Beauty path" T "nodes = nuke.selectedNodes()\nmissing_paths = \[]\n\nfor node in nodes:\n    path=node\['file'].value()\n    path_split = path.split('/')\n    missing_path = '/'.join(path_split)\n    missing_paths.append(missing_path)\n    print (missing_path)\n    \nprint(missing_paths)\n\nnote = nuke.createNode('StickyNote')\nnote\['label'].setValue('\\n'.join(map(str, missing_paths)))" +STARTLINE}
addUserKnob {22 deep_path l "Deep path" T "nodes = nuke.selectedNodes()\nmissing_paths = \[]\n\nfor node in nodes:\n    path=node\['file'].value()\n    path_split = path.split('/')\n    missing_path = '/'.join(path_split\[:-2])\n    missing_paths.append(missing_path)\n    print (missing_path)\n    \nprint(missing_paths)\n\nnote = nuke.createNode('StickyNote')\nnote\['label'].setValue('\\n'.join(map(str, missing_paths)))" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {26 nfo l "" +STARTLINE T "Alpha v1.0\nFer. 2022"}
}
Group {
inputs 0
name SimpleLens_v11_v2
tile_color 0x3f7f3fff
xpos -1249
ypos 643
addUserKnob {20 SimpleLens}
addUserKnob {4 Select M {"Apply through alpha" "Apply to whole image" "" "" "" "" ""}}
Select "Apply to whole image"
addUserKnob {26 ""}
addUserKnob {20 OpitcalEffects n 1}
addUserKnob {26 ""}
addUserKnob {26 DiffractionDiffusion l "" +STARTLINE T Diffraction/Diffusion}
addUserKnob {6 Enable_2 l Enable +STARTLINE}
Enable_2 true
addUserKnob {7 Amount}
addUserKnob {7 Spread_2 l Spread}
Spread_2 1
addUserKnob {26 ""}
addUserKnob {26 Bloom l "" +STARTLINE T Bloom}
addUserKnob {6 Enable_3 l Enable +STARTLINE}
Enable_3 true
addUserKnob {7 Amount_2 l Amount}
Amount_2 0.73
addUserKnob {7 Spread}
Spread 0.945
addUserKnob {7 Threshold}
addUserKnob {20 endGroup_2 l endGroup n -1}
addUserKnob {26 ""}
addUserKnob {20 Vignette n 1}
addUserKnob {6 Enable +STARTLINE}
addUserKnob {7 Darkness}
Darkness 0.1
addUserKnob {7 Size}
Size 0.5
addUserKnob {7 Softness}
Softness 0.5
addUserKnob {6 IgnoreAlphaMask +STARTLINE}
IgnoreAlphaMask true
addUserKnob {20 endGroup n -1}
addUserKnob {26 ""}
addUserKnob {20 ChromicAbberation n 1}
addUserKnob {6 Enable_1 l Enable +STARTLINE}
addUserKnob {7 Red R -0.5 0.5}
Red 0.2
addUserKnob {7 Green R -0.5 0.5}
addUserKnob {7 Blue R -0.5 0.5}
Blue -0.2
addUserKnob {20 endGroup_1 l endGroup n -1}
addUserKnob {26 ""}
addUserKnob {20 Utility n 1}
addUserKnob {7 EdgeBlur R 0 5}
addUserKnob {7 MaxClamp R 0 55}
MaxClamp 55
addUserKnob {7 AdjBBox R 0 500}
AdjBBox 50
addUserKnob {20 endGroup_3 l endGroup n -1}
addUserKnob {26 ""}
addUserKnob {7 Mix}
Mix 1
}
BackdropNode {
 inputs 0
 name BackdropNode1
 label Bloom
 note_font_size 40
 xpos -531
 ypos 837
 bdwidth 382
 bdheight 473
}
BackdropNode {
 inputs 0
 name BackdropNode2
 label Diffuse
 note_font_size 40
 xpos -527
 ypos -82
 bdwidth 376
 bdheight 805
}
BackdropNode {
 inputs 0
 name BackdropNode3
 label "Chromic Abberation"
 note_font_size 40
 xpos -530
 ypos 2196
 bdwidth 381
 bdheight 494
}
BackdropNode {
 inputs 0
 name BackdropNode5
 label Vignette
 note_font_size 40
 xpos -528
 ypos 1665
 bdwidth 376
 bdheight 459
}
Input {
 inputs 0
 name Input
 xpos -282
 ypos -553
}
Dot {
 name Dot1
 xpos -248
 ypos -442
}
set N3a227000 [stack 0]
Crop {
 box {-170 -355 3070 2550}
 name Crop1
 label "\[value box]"
 xpos -282
 ypos -400
}
Remove {
 operation keep
 channels rgba
 name Remove1
 xpos -282
 ypos -347
}
Clamp {
 channels rgba
 maximum {{parent.MaxClamp}}
 name Clamp2
 xpos -282
 ypos -302
}
Dot {
 name Dot2
 xpos -248
 ypos -244
}
set N102f0000 [stack 0]
Dot {
 name Dot11
 xpos 87
 ypos -244
}
Dot {
 name Dot52
 xpos 86
 ypos 755
}
set N102f0800 [stack 0]
Dot {
 name Dot37
 xpos 86
 ypos 792
}
set N102f0c00 [stack 0]
Dot {
 name Dot13
 xpos 88
 ypos 1389
}
set N102f1000 [stack 0]
Dot {
 name Dot4
 xpos 88
 ypos 1456
}
set N102f1400 [stack 0]
Dot {
 name Dot12
 xpos 88
 ypos 1536
}
set N102f1800 [stack 0]
Dot {
 name Dot34
 xpos 89
 ypos 1622
}
set N102f1c00 [stack 0]
Dot {
 name Dot30
 xpos 89
 ypos 1996
}
set N3859e000 [stack 0]
Dot {
 name Dot3
 xpos 89
 ypos 2559
}
set N3859e400 [stack 0]
Dot {
 name Dot40
 xpos 89
 ypos 2732
}
Constant {
 inputs 0
 channels alpha
 color 1
 name Constant4
 xpos -51
 ypos 1908
}
push $N3859e000
Switch {
 inputs 2
 which {{parent.Select}}
 name Switch5
 xpos -51
 ypos 1992
}
Radial {
 inputs 0
 area {0 0 {width} {height}}
 softness 0
 name Radial1
 xpos -425
 ypos 1756
}
Transform {
 scale {{parent.Size+0.5}}
 center {1049 612}
 name Transform1
 xpos -425
 ypos 1782
}
Invert {
 channels rgba
 name Invert2
 xpos -425
 ypos 1808
}
Blur {
 channels rgba
 size {{parent.Softness*1000}}
 name Blur13
 xpos -425
 ypos 1834
}
Reformat {
 name Reformat5
 xpos -425
 ypos 1860
}
Merge2 {
 inputs 2
 operation mask
 name Merge5
 xpos -425
 ypos 1992
 disable {{parent.IgnoreAlphaMask x1083 1}}
}
Constant {
 inputs 0
 channels alpha
 name Constant1
 xpos -520
 ypos 1898
}
Dot {
 name Dot27
 xpos -486
 ypos 2040
}
Switch {
 inputs 2
 which {{parent.Enable}}
 name Switch8
 xpos -425
 ypos 2036
}
Dot {
 name Dot23
 xpos -391
 ypos 2081
}
push $N102f1c00
push $N102f1000
Dot {
 name Dot15
 xpos -28
 ypos 1389
}
set N27c2e000 [stack 0]
push $N102f0800
push $N102f0000
Shuffle {
 alpha white
 name Shuffle1
 xpos -282
 ypos -168
}
Dot {
 name Dot35
 xpos -248
 ypos 7
}
set N27c2e800 [stack 0]
Dot {
 name Dot45
 xpos -460
 ypos 7
}
Dot {
 name Dot47
 xpos -460
 ypos 102
}
set N27c2f000 [stack 0]
Dot {
 name Dot44
 xpos -460
 ypos 171
}
set N27c2f400 [stack 0]
Dot {
 name Dot43
 xpos -460
 ypos 244
}
set N27c2f800 [stack 0]
Dot {
 name Dot42
 xpos -460
 ypos 319
}
set N27c2fc00 [stack 0]
Dot {
 name Dot41
 xpos -460
 ypos 393
}
set N2c5ee000 [stack 0]
Dot {
 name Dot46
 xpos -460
 ypos 466
}
set N2c5ee400 [stack 0]
Dot {
 name Dot48
 xpos -460
 ypos 544
}
set N2c5ee800 [stack 0]
Dot {
 name Dot49
 xpos -460
 ypos 619
}
set N2c5eec00 [stack 0]
Blur {
 channels rgba
 size {{parent.Multiply1.value*256}}
 name Blur8
 xpos -392
 ypos 615
}
push $N2c5ee800
Blur {
 channels rgba
 size {{parent.Multiply1.value*128}}
 name Blur7
 xpos -392
 ypos 540
}
push $N2c5ee400
Blur {
 channels rgba
 size {{parent.Multiply1.value*64}}
 name Blur5
 xpos -392
 ypos 462
}
push $N2c5ee000
Blur {
 channels rgba
 size {{parent.Multiply1.value*32}}
 name Blur4
 xpos -392
 ypos 389
}
push $N27c2fc00
Blur {
 channels rgba
 size {{parent.Multiply1.value*16}}
 name Blur17
 xpos -392
 ypos 315
}
push $N27c2f800
Blur {
 channels rgba
 size {{parent.Multiply1.value*8}}
 name Blur2
 xpos -392
 ypos 240
}
push $N27c2f400
Blur {
 channels rgba
 size {{parent.Multiply1.value*4}}
 name Blur3
 xpos -392
 ypos 167
}
push $N27c2f000
Blur {
 channels rgba
 size {{parent.Multiply1.value*2}}
 name Blur6
 xpos -392
 ypos 98
}
push $N27c2e800
Blur {
 channels rgba
 size {{parent.Multiply1.value*1}}
 name Blur10
 xpos -282
 ypos 42
}
Dissolve {
 inputs 2
 which 0.5
 name Dissolve2
 xpos -282
 ypos 92
}
Dissolve {
 inputs 2
 which 0.25
 name Dissolve3
 xpos -282
 ypos 161
}
Dissolve {
 inputs 2
 which 0.125
 name Dissolve4
 xpos -282
 ypos 234
}
Dissolve {
 inputs 2
 which 0.0625
 name Dissolve5
 xpos -282
 ypos 309
}
Dissolve {
 inputs 2
 which 0.03125
 name Dissolve6
 xpos -282
 ypos 383
}
Dissolve {
 inputs 2
 which 0.015625
 name Dissolve7
 xpos -282
 ypos 456
}
Dissolve {
 inputs 2
 which 0.0078125
 name Dissolve8
 xpos -282
 ypos 534
}
Dissolve {
 inputs 2
 which 0.00390625
 name Dissolve9
 xpos -282
 ypos 609
}
push $N2c5eec00
Dot {
 name Dot51
 xpos -460
 ypos 690
}
Dissolve {
 inputs 2
 which {{parent.Amount}}
 name Dissolve10
 xpos -282
 ypos 680
}
CopyBBox {
 inputs 2
 name CopyBBox3
 xpos -282
 ypos 751
}
push $N102f0c00
Shuffle {
 alpha white
 name Shuffle2
 xpos -109
 ypos 788
}
Switch {
 inputs 2
 which {{parent.Enable_2}}
 name Switch2
 xpos -282
 ypos 788
}
Dot {
 name Dot5
 xpos -248
 ypos 892
}
set N244da800 [stack 0]
Dot {
 name Dot6
 xpos -344
 ypos 892
}
Keyer {
 operation "luminance key"
 range {{parent.Threshold*5} {parent.Threshold*5+1} 10 10}
 name Keyer1
 xpos -378
 ypos 917
}
Premult {
 name Premult1
 xpos -378
 ypos 955
}
Dot {
 name Dot7
 xpos -344
 ypos 985
}
set N244db800 [stack 0]
Dot {
 name Dot8
 xpos -518
 ypos 985
}
Dot {
 name Dot50
 xpos -518
 ypos 1056
}
set N36f28000 [stack 0]
Dot {
 name Dot9
 xpos -518
 ypos 1082
}
Blur {
 channels rgba
 size {{parent.Spread*500}}
 name Blur11
 xpos -488
 ypos 1078
}
push $N36f28000
Blur {
 channels rgba
 size {{parent.Spread*250}}
 name Blur12
 xpos -488
 ypos 1052
}
push $N244db800
Blur {
 channels rgba
 size {{parent.Spread*125}}
 name Blur1
 xpos -378
 ypos 1026
}
Merge2 {
 inputs 2
 operation plus
 name Merge1
 xpos -378
 ypos 1052
}
Merge2 {
 inputs 2
 operation plus
 name Merge2
 xpos -378
 ypos 1078
}
Multiply {
 value 0.25
 name Multiply3
 xpos -378
 ypos 1133
}
Multiply {
 channels rgba
 value {{parent.Amount_2}}
 name Multiply2
 xpos -378
 ypos 1181
}
Constant {
 inputs 0
 channels alpha
 name Constant5
 xpos -497
 ypos 1124
}
Dot {
 name Dot21
 xpos -463
 ypos 1211
}
Switch {
 inputs 2
 which {{parent.Enable_3}}
 name Switch6
 xpos -378
 ypos 1207
}
Dot {
 name Dot10
 xpos -344
 ypos 1243
}
push $N244da800
Merge2 {
 inputs 2
 operation plus
 output {rgba.red rgba.green rgba.blue -rgba.alpha}
 name Merge3
 xpos -282
 ypos 1239
}
CopyBBox {
 inputs 2
 name CopyBBox2
 xpos -282
 ypos 1385
}
Dot {
 name Dot14
 xpos -247
 ypos 1456
}
set N360a3c00 [stack 0]
push $N102f1800
push $N27c2e000
push $N360a3c00
push $N102f1400
Keymix {
 inputs 3
 channels rgba
 name Keymix1
 xpos -62
 ypos 1452
}
ShuffleCopy {
 inputs 2
 name ShuffleCopy1
 xpos -62
 ypos 1532
}
EdgeBlur {
 channels rgba
 size {{parent.EdgeBlur}}
 name EdgeBlur1
 xpos -172
 ypos 1526
}
Switch {
 inputs 2
 which {{parent.Select}}
 name Switch1
 xpos -281
 ypos 1532
}
CopyBBox {
 inputs 2
 name CopyBBox4
 xpos -281
 ypos 1618
}
Grade {
 inputs 1+1
 white 0
 mix {{parent.Darkness}}
 name Grade1
 xpos -281
 ypos 2077
}
Dot {
 name Dot24
 xpos -247
 ypos 2299
}
set N2d655800 [stack 0]
Dot {
 name Dot25
 xpos -391
 ypos 2299
}
set N2d655c00 [stack 0]
Dot {
 name Dot39
 xpos -530
 ypos 2299
}
Dot {
 name Dot36
 xpos -530
 ypos 2585
}
set N10298400 [stack 0]
Dot {
 name Dot38
 xpos -530
 ypos 2623
}
push $N3859e400
Dilate {
 channels rgba
 size -2
 name Dilate1
 xpos -228
 ypos 2555
}
Blur {
 channels rgba
 size 1
 name Blur18
 xpos -228
 ypos 2581
}
push $N10298400
push $N2d655c00
Dot {
 name Dot16
 xpos -391
 ypos 2361
}
set N10299400 [stack 0]
Shuffle {
 red black
 green black
 name Shuffle5
 xpos -337
 ypos 2413
}
Transform {
 scale {{parent.Blue/500+1}}
 center {{width/2} {height/2}}
 name TransformBlue
 xpos -337
 ypos 2439
}
push 0
push $N10299400
Shuffle {
 red black
 blue black
 name Shuffle6
 xpos -425
 ypos 2413
}
Transform {
 scale {{parent.Green/500+1}}
 center {{width/2} {height/2}}
 name TransformGreen
 xpos -425
 ypos 2439
}
push $N10299400
Shuffle {
 green black
 blue black
 name Shuffle4
 xpos -513
 ypos 2414
}
Transform {
 scale {{parent.Red/500+1}}
 center {{width/2} {height/2}}
 name TransformRed
 xpos -513
 ypos 2440
}
Merge2 {
 inputs 3+1
 operation max
 name Merge10
 xpos -425
 ypos 2517
}
Keymix {
 inputs 3
 channels rgba
 invertMask true
 name Keymix2
 xpos -425
 ypos 2581
 disable {{parent.Select x1055 1}}
}
ShuffleCopy {
 inputs 2
 name ShuffleCopy2
 xpos -425
 ypos 2619
}
Dot {
 name Dot18
 xpos -391
 ypos 2655
}
push $N2d655800
Switch {
 inputs 2
 which {{parent.Enable_1}}
 name Switch3
 xpos -281
 ypos 2651
}
CopyBBox {
 inputs 2
 name CopyBBox1
 xpos -281
 ypos 2728
}
Clamp {
 channels rgb
 maximum {{parent.MaxClamp}}
 name Clamp3
 xpos -281
 ypos 2951
}
push $N3a227000
Dot {
 name Dot22
 xpos 325
 ypos -442
}
Dot {
 name Dot17
 xpos 326
 ypos 3038
}
Dissolve {
 inputs 2
 which {{parent.Mix}}
 name Dissolve1
 xpos -281
 ypos 3028
}
Output {
 name Output1
 xpos -281
 ypos 3184
}
Multiply {
 inputs 0
 value {{parent.Spread_2}}
 name Multiply1
 xpos -394
 ypos -42
}
end_group
Switch {
inputs 0
which {{"\[python -execlocal if\\ \\ nuke.thisNode().input(0).error()\\ ==\\ 1\\ \\ or\\ nuke.thisNode().input(0).Class()\\ ==\\ 'NoOp':\\n\\ \\ \\ \\ ret\\ =\\ 1\\nelse:\\n\\ \\ \\ \\ ret\\ =\\ 0\\n\\n]"}}
name SwitchOnError26
xpos -2081
ypos 978
}
Group {
inputs 0
name Pin_Time
tile_color 0xe5c155ff
xpos -1553
ypos 1142
addUserKnob {20 User l Pin}
addUserKnob {3 source l "source input"}
source 1006
addUserKnob {3 target l "target input"}
target 1042
addUserKnob {3 speed}
speed 1
addUserKnob {41 filter T TimeWarp1.filter}
addUserKnob {26 omar l "" +STARTLINE T "\n\n\n\nOG"}
}
Input {
 inputs 0
 name Input1
 xpos -589
 ypos 350
}
TimeWarp {
 lookup {{parent.source+(frame-parent.target)*parent.speed C x1017 1017 x1420 1420}}
 time ""
 name TimeWarp1
 xpos -589
 ypos 390
}
Output {
 name Output1
 xpos -589
 ypos 490
}
end_group
Group {
inputs 0
name Organic_edges
note_font "Bitstream Vera Sans"
xpos -1442
ypos 894
addUserKnob {20 User l Organic_edges}
addUserKnob {41 size_2 l size T Noise1.size}
addUserKnob {41 zoffset l seed T Noise1.zoffset}
addUserKnob {41 uv_scale l distortion T IDistort1.uv_scale}
addUserKnob {41 uv_offset l offset T IDistort1.uv_offset}
addUserKnob {26 ""}
addUserKnob {41 size l erode T FilterErode1.size}
addUserKnob {41 size_1 l blur T Blur1.size}
}
Input {
 inputs 0
 name Input1
 selected true
 xpos -379
 ypos -27
}
Dot {
 name Dot1
 selected true
 xpos -345
 ypos 70
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID 166c4e0e-9a52-11e7-8c48-c86000cb725f
}
set N3260d400 [stack 0]
Shuffle {
 in2 rgba
 red black
 green black
 blue black
 alpha black
 name Shuffle1
 selected true
 xpos -379
 ypos 153
}
set N3260d800 [stack 0]
Noise {
 output {rgba.red -rgba.green -rgba.blue -rgba.alpha}
 replace true
 size {{Noise1.size*-1}}
 zoffset {{Noise1.zoffset*-1}}
 center {1024 778}
 name Noise2
 selected true
 xpos -328
 ypos 233
}
set N3260dc00 [stack 0]
push $N3260dc00
push $N3260d800
Noise {
 output {-rgba.red rgba.green -rgba.blue -rgba.alpha}
 size 6.6
 zoffset 2.46
 lacunarity 1.5
 center {960 540}
 name Noise1
 selected true
 xpos -452
 ypos 236
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID bca515a8-9a43-11e7-8c48-c86000cb725f
}
Merge2 {
 inputs 2
 operation plus
 name Merge1
 selected true
 xpos -375
 ypos 284
 addUserKnob {20 Blending_Mode}
 addUserKnob {22 over T "nuke.thisNode()\['operation'].setValue('over')" +STARTLINE}
 addUserKnob {22 under -STARTLINE T "nuke.thisNode()\['operation'].setValue('under')"}
 addUserKnob {22 multiply T "nuke.thisNode()\['operation'].setValue('multiply')" +STARTLINE}
 addUserKnob {22 stencil -STARTLINE T "nuke.thisNode()\['operation'].setValue('stencil')"}
 addUserKnob {22 min T "nuke.thisNode()\['operation'].setValue('min')" +STARTLINE}
 addUserKnob {22 max -STARTLINE T "nuke.thisNode()\['operation'].setValue('max')"}
 addUserKnob {22 minus T "nuke.thisNode()\['operation'].setValue('minus')" +STARTLINE}
 addUserKnob {22 plus -STARTLINE T "nuke.thisNode()\['operation'].setValue('plus')"}
 addUserKnob {22 screen T "nuke.thisNode()\['operation'].setValue('screen')" +STARTLINE}
 addUserKnob {22 overlay -STARTLINE T "nuke.thisNode()\['operation'].setValue('overlay')"}
 addUserKnob {22 atop T "nuke.thisNode()\['operation'].setValue('atop')" +STARTLINE}
 addUserKnob {22 geometric -STARTLINE T "nuke.thisNode()\['operation'].setValue('geometric')"}
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID 09e1e8b4-9a44-11e7-8c48-c86000cb725f
}
Shuffle {
 out forward
 name Shuffle2
 selected true
 xpos -375
 ypos 376
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID 2e7d4272-9a44-11e7-8c48-c86000cb725f
}
push $N3260d400
Dot {
 name Dot2
 selected true
 xpos -65
 ypos 70
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID 17bf5864-9a52-11e7-8c48-c86000cb725f
}
FilterErode {
 channels alpha
 size -11.5
 name FilterErode1
 selected true
 xpos -99
 ypos 448
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID 40fc0f32-9a44-11e7-8c48-c86000cb725f
}
Copy {
 inputs 2
 from0 -rgba.alpha
 to0 -rgba.alpha
 channels forward
 name Copy1
 selected true
 xpos -375
 ypos 442
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID 4e108f04-9a44-11e7-8c48-c86000cb725f
}
IDistort {
 channels alpha
 uv forward
 uv_offset 0.15
 uv_scale 9.6
 filter Mitchell
 name IDistort1
 selected true
 xpos -375
 ypos 550
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID fdbccffe-9a43-11e7-8c48-c86000cb725f
}
Blur {
 channels alpha
 name Blur1
 selected true
 xpos -375
 ypos 642
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID eacfa0a0-9a44-11e7-8c48-c86000cb725f
}
Output {
 name Output1
 selected true
 xpos -375
 ypos 759
}
Viewer {
 inputs 2
 frame 1067
 frame_range 1017-1172
 name Viewer1
 xpos -772
 ypos 600
 addUserKnob {20 vgas l Vgas +INVISIBLE}
 addUserKnob {1 nativeUID +DISABLED}
 nativeUID d6b0a8fe-9a43-11e7-8c48-c86000cb725f
}
end_group
Group {
inputs 0
name LayerLabels1
tile_color 0x9e3c63ff
xpos -1134
ypos 1103
addUserKnob {20 layerLabelsTab l LayerLabels}
addUserKnob {41 font T Controller1.font}
addUserKnob {26 ""}
addUserKnob {41 xjustify l justify T Controller1.xjustify}
addUserKnob {41 yjustify l "" -STARTLINE T Controller1.yjustify}
addUserKnob {41 margin -STARTLINE T Controller1.margin}
addUserKnob {41 size T Controller1.size}
addUserKnob {41 kerning T Controller1.kerning}
addUserKnob {26 ""}
addUserKnob {41 color T Controller1.color}
addUserKnob {41 opacity l mix T Controller1.opacity}
addUserKnob {26 ""}
addUserKnob {22 update l "   update layers   " T "def layerLabels():\n    \n    node = nuke.thisNode()\n\n    with node:\n    \n        controllerNodeName = 'Controller1'\n    \n        controllerNode = nuke.toNode(controllerNodeName)\n        inputNode = nuke.toNode('Input')\n        outputNode = nuke.toNode('Output1')\n\n        # delete nodes that are not part of the default setup\n        for node in nuke.allNodes():\n            node.knob('selected').setValue(False)\n            if node not in \[controllerNode, inputNode, outputNode]:\n                nuke.delete(node)\n\n        controllerNode.knob('selected').setValue(True)\n    \n        # knobs to link\n        knobs = \['color',\n                    'size',\n                    'xjustify',\n                    'yjustify',\n                    'kerning',\n                    'opacity',\n                    'font'\n                    ]\n\n        stringKnobs = \[nuke.File_Knob,\n                        nuke.EvalString_Knob,\n                        nuke.Multiline_Eval_String_Knob\n                        ]\n        #layers\n        layers = list(set(\[c.split('.')\[0] for c in node.channels()]))  \n\n        if layers:\n          # make textnode per layer\n          for layer in layers:  \n      \n              # create\n              textNode = nuke.createNode('Text', inpanel = False)\n              \n              # position\n              posKnob = textNode.knob('ypos')\n              posKnob.setValue(posKnob.value() + 50)\n              \n              # knobs\n              textNode.knob('output').setValue(layer)\n              textNode.knob('message').setValue('\[value output]')\n              textNode.knob('color').setSingleValue(False)\n              \n              # box\n              marginExpression = '.'.join(\[controllerNodeName, 'margin'])\n              textNode.knob('box').setExpression(marginExpression, 0)\n              textNode.knob('box').setExpression(marginExpression, 1)\n              textNode.knob('box').setExpression('width - \{\}'.format(marginExpression) , 2)\n              textNode.knob('box').setExpression('height - \{\}'.format(marginExpression), 3)\n\n              # knobs\n              for knobName in knobs:\n              \n                  childKnob = textNode.knob(knobName)\n                  parentKnob = controllerNode.knob(knobName)\n              \n                  if not all(\[parentKnob, childKnob]):\n                      continue\n                  \n                  expression = parentKnob.fullyQualifiedName().split('.', 1)\[-1]\n              \n                  # check for string knobs, if so set tcl expression instead\n                  if type(childKnob) not in stringKnobs:\n                      childKnob.setExpression(expression)\n                      if knobName == 'yjustify':\n                          childKnob.setExpression(expression + '+1')\n                  \n                  else:\n                      childKnob.setValue('\[value \{\}]'.format(expression))\n\n              \n              \n          textNode.knob('selected').setValue(False)\n          outputNode.knob('ypos').setValue(textNode.knob('ypos').value() + 10)\n\nlayerLabels()" +STARTLINE}
addUserKnob {26 WouterGilsing l INVISIBLE +INVISIBLE}
}
Input {
 inputs 0
 name Input
 xpos 206
 ypos -287
}
NoOp {
 name Controller1
 xpos 206
 ypos -243
 addUserKnob {20 controllerTab l Controller}
 addUserKnob {2 font}
 font /usr/share/fonts/bitstream-vera/Vera.ttf
 addUserKnob {7 size R 0 100}
 size 70
 addUserKnob {7 kerning}
 addUserKnob {3 margin}
 margin 50
 addUserKnob {4 xjustify l justify M {left center right}}
 xjustify center
 addUserKnob {4 yjustify l "" -STARTLINE M {top center bottom ""}}
 yjustify bottom
 addUserKnob {18 color}
 color {1 1 1}
 addUserKnob {6 color_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 opacity}
 opacity 1
}
Output {
 name Output1
 xpos 206
 ypos 60
}
end_group
Group {
inputs 0
name GodRaysProjector
tile_color 0xcc804eff
selected true
xpos -3352
ypos 346
addUserKnob {20 GodRaysProjector}
addUserKnob {41 "Local GPU: " T BlinkScript2.gpuName}
addUserKnob {41 "Use GPU if Available" T BlinkScript2.useGPUIfAvailable}
addUserKnob {41 vectorize l "Vectorize on CPU" -STARTLINE T BlinkScript2.vectorize}
addUserKnob {26 gpuPreviewOnly l "" -STARTLINE T "(GPU should be used for preview only)"}
addUserKnob {26 ""}
addUserKnob {4 deepOutput l output M {RGBA Deep}}
addUserKnob {41 BlinkPositionProject_iterations l steps T BlinkScript2.BlinkPositionProject_iterations}
addUserKnob {22 projectImageSetup l "Project Image Setup" T "nuke.root().end()\n\ncardNode = nuke.nodes.Card2()\n\nGodRayNode = nuke.selectedNode()\n\n\nprint GodRayNode.input(2).name()\nprojCamNode = GodRayNode.input(2)\nprojCamName = GodRayNode.input(2).name()\n\nrenderCamNode = GodRayNode.input(1)\n\ncardNode\['z'].setExpression(GodRayNode.name()+'.BlinkScript2.BlinkPositionProject_ZMin')\ncardNode\['lens_in_focal'].setExpression(projCamName+'.focal')\ncardNode\['lens_in_haperture'].setExpression(projCamName+'.haperture')\ncardNode\['useMatrix'].setValue(1)\ncardNode\['rows'].setValue(1)\ncardNode\['columns'].setValue(1)\ncardNode\['matrix'].setExpression(projCamName+'.matrix')\n\nprojectNode = nuke.nodes.Project3D()\nprojectNode.setInput(1,renderCamNode)\n\ncardNode.setInput(0, projectNode)\n\n\nscanlineNode = nuke.nodes.ScanlineRender()\n\nscanlineNode.setInput(1,cardNode)\nscanlineNode.setInput(2,projCamNode)\nscanlineNode\['projection_mode'].setValue('uv')\n\n\n\nGodRayNode.setInput(0,scanlineNode)\n\nscanlineNode\['ypos'].setValue(renderCamNode\['ypos'].value()+80)\nscanlineNode\['xpos'].setValue(renderCamNode\['xpos'].value()+100)\n" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {41 BlinkPositionProject_ZMin l ZMin T BlinkScript2.BlinkPositionProject_ZMin}
addUserKnob {41 BlinkPositionProject_ZMax l ZMax T BlinkScript2.BlinkPositionProject_ZMax}
addUserKnob {41 BlinkPositionProject_fromColour l "from colour" T BlinkScript2.BlinkPositionProject_fromColour}
addUserKnob {41 BlinkPositionProject_toColour l "to colour" T BlinkScript2.BlinkPositionProject_toColour}
addUserKnob {41 BlinkPositionProject_gamma l gamma T BlinkScript2.BlinkPositionProject_gamma}
addUserKnob {20 Tweaks n 1}
Tweaks 0
addUserKnob {6 clampAlpha l "clamp alpha" +STARTLINE}
addUserKnob {41 BlinkPositionProject_darkenSource l "darken at source" -STARTLINE T BlinkScript2.BlinkPositionProject_darkenSource}
addUserKnob {41 parallelBlur l "parallel scale blur" T GodRays1.parallelBlur}
addUserKnob {41 disable_2 l "both directions" -STARTLINE T Switch1.disable}
addUserKnob {41 size l "gaussian blur" T Blur1.size}
addUserKnob {41 BlinkPositionProject_vMult l "vaperture scale" T BlinkScript2.BlinkPositionProject_vMult}
addUserKnob {20 endGroup n -1}
addUserKnob {26 ""}
addUserKnob {26 credit l "" +STARTLINE T "Chris Fryer | 2020"}
}
Input {
 inputs 0
 name renderCam
 xpos 2285
 ypos 140
 number 1
}
Card2 {
 inputs 0
 control_points {3 3 3 6 

1 {-0.5 -0.5 0} 1 {0.1666666865 0 0} 1 {0 0 0} 1 {0 0.1666666865 0} 1 {0 0 0} 1 {0 0 0} 
1 {0 -0.5 0} 1 {0.1666666716 0 0} 1 {-0.1666666716 0 0} 1 {0 0.1666666865 0} 1 {0 0 0} 1 {0.5 0 0} 
1 {0.5 -0.5 0} 1 {0 0 0} 1 {-0.1666666865 0 0} 1 {0 0.1666666865 0} 1 {0 0 0} 1 {1 0 0} 
1 {-0.5 0 0} 1 {0.1666666865 0 0} 1 {0 0 0} 1 {0 0.1666666716 0} 1 {0 -0.1666666716 0} 1 {0 0.5 0} 
1 {0 0 0} 1 {0.1666666716 0 0} 1 {-0.1666666716 0 0} 1 {0 0.1666666716 0} 1 {0 -0.1666666716 0} 1 {0.5 0.5 0} 
1 {0.5 0 0} 1 {0 0 0} 1 {-0.1666666865 0 0} 1 {0 0.1666666716 0} 1 {0 -0.1666666716 0} 1 {1 0.5 0} 
1 {-0.5 0.5 0} 1 {0.1666666865 0 0} 1 {0 0 0} 1 {0 0 0} 1 {0 -0.1666666865 0} 1 {0 1 0} 
1 {0 0.5 0} 1 {0.1666666716 0 0} 1 {-0.1666666716 0 0} 1 {0 0 0} 1 {0 -0.1666666865 0} 1 {0.5 1 0} 
1 {0.5 0.5 0} 1 {0 0 0} 1 {-0.1666666865 0 0} 1 {0 0 0} 1 {0 -0.1666666865 0} 1 {1 1 0} }
 name Card1
 xpos 6670
 ypos -10
}
Input {
 inputs 0
 name projectionCam
 xpos 1973
 ypos 127
 number 2
}
Camera2 {
 inputs 0
 useMatrix true
 matrix {
     {{parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix}}
     {{parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix}}
     {{parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix}}
     {{parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix} {parent.BlinkScript2.BlinkPositionProject_matrix}}
   }
 focal {{parent.BlinkScript2.BlinkPositionProject_focal}}
 haperture {{parent.BlinkScript2.BlinkPositionProject_haperture}}
 vaperture {{parent.BlinkScript2.BlinkPositionProject_vaperture}}
 name Camera1
 xpos 2585
 ypos 268
 disable {{parent.Reconcile3D1.disable}}
}
push 0
Reconcile3D {
 inputs 2
 point {{parent.BlinkScript2.BlinkPositionProject_projMatrix.3} {parent.BlinkScript2.BlinkPositionProject_projMatrix.7} {parent.BlinkScript2.BlinkPositionProject_projMatrix.11}}
 calc_output true
 name Reconcile3D1
 xpos 2402
 ypos 330
 disable {{"GodRays1.parallelBlur == 0 ? 1 : 0"}}
}
Input {
 inputs 0
 name img
 xpos 2114
 ypos 62
}
AdjBBox {
 numpixels 1
 name AdjBBox1
 xpos 2114
 ypos 154
}
set N2fcecc00 [stack 0]
BlinkScript {
 recompileCount 1034
 ProgramGroup 1
 KernelDescription "2 \"BlinkPositionProject\" iterate pixelWise dcb4a814165987bf7f23bd62c3709a00395e525e31bf6e8513f5c3e9bcba8b83 2 \"src\" Read Point \"dst\" Write Random 21 \"darkenSource\" Bool 1 AA== \"darkenAmount\" Float 1 AAAAAA== \"iterations\" Int 1 AAAAAA== \"focal\" Float 1 AAAAAA== \"haperture\" Float 1 AAAAAA== \"vaperture\" Float 1 AAAAAA== \"matrix\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"projFocal\" Float 1 AAAAAA== \"projHaperture\" Float 1 AAAAAA== \"projVaperture\" Float 1 AAAAAA== \"projMatrix\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"projNear\" Float 1 AAAAAA== \"projFar\" Float 1 AAAAAA== \"Z\" Float 1 AAAAAA== \"ZMin\" Float 1 AAAAAA== \"ZMax\" Float 1 AAAAAA== \"vMult\" Float 1 AAAAAA== \"posData\" Float 4 AAAAAAAAAAAAAAAAAAAAAA== \"fromColour\" Float 1 AAAAAA== \"toColour\" Float 1 AAAAAA== \"gamma\" Float 1 AAAAAA== 21 \"darkenSource\" 1 1 \"darkenAmount\" 1 1 \"iterations\" 1 1 \"focal\" 1 1 \"haperture\" 1 1 \"vaperture\" 1 1 \"matrix\" 16 1 \"projFocal\" 1 1 \"projHaperture\" 1 1 \"projVaperture\" 1 1 \"projMatrix\" 16 1 \"projNear\" 1 1 \"projFar\" 1 1 \"Z\" 1 1 \"ZMin\" 1 1 \"ZMax\" 1 1 \"vMult\" 1 1 \"posData\" 4 1 \"fromColour\" 1 1 \"toColour\" 1 1 \"gamma\" 1 1 0"
 kernelSource "kernel BlinkPositionProject : ImageComputationKernel<ePixelWise>\n\{\n  Image<eRead, eAccessPoint, eEdgeClamped> src;\n  \n  \n  Image<eWrite, eAccessRandom, eEdgeClamped> dst;\n\n  param:\n\n    bool darkenSource;\n    float darkenAmount;\n   \n    int iterations;\n\n   \n\n    float focal;\n    float haperture;\n    float vaperture;\n    float4x4 matrix;\n\n    float projFocal;\n    float projHaperture;\n    float projVaperture;\n    float4x4 projMatrix;\n    float projNear;\n    float projFar;\n\n    float Z;\n    float ZMin;\n    float ZMax;    \n\n    float vMult;\n  \n    float4 posData;\n\n    float fromColour;\n    float toColour;\n    float gamma;\n    \n  \n\n  void process(int2 position) \{  \n\n        float newZ;      \n\n        float2 resolution;\n        resolution.x = src.bounds.width();\n        resolution.y = src.bounds.height();\n\n        float4 output;\n        float4 projRotated;\n        float4 posDifference;\n\n        float4 posNewPerspective;\n\n        float4 posNewPos;\n\n        float4 uv;\n\n        //newZ = ZMin + (ZMax-ZMin)*iterations;\n        //newZ = ZMin + (ZMax-ZMin)*(i/iterations);\n        newZ =  ZMin;\n\n        posData.x = ((((position.x+.5f))/resolution.x-.5f)*projHaperture/projFocal)*newZ;\n        posData.y = ((((position.y+.5f))/resolution.y-.5f)*(resolution.y/resolution.x)*projHaperture/projFocal)*newZ;\n        posData.z = -newZ;\n\n        projRotated.x = projMatrix\[0]\[0]*posData.x + projMatrix\[0]\[1]*posData.y + projMatrix\[0]\[2]*posData.z;\n        projRotated.y = projMatrix\[1]\[0]*posData.x + projMatrix\[1]\[1]*posData.y + projMatrix\[1]\[2]*posData.z;\n        projRotated.z = projMatrix\[2]\[0]*posData.x + projMatrix\[2]\[1]*posData.y + projMatrix\[2]\[2]*posData.z;\n       \n        posDifference.x = projRotated.x + projMatrix\[0]\[3];\n        posDifference.y = projRotated.y + projMatrix\[1]\[3];\n        posDifference.z = projRotated.z + projMatrix\[2]\[3]; \n        \n\n\n        posNewPos.x = posDifference.x - matrix\[0]\[3];\n        posNewPos.y = posDifference.y - matrix\[1]\[3];\n        posNewPos.z = posDifference.z - matrix\[2]\[3];\n        \n        posNewPerspective.x = matrix\[0]\[0]*posNewPos.x + matrix\[1]\[0]*posNewPos.y + matrix\[2]\[0]*posNewPos.z;\n        posNewPerspective.y = matrix\[0]\[1]*posNewPos.x + matrix\[1]\[1]*posNewPos.y + matrix\[2]\[1]*posNewPos.z;\n        posNewPerspective.z = matrix\[0]\[2]*posNewPos.x + matrix\[1]\[2]*posNewPos.y + matrix\[2]\[2]*posNewPos.z;\n\n        \n\n        \n        uv.x = 0.5f - (posNewPerspective.x * ((focal/(haperture))/posNewPerspective.z));\n        uv.y = 0.5f - (posNewPerspective.y * ((focal/(vaperture*vMult))/posNewPerspective.z));\n        uv.z = 1;\n         \n\n        float4 uvScaled;\n        float4 uvScaledA;\n        float4 uvScaledB;\n\n        uvScaledA.x = uv.x*resolution.x;\n        uvScaledA.y = uv.y*resolution.y;\n\n        newZ =  ZMax;\n\n        posData.x = ((((position.x+.5f))/resolution.x-.5f)*projHaperture/projFocal)*newZ;\n        posData.y = ((((position.y+.5f))/resolution.y-.5f)*(resolution.y/resolution.x)*projHaperture/projFocal)*newZ;\n        posData.z = -newZ;\n\n        projRotated.x = projMatrix\[0]\[0]*posData.x + projMatrix\[0]\[1]*posData.y + projMatrix\[0]\[2]*posData.z;\n        projRotated.y = projMatrix\[1]\[0]*posData.x + projMatrix\[1]\[1]*posData.y + projMatrix\[1]\[2]*posData.z;\n        projRotated.z = projMatrix\[2]\[0]*posData.x + projMatrix\[2]\[1]*posData.y + projMatrix\[2]\[2]*posData.z;\n       \n        posDifference.x = projRotated.x + projMatrix\[0]\[3];\n        posDifference.y = projRotated.y + projMatrix\[1]\[3];\n        posDifference.z = projRotated.z + projMatrix\[2]\[3]; \n        \n\n\n        posNewPos.x = posDifference.x - matrix\[0]\[3];\n        posNewPos.y = posDifference.y - matrix\[1]\[3];\n        posNewPos.z = posDifference.z - matrix\[2]\[3];\n        \n        posNewPerspective.x = matrix\[0]\[0]*posNewPos.x + matrix\[1]\[0]*posNewPos.y + matrix\[2]\[0]*posNewPos.z;\n        posNewPerspective.y = matrix\[0]\[1]*posNewPos.x + matrix\[1]\[1]*posNewPos.y + matrix\[2]\[1]*posNewPos.z;\n        posNewPerspective.z = matrix\[0]\[2]*posNewPos.x + matrix\[1]\[2]*posNewPos.y + matrix\[2]\[2]*posNewPos.z;\n\n        posNewPerspective.w = pow(pow(posNewPerspective.x,2)+pow(posNewPerspective.y,2)+pow(posNewPerspective.z,2),0.5f);\n\n        \n        uv.x = 0.5f - (posNewPerspective.x * ((focal/(haperture))/posNewPerspective.z));\n        uv.y = 0.5f - (posNewPerspective.y * ((focal/(vaperture*vMult))/posNewPerspective.z));\n        uv.z = 1;\n\n\n\n        uvScaledB.x = uv.x*resolution.x;\n        uvScaledB.y = uv.y*resolution.y;\n\n        for (float i = 0; i < iterations; i++ )\{\n\n        uvScaled = uvScaledA + (uvScaledB-uvScaledA)*(i/iterations);        \n        \n        // farthest\n        \n\n            //dst(uvScaled.x,uvScaled.y) += (src()/(iterations/((i+1)/iterations)))*(pow((fromColour+(toColour-fromColour)*(i/iterations)),1/gamma));\n\n            //if (dst(uvScaled.x,uvScaled.y).x < posNewPerspective.w)\{\n\n              //dst(uvScaled.x,uvScaled.y) = posNewPerspective.w;\n\n            //\}\n\n            if (dst(uvScaled.x,uvScaled.y).y == 0 || dst(uvScaled.x,uvScaled.y).y > posNewPerspective.w)\{\n\n              dst(uvScaled.x,uvScaled.y) = posNewPerspective.w;\n\n\n            \} \n            \n            \n\n        \} \n\n\n          \n        \n    \}\n\n    \n\n  \n\};"
 useGPUIfAvailable false
 rebuild ""
 BlinkPositionProject_darkenSource true
 BlinkPositionProject_darkenAmount 1
 BlinkPositionProject_iterations {{parent.BlinkScript2.BlinkPositionProject_iterations}}
 BlinkPositionProject_focal {{"\[topnode parent.input1].focal"}}
 BlinkPositionProject_haperture {{"\[topnode parent.input1].haperture"}}
 BlinkPositionProject_vaperture {{"\[topnode parent.input1].vaperture"}}
 BlinkPositionProject_matrix {
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
   }
 BlinkPositionProject_projFocal {{"\[topnode parent.input2].focal"}}
 BlinkPositionProject_projHaperture {{"\[topnode parent.input2].haperture"}}
 BlinkPositionProject_projVaperture {{"\[topnode parent.input2].vaperture"}}
 BlinkPositionProject_projMatrix {
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
   }
 BlinkPositionProject_projNear 0.1
 BlinkPositionProject_projFar 10
 BlinkPositionProject_ZMin {{parent.BlinkScript2.BlinkPositionProject_ZMin}}
 BlinkPositionProject_ZMax {{parent.BlinkScript2.BlinkPositionProject_ZMax}}
 BlinkPositionProject_vMult {{parent.BlinkScript2.BlinkPositionProject_vMult}}
 BlinkPositionProject_fromColour 1
 BlinkPositionProject_gamma 0.25
 rebuild_finalise ""
 name BlinkScript1
 label closestZ
 xpos 1879
 ypos 222
 disable {{parent.BlinkScript3.disable}}
}
push $N2fcecc00
BlinkScript {
 recompileCount 1034
 ProgramGroup 1
 KernelDescription "2 \"BlinkPositionProject\" iterate pixelWise 03739eb4653c5b2d5ca993b0012cd922fa348feb2118adb320c13df5b7472b40 2 \"src\" Read Point \"dst\" Write Random 18 \"iterations\" Int 1 AAAAAA== \"focal\" Float 1 AAAAAA== \"haperture\" Float 1 AAAAAA== \"vaperture\" Float 1 AAAAAA== \"matrix\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"projFocal\" Float 1 AAAAAA== \"projHaperture\" Float 1 AAAAAA== \"projVaperture\" Float 1 AAAAAA== \"projMatrix\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"projNear\" Float 1 AAAAAA== \"projFar\" Float 1 AAAAAA== \"ZMin\" Float 1 AAAAAA== \"ZMax\" Float 1 AAAAAA== \"vMult\" Float 1 AAAAAA== \"posData\" Float 4 AAAAAAAAAAAAAAAAAAAAAA== \"fromColour\" Float 1 AAAAAA== \"toColour\" Float 1 AAAAAA== \"gamma\" Float 1 AAAAAA== 18 \"iterations\" 1 1 \"focal\" 1 1 \"haperture\" 1 1 \"vaperture\" 1 1 \"matrix\" 16 1 \"projFocal\" 1 1 \"projHaperture\" 1 1 \"projVaperture\" 1 1 \"projMatrix\" 16 1 \"projNear\" 1 1 \"projFar\" 1 1 \"ZMin\" 1 1 \"ZMax\" 1 1 \"vMult\" 1 1 \"posData\" 4 1 \"fromColour\" 1 1 \"toColour\" 1 1 \"gamma\" 1 1 0"
 kernelSource "kernel BlinkPositionProject : ImageComputationKernel<ePixelWise>\n\{\n  Image<eRead, eAccessPoint, eEdgeClamped> src;\n  \n  \n  Image<eWrite, eAccessRandom, eEdgeClamped> dst;\n\n  param:\n\n    \n    \n   \n    int iterations;\n\n   \n\n    float focal;\n    float haperture;\n    float vaperture;\n    float4x4 matrix;\n\n    float projFocal;\n    float projHaperture;\n    float projVaperture;\n    float4x4 projMatrix;\n    float projNear;\n    float projFar;\n\n    \n    float ZMin;\n    float ZMax;    \n\n    float vMult;\n  \n    float4 posData;\n\n    float fromColour;\n    float toColour;\n    float gamma;\n    \n  \n\n  void process(int2 position) \{  \n\n        float newZ;      \n\n        float2 resolution;\n        resolution.x = src.bounds.width();\n        resolution.y = src.bounds.height();\n\n        float4 output;\n        float4 projRotated;\n        float4 posDifference;\n\n        float4 posNewPerspective;\n\n        float4 posNewPos;\n\n        float4 uv;        \n        newZ =  ZMin;\n\n        posData.x = ((((position.x+.5f))/resolution.x-.5f)*projHaperture/projFocal)*newZ;\n        posData.y = ((((position.y+.5f))/resolution.y-.5f)*(resolution.y/resolution.x)*projHaperture/projFocal)*newZ;\n        posData.z = -newZ;\n\n        projRotated.x = projMatrix\[0]\[0]*posData.x + projMatrix\[0]\[1]*posData.y + projMatrix\[0]\[2]*posData.z;\n        projRotated.y = projMatrix\[1]\[0]*posData.x + projMatrix\[1]\[1]*posData.y + projMatrix\[1]\[2]*posData.z;\n        projRotated.z = projMatrix\[2]\[0]*posData.x + projMatrix\[2]\[1]*posData.y + projMatrix\[2]\[2]*posData.z;\n       \n        posDifference.x = projRotated.x + projMatrix\[0]\[3];\n        posDifference.y = projRotated.y + projMatrix\[1]\[3];\n        posDifference.z = projRotated.z + projMatrix\[2]\[3]; \n        \n\n\n        posNewPos.x = posDifference.x - matrix\[0]\[3];\n        posNewPos.y = posDifference.y - matrix\[1]\[3];\n        posNewPos.z = posDifference.z - matrix\[2]\[3];\n        \n        posNewPerspective.x = matrix\[0]\[0]*posNewPos.x + matrix\[1]\[0]*posNewPos.y + matrix\[2]\[0]*posNewPos.z;\n        posNewPerspective.y = matrix\[0]\[1]*posNewPos.x + matrix\[1]\[1]*posNewPos.y + matrix\[2]\[1]*posNewPos.z;\n        posNewPerspective.z = matrix\[0]\[2]*posNewPos.x + matrix\[1]\[2]*posNewPos.y + matrix\[2]\[2]*posNewPos.z;\n\n        \n\n        \n        uv.x = 0.5f - (posNewPerspective.x * ((focal/(haperture))/posNewPerspective.z));\n        uv.y = 0.5f - (posNewPerspective.y * ((focal/(vaperture*vMult))/posNewPerspective.z));\n        uv.z = 1;         \n\n        float4 uvScaled;\n        float4 uvScaledA;\n        float4 uvScaledB;\n\n        uvScaledA.x = uv.x*resolution.x;\n        uvScaledA.y = uv.y*resolution.y;\n\n        newZ =  ZMax;\n\n        posData.x = ((((position.x+.5f))/resolution.x-.5f)*projHaperture/projFocal)*newZ;\n        posData.y = ((((position.y+.5f))/resolution.y-.5f)*(resolution.y/resolution.x)*projHaperture/projFocal)*newZ;\n        posData.z = -newZ;\n\n        projRotated.x = projMatrix\[0]\[0]*posData.x + projMatrix\[0]\[1]*posData.y + projMatrix\[0]\[2]*posData.z;\n        projRotated.y = projMatrix\[1]\[0]*posData.x + projMatrix\[1]\[1]*posData.y + projMatrix\[1]\[2]*posData.z;\n        projRotated.z = projMatrix\[2]\[0]*posData.x + projMatrix\[2]\[1]*posData.y + projMatrix\[2]\[2]*posData.z;\n       \n        posDifference.x = projRotated.x + projMatrix\[0]\[3];\n        posDifference.y = projRotated.y + projMatrix\[1]\[3];\n        posDifference.z = projRotated.z + projMatrix\[2]\[3]; \n        \n\n\n        posNewPos.x = posDifference.x - matrix\[0]\[3];\n        posNewPos.y = posDifference.y - matrix\[1]\[3];\n        posNewPos.z = posDifference.z - matrix\[2]\[3];\n        \n        posNewPerspective.x = matrix\[0]\[0]*posNewPos.x + matrix\[1]\[0]*posNewPos.y + matrix\[2]\[0]*posNewPos.z;\n        posNewPerspective.y = matrix\[0]\[1]*posNewPos.x + matrix\[1]\[1]*posNewPos.y + matrix\[2]\[1]*posNewPos.z;\n        posNewPerspective.z = matrix\[0]\[2]*posNewPos.x + matrix\[1]\[2]*posNewPos.y + matrix\[2]\[2]*posNewPos.z;\n\n        posNewPerspective.w = pow(pow(posNewPerspective.x,2)+pow(posNewPerspective.y,2)+pow(posNewPerspective.z,2),0.5f);\n\n        \n        uv.x = 0.5f - (posNewPerspective.x * ((focal/(haperture))/posNewPerspective.z));\n        uv.y = 0.5f - (posNewPerspective.y * ((focal/(vaperture*vMult))/posNewPerspective.z));\n        uv.z = 1;\n\n\n\n        uvScaledB.x = uv.x*resolution.x;\n        uvScaledB.y = uv.y*resolution.y;\n\n        for (float i = 0; i < iterations; i++ )\{\n\n        uvScaled = uvScaledA + (uvScaledB-uvScaledA)*(i/iterations);        \n        \n      \n            if (dst(uvScaled.x,uvScaled.y).x < posNewPerspective.w)\{\n\n              dst(uvScaled.x,uvScaled.y) = posNewPerspective.w;\n\n            \}\n            \n            \n\n        \} \n\n\n          \n        \n    \}\n\n    \n\n  \n\};"
 useGPUIfAvailable false
 rebuild ""
 BlinkPositionProject_iterations {{parent.BlinkScript2.BlinkPositionProject_iterations}}
 BlinkPositionProject_focal {{"\[topnode parent.input1].focal"}}
 BlinkPositionProject_haperture {{"\[topnode parent.input1].haperture"}}
 BlinkPositionProject_vaperture {{"\[topnode parent.input1].vaperture"}}
 BlinkPositionProject_matrix {
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
   }
 BlinkPositionProject_projFocal {{"\[topnode parent.input2].focal"}}
 BlinkPositionProject_projHaperture {{"\[topnode parent.input2].haperture"}}
 BlinkPositionProject_projVaperture {{"\[topnode parent.input2].vaperture"}}
 BlinkPositionProject_projMatrix {
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
   }
 BlinkPositionProject_projNear 0.1
 BlinkPositionProject_projFar 10
 BlinkPositionProject_ZMin {{parent.BlinkScript2.BlinkPositionProject_ZMin}}
 BlinkPositionProject_ZMax {{parent.BlinkScript2.BlinkPositionProject_ZMax}}
 BlinkPositionProject_vMult {{parent.BlinkScript2.BlinkPositionProject_vMult}}
 BlinkPositionProject_fromColour 1
 BlinkPositionProject_gamma 0.25
 rebuild_finalise ""
 name BlinkScript3
 label farthestZ
 xpos 1963
 ypos 222
 disable {{1-parent.deepOutput}}
}
push $N2fcecc00
BlinkScript {
 recompileCount 1008
 ProgramGroup 1
 KernelDescription "2 \"BlinkPositionProject\" iterate pixelWise 26ef05b84a7f67761e7c5b86358e92df4eb04d2c8627e61712671bdb2dd5db5a 2 \"src\" Read Point \"dst\" Write Random 21 \"darkenSource\" Bool 1 AA== \"darkenAmount\" Float 1 AAAAAA== \"iterations\" Int 1 AAAAAA== \"focal\" Float 1 AAAAAA== \"haperture\" Float 1 AAAAAA== \"vaperture\" Float 1 AAAAAA== \"matrix\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"projFocal\" Float 1 AAAAAA== \"projHaperture\" Float 1 AAAAAA== \"projVaperture\" Float 1 AAAAAA== \"projMatrix\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"projNear\" Float 1 AAAAAA== \"projFar\" Float 1 AAAAAA== \"Z\" Float 1 AAAAAA== \"ZMin\" Float 1 AAAAAA== \"ZMax\" Float 1 AAAAAA== \"vMult\" Float 1 AAAAAA== \"posData\" Float 4 AAAAAAAAAAAAAAAAAAAAAA== \"fromColour\" Float 1 AAAAAA== \"toColour\" Float 1 AAAAAA== \"gamma\" Float 1 AAAAAA== 21 \"darkenSource\" 1 1 \"darkenAmount\" 1 1 \"iterations\" 1 1 \"focal\" 1 1 \"haperture\" 1 1 \"vaperture\" 1 1 \"matrix\" 16 1 \"projFocal\" 1 1 \"projHaperture\" 1 1 \"projVaperture\" 1 1 \"projMatrix\" 16 1 \"projNear\" 1 1 \"projFar\" 1 1 \"Z\" 1 1 \"ZMin\" 1 1 \"ZMax\" 1 1 \"vMult\" 1 1 \"posData\" 4 1 \"fromColour\" 1 1 \"toColour\" 1 1 \"gamma\" 1 1 0"
 kernelSource "kernel BlinkPositionProject : ImageComputationKernel<ePixelWise>\n\{\n  Image<eRead, eAccessPoint, eEdgeClamped> src;\n  \n  \n  Image<eWrite, eAccessRandom, eEdgeClamped> dst;\n\n  param:\n\n    bool darkenSource;\n    float darkenAmount;\n   \n    int iterations;\n\n   \n\n    float focal;\n    float haperture;\n    float vaperture;\n    float4x4 matrix;\n\n    float projFocal;\n    float projHaperture;\n    float projVaperture;\n    float4x4 projMatrix;\n    float projNear;\n    float projFar;\n\n    float Z;\n    float ZMin;\n    float ZMax;    \n\n    float vMult;\n  \n    float4 posData;\n\n    float fromColour;\n    float toColour;\n    float gamma;\n    \n  \n\n  void process(int2 position) \{  \n\n        float newZ;      \n\n        float2 resolution;\n        resolution.x = src.bounds.width();\n        resolution.y = src.bounds.height();\n\n        float4 output;\n        float4 projRotated;\n        float4 posDifference;\n\n        float4 posNewPerspective;\n\n        float4 posNewPos;\n\n        float4 uv;\n\n        //newZ = ZMin + (ZMax-ZMin)*iterations;\n        //newZ = ZMin + (ZMax-ZMin)*(i/iterations);\n        newZ =  ZMin;\n\n        posData.x = ((((position.x+.5f))/resolution.x-.5f)*projHaperture/projFocal)*newZ;\n        posData.y = ((((position.y+.5f))/resolution.y-.5f)*(resolution.y/resolution.x)*projHaperture/projFocal)*newZ;\n        posData.z = -newZ;\n\n        projRotated.x = projMatrix\[0]\[0]*posData.x + projMatrix\[0]\[1]*posData.y + projMatrix\[0]\[2]*posData.z;\n        projRotated.y = projMatrix\[1]\[0]*posData.x + projMatrix\[1]\[1]*posData.y + projMatrix\[1]\[2]*posData.z;\n        projRotated.z = projMatrix\[2]\[0]*posData.x + projMatrix\[2]\[1]*posData.y + projMatrix\[2]\[2]*posData.z;\n       \n        posDifference.x = projRotated.x + projMatrix\[0]\[3];\n        posDifference.y = projRotated.y + projMatrix\[1]\[3];\n        posDifference.z = projRotated.z + projMatrix\[2]\[3]; \n        \n\n\n        posNewPos.x = posDifference.x - matrix\[0]\[3];\n        posNewPos.y = posDifference.y - matrix\[1]\[3];\n        posNewPos.z = posDifference.z - matrix\[2]\[3];\n        \n        posNewPerspective.x = matrix\[0]\[0]*posNewPos.x + matrix\[1]\[0]*posNewPos.y + matrix\[2]\[0]*posNewPos.z;\n        posNewPerspective.y = matrix\[0]\[1]*posNewPos.x + matrix\[1]\[1]*posNewPos.y + matrix\[2]\[1]*posNewPos.z;\n        posNewPerspective.z = matrix\[0]\[2]*posNewPos.x + matrix\[1]\[2]*posNewPos.y + matrix\[2]\[2]*posNewPos.z;\n\n        \n\n        \n        uv.x = 0.5f - (posNewPerspective.x * ((focal/(haperture))/posNewPerspective.z));\n        uv.y = 0.5f - (posNewPerspective.y * ((focal/(vaperture*vMult))/posNewPerspective.z));\n        uv.z = 1;\n         \n\n        float4 uvScaled;\n        float4 uvScaledA;\n        float4 uvScaledB;\n\n        uvScaledA.x = uv.x*resolution.x;\n        uvScaledA.y = uv.y*resolution.y;\n\n        newZ =  ZMax;\n\n        posData.x = ((((position.x+.5f))/resolution.x-.5f)*projHaperture/projFocal)*newZ;\n        posData.y = ((((position.y+.5f))/resolution.y-.5f)*(resolution.y/resolution.x)*projHaperture/projFocal)*newZ;\n        posData.z = -newZ;\n\n        projRotated.x = projMatrix\[0]\[0]*posData.x + projMatrix\[0]\[1]*posData.y + projMatrix\[0]\[2]*posData.z;\n        projRotated.y = projMatrix\[1]\[0]*posData.x + projMatrix\[1]\[1]*posData.y + projMatrix\[1]\[2]*posData.z;\n        projRotated.z = projMatrix\[2]\[0]*posData.x + projMatrix\[2]\[1]*posData.y + projMatrix\[2]\[2]*posData.z;\n       \n        posDifference.x = projRotated.x + projMatrix\[0]\[3];\n        posDifference.y = projRotated.y + projMatrix\[1]\[3];\n        posDifference.z = projRotated.z + projMatrix\[2]\[3]; \n        \n\n\n        posNewPos.x = posDifference.x - matrix\[0]\[3];\n        posNewPos.y = posDifference.y - matrix\[1]\[3];\n        posNewPos.z = posDifference.z - matrix\[2]\[3];\n        \n        posNewPerspective.x = matrix\[0]\[0]*posNewPos.x + matrix\[1]\[0]*posNewPos.y + matrix\[2]\[0]*posNewPos.z;\n        posNewPerspective.y = matrix\[0]\[1]*posNewPos.x + matrix\[1]\[1]*posNewPos.y + matrix\[2]\[1]*posNewPos.z;\n        posNewPerspective.z = matrix\[0]\[2]*posNewPos.x + matrix\[1]\[2]*posNewPos.y + matrix\[2]\[2]*posNewPos.z;\n\n        \n\n        \n        uv.x = 0.5f - (posNewPerspective.x * ((focal/(haperture))/posNewPerspective.z));\n        uv.y = 0.5f - (posNewPerspective.y * ((focal/(vaperture*vMult))/posNewPerspective.z));\n        uv.z = 1;\n\n\n\n        uvScaledB.x = uv.x*resolution.x;\n        uvScaledB.y = uv.y*resolution.y;\n\n        for (float i = 0; i < iterations; i++ )\{\n\n        uvScaled = uvScaledA + (uvScaledB-uvScaledA)*(i/iterations);        \n        \n        \n        if (darkenSource == 1)\{\n\n            dst(uvScaled.x,uvScaled.y) += (src()/(iterations/((i+1)/iterations)))*(pow((fromColour+(toColour-fromColour)*(i/iterations)),1/gamma));\n          \} else \{\n            dst(uvScaled.x,uvScaled.y) += (src()/(iterations))*(pow((fromColour+(toColour-fromColour)*(i/iterations)),1/gamma));\n          \}\n        \n    \}\n\n    \n\n  \}\n\};"
 useGPUIfAvailable false
 rebuild ""
 BlinkPositionProject_darkenAmount 1
 BlinkPositionProject_iterations 1
 BlinkPositionProject_focal {{"\[topnode parent.input1].focal"}}
 BlinkPositionProject_haperture {{"\[topnode parent.input1].haperture"}}
 BlinkPositionProject_vaperture {{"\[topnode parent.input1].vaperture"}}
 BlinkPositionProject_matrix {
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
     {{"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"} {"\[topnode parent.input1].world_matrix"}}
   }
 BlinkPositionProject_projFocal {{"\[topnode parent.input2].focal"}}
 BlinkPositionProject_projHaperture {{"\[topnode parent.input2].haperture"}}
 BlinkPositionProject_projVaperture {{"\[topnode parent.input2].vaperture"}}
 BlinkPositionProject_projMatrix {
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
     {{"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"} {"\[topnode parent.input2].world_matrix"}}
   }
 BlinkPositionProject_projNear 0.1
 BlinkPositionProject_projFar 10
 BlinkPositionProject_ZMin 0.01
 BlinkPositionProject_ZMax 1
 BlinkPositionProject_vMult 1
 BlinkPositionProject_fromColour 1
 BlinkPositionProject_gamma 0.25
 rebuild_finalise ""
 name BlinkScript2
 xpos 2114
 ypos 204
}
add_layer {GodRaysDeep GodRaysDeep.front GodRaysDeep.back}
Copy {
 inputs 2
 from0 rgba.red
 to0 GodRaysDeep.back
 name Copy1
 xpos 2114
 ypos 253
 disable {{1-parent.deepOutput}}
}
Copy {
 inputs 2
 from0 rgba.red
 to0 GodRaysDeep.front
 name Copy2
 xpos 2114
 ypos 291
 disable {{1-parent.deepOutput}}
}
Position {
 translate {-1 -1}
 name Position1
 xpos 2114
 ypos 334
}
AdjBBox {
 numpixels -1
 name AdjBBox2
 xpos 2114
 ypos 366
}
Expression {
 channel0 none
 channel1 none
 channel2 none
 channel3 alpha
 expr3 "a > 1 ? 1 : a"
 name Expression1
 xpos 2114
 ypos 400
 disable {{1-parent.clampAlpha}}
}
Multiply {
 channels rgba
 value 3.5
 name Multiply1
 xpos 2114
 ypos 426
 disable {{1-parent.BlinkScript2.useGPUIfAvailable}}
}
GodRays {
 scale {{1+parallelBlur}}
 center {{parent.Reconcile3D1.output} {parent.Reconcile3D1.output}}
 steps 10
 name GodRays1
 xpos 2114
 ypos 452
 disable {{parent.Reconcile3D1.disable}}
 addUserKnob {20 User}
 addUserKnob {7 parallelBlur l "parallel scale blur"}
}
set N344e5400 [stack 0]
push $N344e5400
GodRays {
 scale {{1/parent.GodRays1.scale}}
 center {{parent.Reconcile3D1.output} {parent.Reconcile3D1.output}}
 name GodRays2
 xpos 2222
 ypos 479
 disable {{parent.Reconcile3D1.disable}}
}
Switch {
 inputs 2
 which 1
 name Switch1
 xpos 2114
 ypos 512
 disable true
}
Blur {
 name Blur1
 xpos 2114
 ypos 538
}
set N3b870000 [stack 0]
DeepFromImage {
 premult true
 z 0.084
 name DeepFromImage1
 xpos 2228
 ypos 544
 disable {{1-parent.deepOutput}}
}
DeepExpression {
 chans1 deep
 chans2 GodRaysDeep
 deep.front GodRaysDeep.front
 deep.back GodRaysDeep.back
 name DeepExpression1
 xpos 2228
 ypos 570
 disable {{1-parent.deepOutput}}
}
push $N3b870000
Switch {
 inputs 2
 which {{parent.deepOutput}}
 name Switch2
 xpos 2114
 ypos 630
}
Output {
 name Output1
 xpos 2114
 ypos 687
}
Group {
 inputs 0
 name superwhite_rolloff
 xpos 1039
 ypos 450
 addUserKnob {20 User}
 addUserKnob {16 rolloff}
 rolloff 15
}
 Input {
  inputs 0
  name Input1
  xpos -165
  ypos -317
 }
 Expression {
  expr0 "r>rolloff ? (log((r-rolloff)+1)+rolloff):r"
  expr1 "g>rolloff ? (log((g-rolloff)+1)+rolloff):g"
  expr2 "b>rolloff ? (log((b-rolloff)+1)+rolloff):b"
  name Expression1
  xpos -165
  ypos -188
 }
 Output {
  name Output1
  xpos -165
  ypos -32
 }
end_group
Group {
 inputs 0
 name RealBlackSoftClip2
 xpos 1489
 ypos 331
 addUserKnob {20 User}
 addUserKnob {6 rr l "red    " +STARTLINE}
 rr true
 addUserKnob {6 gg l "green    " -STARTLINE}
 gg true
 addUserKnob {6 bb l "blue            " -STARTLINE}
 bb true
 addUserKnob {6 aa l alpha -STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {41 pivot t "- up to what value to lift" T RealBlackSoftClip1.pivot}
 addUserKnob {41 lift t "- how much to lift blacks ( keep \"lift\" less than \"\"pivot\") \n" T RealBlackSoftClip1.lift}
 addUserKnob {26 ""}
 addUserKnob {41 soft t "- creates soft transition between original and lifted\n0 = 0% (straight line)\n1 = 100% (the smoothest)\n" T RealBlackSoftClip1.soft}
 addUserKnob {26 ""}
 addUserKnob {41 mix t "- dissolve between original and lifted" T Dissolve1.which}
 addUserKnob {26 ""}
 addUserKnob {26 info l "" t :-) +STARTLINE T "Helps you lift the Blacks!\n- roll over to see explanations\n- suggestions, comments are welcome\n- keep it real\nLev\n() v 4.0"}
 addUserKnob {26 ""}
}
 Input {
  inputs 0
  name image
  xpos 588
  ypos 539
 }
 Dot {
  name Dot11
  xpos 619
  ypos 675
 }
set N3b8a0400 [stack 0]
 Dot {
  name Dot12
  xpos 319
  ypos 675
 }
 Dot {
  name Dot14
  xpos 319
  ypos 1225
 }
set N3b8a0c00 [stack 0]
 Dot {
  name Dot15
  xpos 319
  ypos 1375
 }
set N3b8a1000 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 838
  ypos 539
  number 1
 }
 Dot {
  name Dot10
  xpos 869
  ypos 675
 }
 Invert {
  name Invert3
  xpos 838
  ypos 1215
 }
push $N3b8a0c00
push $N3b8a0400
 Expression {
  expr0 (r<pivot.r)?r+(lift.r*(pow((1-(r/pivot.r)),((((pivot.r/lift.r)-1)*soft.r)+1)))):r
  expr1 (g<pivot.g)?g+(lift.g*(pow((1-(g/pivot.g)),((((pivot.g/lift.g)-1)*soft.g)+1)))):g
  expr2 (b<pivot.b)?b+(lift.b*(pow((1-(b/pivot.b)),((((pivot.b/lift.b)-1)*soft.b)+1)))):b
  expr3 (a<pivot.a)?a+(lift.a*(pow((1-(a/pivot.a)),((((pivot.a/lift.a)-1)*soft.a)+1)))):a
  name RealBlackSoftClip1
  xpos 588
  ypos 940
  addUserKnob {20 User}
  addUserKnob {19 pivot}
  pivot 0.012
  addUserKnob {6 pivot_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {19 lift}
  lift {0.0004139594384 9.921607852e-05 0.0008274195134 1}
  addUserKnob {6 lift_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {19 soft}
  soft {0 0 0 0}
  addUserKnob {6 soft_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 Keymix {
  inputs 3
  name Keymix2
  xpos 588
  ypos 1215
 }
push $N3b8a1000
 Dissolve {
  inputs 2
  which 1
  name Dissolve1
  xpos 588
  ypos 1365
 }
add_layer {originalcccp originalcccp.red originalcccp.green originalcccp.blue originalcccp.alpha}
 ShuffleCopy {
  inputs 2
  alpha alpha2
  black red
  white green
  red2 blue
  green2 alpha
  out2 originalcccp
  name ShuffleCopy1
  xpos 588
  ypos 1464
 }
 Expression {
  expr0 rr?r:originalcccp.red
  expr1 gg?g:originalcccp.green
  expr2 bb?b:originalcccp.blue
  expr3 aa?a:originalcccp.alpha
  name Expression1
  xpos 588
  ypos 1522
 }
 Remove {
  channels originalcccp
  name Remove1
  xpos 588
  ypos 1581
 }
 Output {
  name Output1
  xpos 588
  ypos 1739
 }
end_group
Group {
 inputs 0
 name RealBlackSoftClip1
 xpos 1115
 ypos 299
 addUserKnob {20 User}
 addUserKnob {6 rr l "red    " +STARTLINE}
 rr true
 addUserKnob {6 gg l "green    " -STARTLINE}
 gg true
 addUserKnob {6 bb l "blue            " -STARTLINE}
 bb true
 addUserKnob {6 aa l alpha -STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {41 pivot t "- up to what value to lift" T RealBlackSoftClip1.pivot}
 addUserKnob {41 lift t "- how much to lift blacks ( keep \"lift\" less than \"\"pivot\") \n" T RealBlackSoftClip1.lift}
 addUserKnob {26 ""}
 addUserKnob {41 soft t "- creates soft transition between original and lifted\n0 = 0% (straight line)\n1 = 100% (the smoothest)\n" T RealBlackSoftClip1.soft}
 addUserKnob {26 ""}
 addUserKnob {41 mix t "- dissolve between original and lifted" T Dissolve1.which}
 addUserKnob {26 ""}
 addUserKnob {26 info l "" t :-) +STARTLINE T "Helps you lift the Blacks!\n- roll over to see explanations\n- suggestions, comments are welcome\n- keep it real\nLev\n() v 4.0"}
 addUserKnob {26 ""}
}
 Input {
  inputs 0
  name image
  xpos 588
  ypos 539
 }
 Dot {
  name Dot11
  xpos 619
  ypos 675
 }
set Nf4fde000 [stack 0]
 Dot {
  name Dot12
  xpos 319
  ypos 675
 }
 Dot {
  name Dot14
  xpos 319
  ypos 1225
 }
set Nf4fde800 [stack 0]
 Dot {
  name Dot15
  xpos 319
  ypos 1375
 }
set Nf4fdec00 [stack 0]
 Input {
  inputs 0
  name mask
  xpos 838
  ypos 539
  number 1
 }
 Dot {
  name Dot10
  xpos 869
  ypos 675
 }
 Invert {
  name Invert3
  xpos 838
  ypos 1215
 }
push $Nf4fde800
push $Nf4fde000
 Expression {
  expr0 (r<pivot.r)?r+(lift.r*(pow((1-(r/pivot.r)),((((pivot.r/lift.r)-1)*soft.r)+1)))):r
  expr1 (g<pivot.g)?g+(lift.g*(pow((1-(g/pivot.g)),((((pivot.g/lift.g)-1)*soft.g)+1)))):g
  expr2 (b<pivot.b)?b+(lift.b*(pow((1-(b/pivot.b)),((((pivot.b/lift.b)-1)*soft.b)+1)))):b
  expr3 (a<pivot.a)?a+(lift.a*(pow((1-(a/pivot.a)),((((pivot.a/lift.a)-1)*soft.a)+1)))):a
  name RealBlackSoftClip1
  xpos 588
  ypos 940
  addUserKnob {20 User}
  addUserKnob {19 pivot}
  pivot 0.012
  addUserKnob {6 pivot_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 pivot_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {19 lift}
  lift {0.0004139594384 9.921607852e-05 0.0008274195134 1}
  addUserKnob {6 lift_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 lift_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {19 soft}
  soft {0 0 0 0}
  addUserKnob {6 soft_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 soft_panelDropped_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 Keymix {
  inputs 3
  name Keymix2
  xpos 588
  ypos 1215
 }
push $Nf4fdec00
 Dissolve {
  inputs 2
  which 1
  name Dissolve1
  xpos 588
  ypos 1365
 }
 ShuffleCopy {
  inputs 2
  alpha alpha2
  black red
  white green
  red2 blue
  green2 alpha
  out2 originalcccp
  name ShuffleCopy1
  xpos 588
  ypos 1464
 }
 Expression {
  expr0 rr?r:originalcccp.red
  expr1 gg?g:originalcccp.green
  expr2 bb?b:originalcccp.blue
  expr3 aa?a:originalcccp.alpha
  name Expression1
  xpos 588
  ypos 1522
 }
 Remove {
  channels originalcccp
  name Remove1
  xpos 588
  ypos 1581
 }
 Output {
  name Output1
  xpos 588
  ypos 1739
 }
end_group
Tracker4 {
 inputs 0
 center {1024 778}
 name Tracker1
 selected true
 xpos 1342
 ypos 506
}
end_group
